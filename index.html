<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="Garderob.">
  <meta name="theme-color" content="#ffffff">
  <title>Garderob.</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-primary: #f8f9fa;
      --bg-card: #ffffff;
      --bg-secondary: #f3f4f6;
      --text-primary: #111111;
      --text-secondary: #6b7280;
      --text-tertiary: #9ca3af;
      --accent: #111111;
      --accent-soft: #f3f4f6;
      --border: #e5e7eb;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 20px rgba(0,0,0,0.06);
      --shadow-lg: 0 12px 40px rgba(0,0,0,0.1);
      --radius-sm: 12px;
      --radius-md: 16px;
      --radius-lg: 24px;
      --radius-xl: 32px;
      --title-gradient: linear-gradient(135deg, #111 0%, #444 100%);
      --picker-bg: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      --picker-text: #ffffff;
    }

    /* Themes */
    [data-theme="standard"] {
      --bg-primary: #f8f9fa;
      --bg-card: #ffffff;
      --bg-secondary: #f3f4f6;
      --text-primary: #111111;
      --text-secondary: #6b7280;
      --text-tertiary: #9ca3af;
      --accent: #111111;
      --accent-soft: #f3f4f6;
      --border: #e5e7eb;
      --title-gradient: linear-gradient(135deg, #111 0%, #444 100%);
      --picker-bg: linear-gradient(135deg, #1a1a1a 0%, #2d2d2d 100%);
      --picker-text: #ffffff;
    }

    [data-theme="rose"] {
      --bg-primary: #fff1f2;
      --bg-card: #ffffff;
      --bg-secondary: #ffe4e6;
      --text-primary: #881337;
      --text-secondary: #be185d;
      --text-tertiary: #f472b6;
      --accent: #be185d;
      --accent-soft: #ffe4e6;
      --border: #fecdd3;
      --title-gradient: linear-gradient(135deg, #881337 0%, #be185d 100%);
      --picker-bg: linear-gradient(135deg, #881337 0%, #be185d 100%);
      --picker-text: #ffffff;
    }

    [data-theme="sky"] {
      --bg-primary: #f0f9ff;
      --bg-card: #ffffff;
      --bg-secondary: #e0f2fe;
      --text-primary: #0c4a6e;
      --text-secondary: #0369a1;
      --text-tertiary: #7dd3fc;
      --accent: #0369a1;
      --accent-soft: #e0f2fe;
      --border: #bae6fd;
      --title-gradient: linear-gradient(135deg, #0c4a6e 0%, #0369a1 100%);
      --picker-bg: linear-gradient(135deg, #0c4a6e 0%, #0369a1 100%);
      --picker-text: #ffffff;
    }

    [data-theme="mint"] {
      --bg-primary: #f0fdf4;
      --bg-card: #ffffff;
      --bg-secondary: #dcfce7;
      --text-primary: #14532d;
      --text-secondary: #15803d;
      --text-tertiary: #86efac;
      --accent: #15803d;
      --accent-soft: #dcfce7;
      --border: #bbf7d0;
      --title-gradient: linear-gradient(135deg, #14532d 0%, #15803d 100%);
      --picker-bg: linear-gradient(135deg, #14532d 0%, #15803d 100%);
      --picker-text: #ffffff;
    }

    [data-theme="lavender"] {
      --bg-primary: #faf5ff;
      --bg-card: #ffffff;
      --bg-secondary: #f3e8ff;
      --text-primary: #581c87;
      --text-secondary: #7e22ce;
      --text-tertiary: #d8b4fe;
      --accent: #7e22ce;
      --accent-soft: #f3e8ff;
      --border: #e9d5ff;
      --title-gradient: linear-gradient(135deg, #581c87 0%, #7e22ce 100%);
      --picker-bg: linear-gradient(135deg, #581c87 0%, #7e22ce 100%);
      --picker-text: #ffffff;
    }

    [data-theme="peach"] {
      --bg-primary: #fff7ed;
      --bg-card: #ffffff;
      --bg-secondary: #ffedd5;
      --text-primary: #7c2d12;
      --text-secondary: #c2410c;
      --text-tertiary: #fdba74;
      --accent: #c2410c;
      --accent-soft: #ffedd5;
      --border: #fed7aa;
      --title-gradient: linear-gradient(135deg, #7c2d12 0%, #c2410c 100%);
      --picker-bg: linear-gradient(135deg, #7c2d12 0%, #c2410c 100%);
      --picker-text: #ffffff;
    }

    [data-theme="lemon"] {
      --bg-primary: #fefce8;
      --bg-card: #ffffff;
      --bg-secondary: #fef9c3;
      --text-primary: #713f12;
      --text-secondary: #a16207;
      --text-tertiary: #fde047;
      --accent: #a16207;
      --accent-soft: #fef9c3;
      --border: #fef08a;
      --title-gradient: linear-gradient(135deg, #713f12 0%, #a16207 100%);
      --picker-bg: linear-gradient(135deg, #713f12 0%, #a16207 100%);
      --picker-text: #ffffff;
    }

    [data-theme="dark"] {
      --bg-primary: #09090b;
      --bg-card: #18181b;
      --bg-secondary: #27272a;
      --text-primary: #fafafa;
      --text-secondary: #a1a1aa;
      --text-tertiary: #52525b;
      --accent: #fafafa;
      --accent-soft: #27272a;
      --border: #3f3f46;
      --title-gradient: linear-gradient(135deg, #ffffff 0%, #a1a1aa 100%);
      --picker-bg: linear-gradient(135deg, #27272a 0%, #3f3f46 100%);
      --picker-text: #ffffff;
    }

    * { 
      box-sizing: border-box; 
      margin: 0; 
      padding: 0;
      -webkit-tap-highlight-color: transparent;
    }
    
    body { 
      font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      -webkit-tap-highlight-color: transparent;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      touch-action: manipulation;
      overscroll-behavior: none;
      padding-top: env(safe-area-inset-top);
      padding-bottom: env(safe-area-inset-bottom);
      overflow-x: hidden;
    }

    /* Prevent text selection on interactive elements */
    button, .card, .filter-pill, .theme-option {
      -webkit-user-select: none;
      user-select: none;
    }

    /* GPU acceleration for smooth animations */
    .card, .btn, .picker-btn, .fab, .detail, .form-sheet, .result-modal {
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
      -webkit-backface-visibility: hidden;
      backface-visibility: hidden;
    }

    /* Animations */
    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }

    @keyframes shimmer {
      0% { background-position: -200% 0; }
      100% { background-position: 200% 0; }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-10px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .animate-fade-in { animation: fadeIn 0.6s ease-out forwards; }
    .animate-fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }
    .animate-float { animation: float 3s ease-in-out infinite; }

    /* Container */
    .container { 
      padding: 20px; 
      padding-bottom: 120px; 
      max-width: 540px; 
      margin: 0 auto;
      animation: containerFadeIn 0.4s ease-out;
    }

    @keyframes containerFadeIn {
      from { 
        opacity: 0.3;
      }
      to { 
        opacity: 1;
      }
    }

    /* Header */
    .header {
      padding: 16px 0 24px;
      animation: fadeInUp 0.6s ease-out;
    }

    .header-top {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }

    .greeting {
      font-size: 14px;
      font-weight: 500;
      color: var(--text-tertiary);
      letter-spacing: 0.5px;
      text-transform: uppercase;
      margin-bottom: 4px;
    }

    .header h1 {
      font-size: 34px;
      font-weight: 700;
      letter-spacing: -0.8px;
      background: var(--title-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      -webkit-transform: translateZ(0);
      transform: translateZ(0);
    }

    .header-actions {
      display: flex;
      gap: 8px;
      align-items: center;
    }

    .lang-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      color: var(--text-primary);
      padding: 10px 14px;
      border-radius: var(--radius-md);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.2s ease, border-color 0.2s ease;
      font-family: inherit;
      box-shadow: var(--shadow-sm);
      -webkit-transform: translateZ(0);
    }

    .lang-btn:hover { 
      background: var(--accent-soft);
      transform: translateY(-1px);
    }

    /* Theme Selector */
    .theme-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s ease, border-color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      box-shadow: var(--shadow-sm);
      -webkit-transform: translateZ(0);
    }

    .theme-btn:hover {
      transform: translateY(-1px);
      box-shadow: var(--shadow-md);
    }

    .settings-btn {
      background: var(--bg-card);
      border: 1px solid var(--border);
      width: 40px;
      height: 40px;
      border-radius: 50%;
      cursor: pointer;
      transition: transform 0.2s ease, border-color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      box-shadow: var(--shadow-sm);
      -webkit-transform: translateZ(0);
    }

    .settings-btn:hover {
      transform: translateY(-1px) rotate(45deg);
      box-shadow: var(--shadow-md);
    }

    /* Weather Bar */
    .weather-bar {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-top: 16px;
      padding: 14px 18px;
      background: var(--accent-soft);
      border-radius: var(--radius-md);
      animation: fadeInUp 0.4s ease-out 0.1s backwards;
    }

    .weather-icon {
      font-size: 24px;
    }

    .weather-temp {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .weather-tip {
      font-size: 14px;
      color: var(--text-secondary);
      margin-left: auto;
    }

    /* Settings Modal */
    .settings-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 250;
      animation: fadeIn 0.3s ease-out;
    }

    .settings-modal {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      padding: 24px 20px 40px;
      z-index: 251;
      animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      max-height: 85vh;
      overflow-y: auto;
    }

    .settings-handle {
      width: 40px;
      height: 4px;
      background: var(--border);
      border-radius: 100px;
      margin: 0 auto 20px;
    }

    .settings-modal h3 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 24px;
      text-align: center;
      color: var(--text-primary);
    }

    .settings-section {
      margin-bottom: 24px;
    }

    .settings-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .settings-input {
      width: 100%;
      padding: 14px 16px;
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 16px;
      font-family: inherit;
      background: var(--bg-primary);
      color: var(--text-primary);
      outline: none;
      transition: border-color 0.2s ease;
      -webkit-appearance: none;
    }

    .settings-input:focus {
      border-color: var(--accent);
    }

    .settings-input::placeholder {
      color: var(--text-muted);
    }

    .settings-weather-preview {
      margin-top: 10px;
      padding: 12px 14px;
      background: var(--accent-soft);
      border-radius: var(--radius-sm);
      font-size: 14px;
      color: var(--text-secondary);
    }

    .settings-desc {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .settings-danger {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }

    .settings-reset-btn {
      width: 100%;
      padding: 14px;
      background: #fef2f2;
      color: #dc2626;
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: background 0.2s ease;
    }

    .settings-reset-btn:hover {
      background: #fee2e2;
    }

    .settings-version {
      text-align: center;
      padding: 20px 0 8px;
      color: var(--text-tertiary);
      font-size: 12px;
      font-weight: 500;
    }

    .settings-lang-options {
      display: flex;
      gap: 8px;
    }

    .settings-lang-btn {
      flex: 1;
      padding: 12px 8px;
      background: var(--bg-primary);
      border: 2px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 13px;
      font-family: inherit;
      cursor: pointer;
      transition: all 0.2s ease;
      color: var(--text-primary);
    }

    .settings-lang-btn:hover {
      border-color: var(--accent);
    }

    .settings-lang-btn.active {
      background: var(--accent-soft);
      border-color: var(--accent);
      font-weight: 600;
    }

    .settings-save-btn {
      width: 100%;
      padding: 16px;
      background: var(--accent);
      color: var(--bg-card);
      border: none;
      border-radius: var(--radius-md);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      margin-top: 24px;
      margin-bottom: 8px;
      transition: opacity 0.2s ease, transform 0.2s ease;
    }

    .settings-save-btn:hover {
      opacity: 0.9;
    }

    .settings-save-btn:active {
      transform: scale(0.98);
    }

    .theme-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 250;
      animation: fadeIn 0.3s ease-out;
    }

    .theme-modal {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      padding: 24px 20px 40px;
      z-index: 251;
      animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    }

    .theme-modal-handle {
      width: 40px;
      height: 4px;
      background: var(--border);
      border-radius: 100px;
      margin: 0 auto 20px;
    }

    .theme-modal h3 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: 8px;
      text-align: center;
    }

    .theme-modal-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
      text-align: center;
      margin-bottom: 24px;
    }

    .theme-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 12px;
    }

    .theme-option {
      aspect-ratio: 1;
      border-radius: var(--radius-md);
      border: 3px solid transparent;
      cursor: pointer;
      transition: transform 0.2s ease, border-color 0.2s ease;
      position: relative;
      overflow: hidden;
      -webkit-transform: translateZ(0);
    }

    .theme-option:hover {
      transform: scale(1.05);
    }

    .theme-option.active {
      border-color: var(--accent);
    }

    .theme-option.active::after {
      content: '✓';
      position: absolute;
      bottom: 4px;
      right: 4px;
      width: 20px;
      height: 20px;
      background: var(--accent);
      color: var(--bg-card);
      border-radius: 50%;
      font-size: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .theme-option-standard { background: linear-gradient(135deg, #f8f9fa 0%, #e5e7eb 100%); }
    .theme-option-rose { background: linear-gradient(135deg, #fff1f2 0%, #fecdd3 100%); }
    .theme-option-sky { background: linear-gradient(135deg, #f0f9ff 0%, #bae6fd 100%); }
    .theme-option-mint { background: linear-gradient(135deg, #f0fdf4 0%, #bbf7d0 100%); }
    .theme-option-lavender { background: linear-gradient(135deg, #faf5ff 0%, #e9d5ff 100%); }
    .theme-option-peach { background: linear-gradient(135deg, #fff7ed 0%, #fed7aa 100%); }
    .theme-option-lemon { background: linear-gradient(135deg, #fefce8 0%, #fef08a 100%); }
    .theme-option-dark { background: linear-gradient(135deg, #1a1a1a 0%, #3f3f46 100%); }

    .theme-label {
      font-size: 12px;
      color: var(--text-secondary);
      text-align: center;
      margin-top: 6px;
      font-weight: 500;
    }

    /* ==================== WARDROBE STYLES ==================== */
    
    /* Wardrobe Section on Home */
    .wardrobe-section {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: 16px;
      margin-bottom: 20px;
      box-shadow: var(--shadow-sm);
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: space-between;
      animation: fadeInUp 0.5s ease-out 0.2s backwards;
    }

    .wardrobe-section:active {
      transform: scale(0.98);
    }

    .wardrobe-section-left {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .wardrobe-section-icon {
      font-size: 24px;
    }

    .wardrobe-section-info h3 {
      font-size: 16px;
      font-weight: 600;
      margin: 0 0 2px 0;
    }

    .wardrobe-section-info p {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    .wardrobe-section-arrow {
      font-size: 18px;
      color: var(--text-tertiary);
    }

    /* Wardrobe Full View */
    .wardrobe-view {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--bg-primary);
      z-index: 100;
      animation: slideInRight 0.3s ease-out;
      display: flex;
      flex-direction: column;
    }

    .view-handle {
      width: 40px;
      height: 4px;
      background: var(--text-tertiary);
      border-radius: 2px;
      margin: 12px auto 0;
      opacity: 0.5;
    }

    @keyframes slideInRight {
      from { transform: translateX(100%); }
      to { transform: translateX(0); }
    }

    .wardrobe-header {
      padding: 60px 20px 16px;
      background: var(--bg-card);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 16px;
    }

    @supports (padding-top: env(safe-area-inset-top)) {
      .wardrobe-header {
        padding-top: calc(20px + env(safe-area-inset-top, 40px));
      }
    }

    .wardrobe-back {
      width: 40px;
      height: 40px;
      background: var(--accent-soft);
      border: none;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .wardrobe-header-info {
      flex: 1;
    }

    .wardrobe-header h2 {
      font-size: 20px;
      font-weight: 700;
      margin: 0 0 2px 0;
    }

    .wardrobe-header p {
      font-size: 13px;
      color: var(--text-secondary);
      margin: 0;
    }

    .wardrobe-add-btn {
      padding: 10px 16px;
      background: var(--accent);
      color: var(--bg-card);
      border: none;
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
    }

    .wardrobe-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .wardrobe-empty {
      text-align: center;
      padding: 60px 20px;
    }

    .wardrobe-empty-icon {
      font-size: 64px;
      margin-bottom: 16px;
    }

    .wardrobe-empty h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 0 0 8px 0;
    }

    .wardrobe-empty p {
      color: var(--text-secondary);
      font-size: 14px;
      margin: 0 0 24px 0;
    }

    .wardrobe-category {
      margin-bottom: 24px;
    }

    .wardrobe-category-header {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .wardrobe-category-count {
      background: var(--accent-soft);
      padding: 2px 8px;
      border-radius: 10px;
      font-size: 12px;
    }

    .wardrobe-items {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .wardrobe-item {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 10px 14px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
    }

    .wardrobe-item:active {
      transform: scale(0.98);
    }

    .wardrobe-item.selected {
      background: var(--accent);
      color: var(--bg-card);
      border-color: var(--accent);
    }

    .wardrobe-item-color {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 1px solid rgba(0,0,0,0.1);
    }

    /* Edit mode delete button */
    .wardrobe-item-delete {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 22px;
      height: 22px;
      background: #ef4444;
      color: white;
      border: 2px solid var(--bg-card);
      border-radius: 50%;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      animation: popIn 0.2s ease-out;
    }

    @keyframes popIn {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }

    .wardrobe-edit-toggle {
      padding: 8px 14px;
      background: var(--accent-soft);
      border: none;
      border-radius: var(--radius-md);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      font-family: inherit;
      color: var(--text-primary);
    }

    .wardrobe-edit-toggle.active {
      background: #fee2e2;
      color: #dc2626;
    }

    .wardrobe-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 20px));
    }

    /* Add Method Modal */
    .add-method-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 300;
      animation: fadeIn 0.2s ease-out;
    }

    .add-method-modal {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 20px));
      z-index: 301;
      animation: slideUp 0.3s ease-out;
      max-height: 85vh;
      overflow-y: auto;
      touch-action: pan-y;
    }

    .add-method-handle {
      width: 40px;
      height: 4px;
      background: var(--border);
      border-radius: 100px;
      margin: 0 auto 16px;
    }

    .add-method-modal h3 {
      font-size: 20px;
      font-weight: 700;
      text-align: center;
      margin: 0 0 20px 0;
    }

    .add-method-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
    }

    .add-method-btn {
      background: var(--bg-primary);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      font-family: inherit;
    }

    .add-method-btn:active {
      transform: scale(0.97);
    }

    .add-method-btn:hover {
      border-color: var(--accent);
    }

    .add-method-btn.featured {
      grid-column: span 2;
      background: linear-gradient(135deg, var(--accent) 0%, #444 100%);
      border-color: transparent;
      color: var(--bg-card);
    }

    .add-method-btn.featured .add-method-icon {
      background: rgba(255,255,255,0.2);
    }

    .add-method-btn.disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .add-method-icon {
      font-size: 28px;
      margin-bottom: 8px;
      display: block;
    }

    .add-method-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .add-method-desc {
      font-size: 12px;
      color: var(--text-secondary);
    }

    .add-method-btn.featured .add-method-desc {
      color: rgba(255,255,255,0.8);
    }

    /* Kickstart Flow */
    .kickstart-view {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 400;
      display: flex;
      flex-direction: column;
      animation: fadeIn 0.3s ease-out;
    }

    .kickstart-header {
      padding: 60px 20px 20px;
      text-align: center;
    }

    @supports (padding-top: env(safe-area-inset-top)) {
      .kickstart-header {
        padding-top: calc(20px + env(safe-area-inset-top, 40px));
      }
    }

    .kickstart-header h2 {
      font-size: 24px;
      font-weight: 700;
      margin: 0 0 8px 0;
    }

    .kickstart-header p {
      color: var(--text-secondary);
      font-size: 14px;
      margin: 0;
    }

    .kickstart-progress {
      padding: 0 20px;
      margin-bottom: 20px;
    }

    .kickstart-progress-bar {
      height: 4px;
      background: var(--border);
      border-radius: 2px;
      overflow: hidden;
    }

    .kickstart-progress-fill {
      height: 100%;
      background: var(--accent);
      transition: width 0.3s ease;
    }

    .kickstart-progress-text {
      font-size: 12px;
      color: var(--text-tertiary);
      text-align: center;
      margin-top: 8px;
    }

    .kickstart-content {
      flex: 1;
      padding: 0 20px;
      overflow-y: auto;
    }

    .kickstart-question {
      font-size: 18px;
      font-weight: 600;
      text-align: center;
      margin-bottom: 24px;
    }

    .kickstart-options {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    .kickstart-option {
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: center;
      font-family: inherit;
    }

    .kickstart-option:active {
      transform: scale(0.97);
    }

    .kickstart-option.selected {
      border-color: var(--accent);
      background: var(--accent-soft);
    }

    .kickstart-option-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }

    .kickstart-option-label {
      font-size: 14px;
      font-weight: 600;
    }

    /* Color options */
    .kickstart-colors {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }

    .kickstart-color {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      border: 3px solid transparent;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }

    .kickstart-color.selected {
      border-color: var(--accent);
      transform: scale(1.1);
    }

    .kickstart-color.selected::after {
      content: '✓';
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
      text-shadow: 0 1px 2px rgba(0,0,0,0.5);
    }

    .kickstart-color-label {
      font-size: 11px;
      text-align: center;
      margin-top: 4px;
      color: var(--text-secondary);
    }

    /* Brand selection */
    .kickstart-brands {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .kickstart-brand {
      padding: 10px 16px;
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: 20px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
    }

    .kickstart-brand.selected {
      background: var(--accent);
      color: var(--bg-card);
      border-color: var(--accent);
    }

    /* Size selection */
    .kickstart-sizes {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .kickstart-size {
      background: var(--bg-card);
      border: 2px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 16px;
      cursor: pointer;
      transition: all 0.2s ease;
      text-align: left;
      font-family: inherit;
    }

    .kickstart-size.selected {
      border-color: var(--accent);
      background: var(--accent-soft);
    }

    .kickstart-size-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 4px;
    }

    .kickstart-size-icon {
      font-size: 24px;
    }

    .kickstart-size-title {
      font-size: 16px;
      font-weight: 600;
    }

    .kickstart-size-count {
      font-size: 13px;
      color: var(--text-secondary);
      margin-left: auto;
    }

    .kickstart-size-desc {
      font-size: 13px;
      color: var(--text-secondary);
      margin-left: 36px;
    }

    .kickstart-footer {
      padding: 20px;
      display: flex;
      gap: 12px;
    }

    .kickstart-btn {
      flex: 1;
      padding: 16px;
      border-radius: var(--radius-md);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      border: none;
      transition: all 0.2s ease;
    }

    .kickstart-btn-back {
      background: var(--accent-soft);
      color: var(--text-primary);
    }

    .kickstart-btn-next {
      background: var(--accent);
      color: var(--bg-card);
    }

    .kickstart-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    /* Generated Result */
    .kickstart-result {
      padding: 20px;
    }

    .kickstart-result-header {
      text-align: center;
      margin-bottom: 24px;
    }

    .kickstart-result-icon {
      font-size: 48px;
      margin-bottom: 12px;
    }

    .kickstart-result-header h3 {
      font-size: 22px;
      font-weight: 700;
      margin: 0 0 8px 0;
    }

    .kickstart-result-header p {
      font-size: 14px;
      color: var(--text-secondary);
      margin: 0;
    }

    .kickstart-result-items {
      max-height: 50vh;
      overflow-y: auto;
    }

    /* Voice Modal */
    .voice-view {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 400;
      display: flex;
      flex-direction: column;
      animation: fadeIn 0.3s ease-out;
    }

    .voice-header {
      padding: 60px 20px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    @supports (padding-top: env(safe-area-inset-top)) {
      .voice-header {
        padding-top: calc(20px + env(safe-area-inset-top, 40px));
      }
    }

    .voice-header h2 {
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }

    .voice-content {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      text-align: center;
    }

    .voice-hint {
      font-size: 14px;
      color: var(--text-secondary);
      max-width: 280px;
      margin-bottom: 40px;
    }

    .voice-btn {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: var(--accent);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
      color: var(--bg-card);
      transition: all 0.2s ease;
      box-shadow: 0 8px 32px rgba(0,0,0,0.2);
    }

    .voice-btn:active {
      transform: scale(0.95);
    }

    .voice-btn.listening {
      animation: pulse 1.5s infinite;
      background: #ef4444;
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.4); }
      50% { box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); }
    }

    .voice-status {
      margin-top: 24px;
      font-size: 16px;
      font-weight: 500;
    }

    .voice-transcript {
      margin-top: 20px;
      padding: 16px;
      background: var(--bg-card);
      border-radius: var(--radius-md);
      max-width: 100%;
      font-size: 14px;
      color: var(--text-secondary);
      font-style: italic;
    }

    .voice-results {
      width: 100%;
      max-width: 400px;
      margin-top: 24px;
    }

    .voice-results h3 {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .voice-result-item {
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 12px;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .voice-result-item span {
      font-size: 14px;
    }

    .voice-result-remove {
      width: 28px;
      height: 28px;
      background: #fee2e2;
      border: none;
      border-radius: 50%;
      color: #dc2626;
      cursor: pointer;
      font-size: 16px;
    }

    .voice-footer {
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 20px));
      display: flex;
      gap: 12px;
    }

    /* Brands Modal */
    .brands-view {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 400;
      display: flex;
      flex-direction: column;
      animation: fadeIn 0.3s ease-out;
    }

    .brands-header {
      padding: 60px 20px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    @supports (padding-top: env(safe-area-inset-top)) {
      .brands-header {
        padding-top: calc(20px + env(safe-area-inset-top, 40px));
      }
    }

    .brands-header h2 {
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }

    .brands-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .brands-subtitle {
      text-align: center;
      color: var(--text-secondary);
      font-size: 14px;
      margin-bottom: 20px;
    }

    .brands-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      justify-content: center;
    }

    .brands-footer {
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 20px));
    }

    /* Brand Items Selection */
    .brand-items-header {
      text-align: center;
      margin-bottom: 20px;
    }

    .brand-items-header h3 {
      font-size: 18px;
      font-weight: 600;
      margin: 0;
    }

    .brand-items-category {
      margin-bottom: 20px;
    }

    .brand-items-category-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      margin-bottom: 10px;
    }

    .brand-items-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .brand-item-btn {
      padding: 10px 16px;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 14px;
      cursor: pointer;
      font-family: inherit;
      transition: all 0.2s ease;
    }

    .brand-item-btn:active {
      transform: scale(0.95);
    }

    .brand-item-btn.added {
      background: var(--accent);
      color: var(--bg-card);
      border-color: var(--accent);
    }

    /* Manual Form */
    .manual-view {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 400;
      display: flex;
      flex-direction: column;
      animation: fadeIn 0.3s ease-out;
    }

    .manual-header {
      padding: 60px 20px 20px;
      display: flex;
      align-items: center;
      gap: 16px;
    }

    @supports (padding-top: env(safe-area-inset-top)) {
      .manual-header {
        padding-top: calc(20px + env(safe-area-inset-top, 40px));
      }
    }

    .manual-header h2 {
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }

    .manual-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }

    .manual-form {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .manual-footer {
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 20px));
    }

    /* Coming Soon Modal */
    .coming-soon-content {
      text-align: center;
      padding: 40px 20px;
    }

    .coming-soon-icon {
      font-size: 64px;
      margin-bottom: 20px;
    }

    .coming-soon-content h3 {
      font-size: 20px;
      font-weight: 700;
      margin: 0 0 12px 0;
    }

    .coming-soon-content p {
      color: var(--text-secondary);
      font-size: 14px;
      line-height: 1.6;
      margin: 0;
    }

    /* Stats Bar */
    .stats-bar {
      display: flex;
      gap: 12px;
      margin: 24px 0;
      animation: fadeInUp 0.6s ease-out 0.1s backwards;
    }

    .stat-item {
      flex: 1;
      background: var(--bg-card);
      border-radius: var(--radius-md);
      padding: 16px;
      text-align: center;
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      -webkit-transform: translateZ(0);
    }

    .stat-item:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .stat-number {
      font-size: 28px;
      font-weight: 700;
      color: var(--text-primary);
      line-height: 1;
    }

    .stat-label {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 6px;
    }

    /* Filter Pills */
    .filter-section {
      margin: 28px 0 24px;
      animation: fadeInUp 0.6s ease-out 0.2s backwards;
    }

    .filter-label {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 12px;
    }

    .filter-pills {
      display: flex;
      gap: 8px;
      overflow-x: auto;
      padding-bottom: 8px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .filter-pills::-webkit-scrollbar { display: none; }

    .filter-pill {
      flex-shrink: 0;
      padding: 10px 18px;
      border-radius: 100px;
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: background 0.25s ease, color 0.25s ease, border-color 0.25s ease, box-shadow 0.25s ease;
      border: 1px solid var(--border);
      background: var(--bg-card);
      color: var(--text-secondary);
      font-family: inherit;
      -webkit-transform: translateZ(0);
    }

    .filter-pill:hover {
      border-color: var(--accent);
      color: var(--text-primary);
    }

    .filter-pill.active {
      background: var(--accent);
      color: var(--bg-card);
      border-color: var(--accent);
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
    }

    /* Grid */
    .grid-section {
      animation: fadeInUp 0.6s ease-out 0.3s backwards;
    }

    .grid-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .grid-title {
      font-size: 13px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.8px;
    }

    .grid-count {
      font-size: 13px;
      color: var(--text-tertiary);
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    /* Cards */
    .card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      overflow: hidden;
      cursor: pointer;
      transition: transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                  box-shadow 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border);
      opacity: 0;
      animation: fadeInUp 0.5s ease-out forwards;
      will-change: transform;
    }

    .card:nth-child(1) { animation-delay: 0.1s; }
    .card:nth-child(2) { animation-delay: 0.15s; }
    .card:nth-child(3) { animation-delay: 0.2s; }
    .card:nth-child(4) { animation-delay: 0.25s; }
    .card:nth-child(5) { animation-delay: 0.3s; }
    .card:nth-child(6) { animation-delay: 0.35s; }

    .card:active {
      transform: scale(0.97);
    }

    @media (hover: hover) {
      .card:hover {
        transform: translateY(-6px);
        box-shadow: var(--shadow-lg);
      }

      .card:hover .card-image {
        transform: scale(1.05);
      }
    }

    .card-image-wrapper {
      position: relative;
      overflow: hidden;
      aspect-ratio: 4/5;
    }

    .card-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform 0.5s ease;
    }

    .card-placeholder {
      width: 100%;
      height: 100%;
      background: var(--accent-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 48px;
    }

    .card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 60px 16px 16px;
      background: linear-gradient(to top, rgba(0,0,0,0.7) 0%, transparent 100%);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .card:hover .card-overlay {
      opacity: 1;
    }

    .card-overlay-text {
      color: white;
      font-size: 12px;
      font-weight: 500;
    }

    .card-content {
      padding: 14px 16px 16px;
    }

    .card-title {
      font-weight: 600;
      font-size: 15px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      color: var(--text-primary);
    }

    .card-meta {
      display: flex;
      align-items: center;
      gap: 6px;
      margin-top: 6px;
    }

    .card-occasion {
      font-size: 12px;
      color: var(--text-tertiary);
      font-weight: 500;
    }

    .card-dot {
      width: 3px;
      height: 3px;
      border-radius: 50%;
      background: var(--text-tertiary);
    }

    .card-items {
      font-size: 12px;
      color: var(--text-tertiary);
    }

    /* Favorite Button on Card */
    .card-favorite {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      z-index: 10;
      transition: all 0.2s ease;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .card-favorite:active {
      transform: scale(0.9);
    }

    .card-favorite.active {
      background: #fee2e2;
      color: #ef4444;
    }

    /* Last Worn Badge */
    .card-last-worn {
      position: absolute;
      top: 10px;
      left: 10px;
      padding: 4px 10px;
      border-radius: 20px;
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      font-size: 11px;
      font-weight: 600;
      color: var(--text-secondary);
      z-index: 10;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .card-last-worn.recent {
      background: rgba(34, 197, 94, 0.9);
      color: white;
    }

    /* Delete Confirmation Modal */
    .confirm-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 200;
      animation: fadeIn 0.2s ease;
      padding: 20px;
    }

    .confirm-modal {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 28px;
      width: 100%;
      max-width: 320px;
      text-align: center;
      animation: scaleIn 0.25s ease;
      box-shadow: var(--shadow-lg);
    }

    .confirm-icon {
      width: 56px;
      height: 56px;
      border-radius: 50%;
      background: #fef2f2;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
      margin: 0 auto 16px;
    }

    .confirm-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .confirm-text {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: 24px;
    }

    .confirm-buttons {
      display: flex;
      gap: 12px;
    }

    .confirm-btn {
      flex: 1;
      padding: 14px;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
    }

    .confirm-btn-cancel {
      background: var(--bg-secondary);
      color: var(--text-primary);
    }

    .confirm-btn-delete {
      background: #ef4444;
      color: white;
    }

    .confirm-btn:active {
      transform: scale(0.97);
    }

    /* Generic overlay and dialog (for wardrobe delete) */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      z-index: 500;
      animation: fadeIn 0.2s ease;
    }

    .confirm-dialog {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      padding: 28px;
      width: calc(100% - 40px);
      max-width: 320px;
      text-align: center;
      z-index: 501;
      animation: scaleIn 0.25s ease;
      box-shadow: var(--shadow-lg);
    }

    .confirm-dialog h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin: 0 0 8px 0;
    }

    .confirm-dialog p {
      font-size: 14px;
      color: var(--text-secondary);
      margin: 0 0 24px 0;
    }

    .confirm-buttons {
      display: flex;
      gap: 12px;
    }

    .confirm-buttons .btn {
      flex: 1;
    }

    /* Wear Today Button */
    .wear-today-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      width: 100%;
      padding: 14px;
      background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);
      color: white;
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 12px;
    }

    .wear-today-btn:active {
      transform: scale(0.97);
    }

    .wear-today-btn.worn {
      background: linear-gradient(135deg, #a3e635 0%, #84cc16 100%);
    }

    /* Detail Favorite Button */
    .detail-favorite {
      position: absolute;
      top: calc(20px + env(safe-area-inset-top, 55px));
      right: 20px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: rgba(255,255,255,0.95);
      backdrop-filter: blur(10px);
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      z-index: 60;
      transition: all 0.2s ease;
      box-shadow: 0 2px 12px rgba(0,0,0,0.15);
    }

    @supports (top: env(safe-area-inset-top)) {
      .detail-favorite {
        top: calc(20px + env(safe-area-inset-top, 55px));
      }
    }

    .detail-favorite:active {
      transform: scale(0.9);
    }

    .detail-favorite.active {
      background: #fee2e2;
      color: #ef4444;
    }

    /* Last Worn Info in Detail */
    .detail-last-worn {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: var(--bg-secondary);
      border-radius: var(--radius-md);
      margin-bottom: 16px;
      font-size: 14px;
      color: var(--text-secondary);
    }

    .detail-last-worn-icon {
      font-size: 16px;
    }

    /* Empty State */
    .empty {
      text-align: center;
      padding: 60px 20px;
      animation: fadeIn 0.8s ease-out;
    }

    .empty-illustration {
      width: 180px;
      height: 180px;
      margin: 0 auto 32px;
      position: relative;
    }

    .empty-circle {
      position: absolute;
      border-radius: 50%;
      background: var(--accent-soft);
    }

    .empty-circle-1 {
      width: 180px;
      height: 180px;
      top: 0;
      left: 0;
      animation: pulse 4s ease-in-out infinite;
    }

    .empty-circle-2 {
      width: 120px;
      height: 120px;
      top: 30px;
      left: 30px;
      background: var(--border);
      animation: pulse 4s ease-in-out infinite 0.5s;
    }

    .empty-icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 48px;
      animation: float 3s ease-in-out infinite;
    }

    .empty-title {
      font-size: 22px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .empty-text {
      font-size: 15px;
      color: var(--text-secondary);
      max-width: 260px;
      margin: 0 auto;
      line-height: 1.5;
    }

    .empty-cta {
      margin-top: 32px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 14px 28px;
      background: var(--accent);
      color: var(--bg-card);
      border: none;
      border-radius: 100px;
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: inherit;
      box-shadow: 0 4px 16px rgba(0,0,0,0.2);
    }

    .empty-cta:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 24px rgba(0,0,0,0.25);
    }

    .empty-cta:active {
      transform: scale(0.97);
    }

    /* FAB */
    .fab {
      position: fixed;
      bottom: 32px;
      right: 20px;
      width: 60px;
      height: 60px;
      background: var(--accent);
      color: var(--bg-card);
      border: none;
      border-radius: 50%;
      font-size: 28px;
      font-weight: 300;
      box-shadow: 0 6px 24px rgba(0,0,0,0.25);
      cursor: pointer;
      transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94), 
                  box-shadow 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      z-index: 100;
      animation: fadeInUp 0.6s ease-out 0.5s backwards;
      will-change: transform;
      -webkit-transform: translateZ(0);
    }

    .fab:hover {
      transform: scale(1.08);
      box-shadow: 0 8px 32px rgba(0,0,0,0.3);
    }

    .fab:active {
      transform: scale(0.95);
    }

    /* Form */
    .form-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
      z-index: 200;
      animation: fadeIn 0.3s ease-out;
    }

    .form {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      padding: 12px 20px 40px;
      z-index: 201;
      max-height: 92vh;
      display: flex;
      flex-direction: column;
      animation: slideUp 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
      /* Prevent body scroll when form is open */
      overscroll-behavior: contain;
      touch-action: pan-y;
    }

    .form-header {
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      margin-bottom: 16px;
      padding-top: 8px;
      flex-shrink: 0;
    }

    .form-back {
      position: absolute;
      left: 0;
      width: 40px;
      height: 40px;
      background: var(--accent-soft);
      border: none;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .form-back:active {
      transform: scale(0.95);
      background: var(--border);
    }

    .form-header h2 {
      font-size: 20px;
      font-weight: 700;
      margin: 0;
    }

    .form-scroll-area {
      flex: 1;
      overflow-y: auto;
      overflow-x: hidden;
      -webkit-overflow-scrolling: touch;
      overscroll-behavior: contain;
      padding-bottom: 20px;
    }

    @keyframes slideUp {
      from { transform: translateY(100%); }
      to { transform: translateY(0); }
    }

    .form-handle {
      width: 40px;
      height: 4px;
      background: var(--border);
      border-radius: 100px;
      margin: 0 auto 12px;
      cursor: grab;
    }

    .form-handle:active {
      cursor: grabbing;
      background: var(--text-tertiary);
    }

    .form h2 {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 24px;
      text-align: center;
    }

    .form-fields {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .input-group {
      position: relative;
    }

    .input-label {
      position: absolute;
      left: 18px;
      top: -8px;
      font-size: 11px;
      font-weight: 600;
      color: var(--text-tertiary);
      background: var(--bg-card);
      padding: 0 6px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    input, select {
      width: 100%;
      background: var(--bg-card);
      border: 1.5px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px 18px;
      color: var(--text-primary);
      font-size: 16px;
      font-family: inherit;
      outline: none;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      /* iOS fixes */
      -webkit-appearance: none;
      border-radius: var(--radius-md);
    }

    input:focus, select:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-soft);
    }

    input::placeholder { 
      color: var(--text-tertiary);
      opacity: 1; /* Firefox fix */
    }
    select { 
      -webkit-appearance: none;
      appearance: none; 
      cursor: pointer;
    }

    .image-upload {
      background: var(--accent-soft);
      border: 2px dashed var(--border);
      border-radius: var(--radius-lg);
      padding: 40px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }

    .image-upload:hover {
      border-color: var(--text-tertiary);
      background: var(--accent-soft);
    }

    .image-upload.has-image {
      padding: 20px;
      border-style: solid;
      border-color: var(--border);
    }

    .image-preview-wrapper {
      position: relative;
      display: inline-block;
    }

    .image-remove-btn {
      position: absolute;
      top: -8px;
      right: -8px;
      width: 28px;
      height: 28px;
      background: #ff4757;
      color: white;
      border: 2px solid var(--bg-card);
      border-radius: 50%;
      font-size: 16px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      transition: transform 0.2s ease;
    }

    .image-remove-btn:hover {
      transform: scale(1.1);
    }

    .image-remove-btn:active {
      transform: scale(0.95);
    }

    .image-upload-icon { font-size: 40px; margin-bottom: 12px; }
    .image-upload-text { color: var(--text-secondary); font-size: 14px; font-weight: 500; }
    .image-preview { height: 140px; width: 140px; object-fit: cover; border-radius: var(--radius-md); display: block; }
    .hidden { display: none; }

    .btn-row { display: flex; gap: 12px; margin-top: 28px; }

    .btn {
      flex: 1;
      padding: 16px;
      border-radius: var(--radius-md);
      font-size: 16px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: transform 0.2s ease, opacity 0.2s ease, background 0.2s ease;
      font-family: inherit;
      will-change: transform;
    }

    .btn:active { transform: scale(0.97); }
    .btn-secondary { background: var(--accent-soft); color: var(--text-primary); }
    .btn-secondary:hover { background: var(--border); }
    .btn-primary { background: var(--accent); color: var(--bg-card); }
    .btn-primary:hover { opacity: 0.9; }
    .btn-primary:disabled { opacity: 0.4; cursor: not-allowed; }
    .btn-danger { background: #ef4444; color: white; }
    .btn-danger:hover { background: #dc2626; }

    /* Detail View */
    .detail {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--bg-primary);
      animation: fadeIn 0.4s ease-out;
      z-index: 50;
      display: flex;
      flex-direction: column;
    }

    .detail-back-wrapper {
      position: absolute;
      top: 75px;
      left: 16px;
      z-index: 100;
    }

    @supports (top: env(safe-area-inset-top)) {
      .detail-back-wrapper {
        top: calc(20px + env(safe-area-inset-top, 55px));
        left: calc(16px + env(safe-area-inset-left, 0px));
      }
    }

    .detail-back {
      width: 44px;
      height: 44px;
      background: rgba(255,255,255,0.95);
      -webkit-backdrop-filter: blur(10px);
      backdrop-filter: blur(10px);
      border: none;
      border-radius: 50%;
      font-size: 20px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 12px rgba(0,0,0,0.2);
    }

    .detail-back:active {
      background: var(--bg-card);
      transform: scale(0.95);
    }

    .detail-scroll {
      flex: 1;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }

    .detail-hero {
      position: relative;
      height: 50vh;
      min-height: 360px;
      overflow: hidden;
    }

    .detail-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .detail-no-image {
      width: 100%;
      height: 100%;
      background: var(--accent-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
    }

    .detail-hero-overlay {
      position: absolute;
      inset: 0;
      background: linear-gradient(to top, rgba(0,0,0,0.6) 0%, transparent 50%);
    }

    .detail-hero-content {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 24px 20px;
      color: white;
    }

    .detail-title {
      font-size: 32px;
      font-weight: 700;
      letter-spacing: -0.5px;
      margin-bottom: 8px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .detail-tag {
      display: inline-block;
      font-size: 13px;
      background: rgba(255,255,255,0.2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 8px 16px;
      border-radius: 100px;
      font-weight: 500;
    }

    .detail-content {
      padding: 24px 20px;
      margin-top: -20px;
      background: var(--bg-primary);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      position: relative;
    }

    .detail-section-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.8px;
      margin-bottom: 16px;
    }

    .detail-items {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .detail-item {
      display: flex;
      align-items: center;
      gap: 16px;
      background: var(--bg-card);
      padding: 18px 20px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-sm);
      border: 1px solid var(--border);
      animation: slideIn 0.4s ease-out backwards;
    }

    .detail-item:nth-child(1) { animation-delay: 0.1s; }
    .detail-item:nth-child(2) { animation-delay: 0.15s; }
    .detail-item:nth-child(3) { animation-delay: 0.2s; }
    .detail-item:nth-child(4) { animation-delay: 0.25s; }
    .detail-item:nth-child(5) { animation-delay: 0.3s; }

    .detail-item-icon {
      width: 48px;
      height: 48px;
      background: var(--accent-soft);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .detail-item-label {
      font-size: 11px;
      color: var(--text-tertiary);
      margin-bottom: 2px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      font-weight: 600;
    }

    .detail-item-value {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .detail-actions {
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
    }

    .delete-btn {
      width: 100%;
      padding: 16px;
      background: #fef2f2;
      color: #dc2626;
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
    }

    .delete-btn:hover {
      background: #fee2e2;
    }

    .edit-btn {
      width: 100%;
      padding: 16px;
      background: var(--accent);
      color: var(--bg-card);
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      margin-bottom: 12px;
    }

    .edit-btn:hover {
      opacity: 0.9;
    }

    /* Pinterest Inspiration Button */
    .inspiration-btn {
      width: 100%;
      padding: 16px 20px;
      background: linear-gradient(135deg, #E60023 0%, #BD081C 100%);
      color: #fff;
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      margin-top: 20px;
      margin-bottom: 8px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      box-shadow: 0 4px 14px rgba(230, 0, 35, 0.25);
      -webkit-transform: translateZ(0);
      text-decoration: none;
    }

    .inspiration-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(230, 0, 35, 0.35);
    }

    .inspiration-btn:active {
      transform: scale(0.98);
    }

    .inspiration-btn svg {
      width: 20px;
      height: 20px;
      fill: currentColor;
    }

    /* Random Picker */
    .picker-section {
      margin: 24px 0;
      animation: fadeInUp 0.6s ease-out 0.15s backwards;
    }

    .picker-card {
      background: var(--picker-bg);
      border-radius: var(--radius-lg);
      padding: 24px;
      color: var(--picker-text);
      position: relative;
      overflow: hidden;
    }

    .picker-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 60%);
      animation: shimmerBg 3s ease-in-out infinite;
    }

    @keyframes shimmerBg {
      0%, 100% { transform: translate(-30%, -30%); }
      50% { transform: translate(0%, 0%); }
    }

    .picker-content {
      position: relative;
      z-index: 1;
    }

    .picker-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .picker-label {
      font-size: 13px;
      font-weight: 500;
      opacity: 0.7;
    }

    .picker-icon {
      font-size: 24px;
      animation: float 2s ease-in-out infinite;
    }

    .picker-btn {
      width: 100%;
      min-height: 56px;
      padding: 16px 24px;
      background: var(--bg-card);
      color: var(--text-primary);
      border: none;
      border-radius: var(--radius-md);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      font-family: inherit;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      will-change: transform;
      -webkit-transform: translateZ(0);
    }

    .picker-btn-text {
      min-width: 110px;
      text-align: center;
      -webkit-transform: translateZ(0);
    }

    .picker-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.3);
    }

    .picker-btn:active {
      transform: scale(0.97);
    }

    .picker-btn.spinning {
      pointer-events: none;
    }

    .picker-btn-icon {
      font-size: 20px;
      transition: transform 0.3s ease;
    }

    .picker-btn:hover .picker-btn-icon {
      transform: rotate(20deg);
    }

    .picker-btn.spinning .picker-btn-icon {
      animation: spin 0.5s linear infinite;
    }

    @keyframes spin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    /* Random Result Modal */
    .result-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      z-index: 300;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 20px;
      animation: fadeIn 0.3s ease-out;
    }

    .result-modal {
      background: var(--bg-card);
      border-radius: var(--radius-xl);
      width: 100%;
      max-width: 360px;
      overflow: hidden;
      animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    @keyframes popIn {
      0% { opacity: 0; transform: scale(0.8); }
      100% { opacity: 1; transform: scale(1); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      75% { transform: translateX(5px); }
    }

    .result-spinning .result-image-wrapper {
      animation: shake 0.15s ease-in-out infinite;
    }

    .result-header {
      background: var(--picker-bg);
      color: var(--picker-text);
      padding: 20px;
      text-align: center;
    }

    .result-badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.2);
      padding: 8px 16px;
      border-radius: 100px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
    }

    .result-title {
      font-size: 24px;
      font-weight: 700;
    }

    .result-image-wrapper {
      position: relative;
      aspect-ratio: 1;
      overflow: hidden;
    }

    .result-image {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .result-placeholder {
      width: 100%;
      height: 100%;
      min-height: 280px;
      background: var(--accent-soft);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 80px;
    }

    .result-confetti {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 40px;
      animation: confettiFall 1s ease-out forwards;
    }

    @keyframes confettiFall {
      0% { opacity: 1; transform: translateX(-50%) translateY(-20px) scale(1.5); }
      100% { opacity: 0; transform: translateX(-50%) translateY(40px) scale(0.5); }
    }

    .result-info {
      padding: 20px;
      text-align: center;
    }

    .result-outfit-name {
      font-size: 22px;
      font-weight: 700;
      margin-bottom: 6px;
      color: var(--text-primary);
    }

    .result-outfit-occasion {
      font-size: 14px;
      color: var(--text-tertiary);
      font-weight: 500;
    }

    .result-actions {
      padding: 0 20px 24px;
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .result-btn-primary {
      width: 100%;
      padding: 16px;
      background: var(--accent);
      color: var(--bg-card);
      border: none;
      border-radius: var(--radius-md);
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.1s ease, opacity 0.1s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .result-btn-primary:hover {
      opacity: 0.9;
    }

    .result-btn-primary:active {
      transform: scale(0.97);
      opacity: 0.85;
    }

    .result-btn-secondary {
      width: 100%;
      padding: 14px;
      background: var(--accent-soft);
      color: var(--text-primary);
      border: none;
      border-radius: var(--radius-md);
      font-size: 15px;
      font-weight: 600;
      cursor: pointer;
      font-family: inherit;
      transition: transform 0.1s ease, background 0.1s ease;
      -webkit-tap-highlight-color: transparent;
    }

    .result-btn-secondary:hover {
      background: var(--border);
    }

    .result-btn-secondary:active {
      transform: scale(0.97);
      background: var(--border);
    }

    .result-btn-secondary:disabled {
      opacity: 0.6;
      transform: none;
      cursor: not-allowed;
    }

    .result-btn-primary:disabled {
      opacity: 0.6;
      transform: none;
      cursor: not-allowed;
    }

    /* Autocomplete Styles */
    .autocomplete-wrapper {
      position: relative;
      width: 100%;
    }

    .chip-input-container {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      padding: 12px 14px;
      background: var(--bg-card);
      border: 1.5px solid var(--border);
      border-radius: var(--radius-md);
      min-height: 54px;
      align-items: center;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      cursor: text;
    }

    .chip-input-container:focus-within {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-soft);
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      background: var(--accent-soft);
      border-radius: 100px;
      font-size: 14px;
      color: var(--text-primary);
      font-weight: 500;
      animation: chipIn 0.2s ease-out;
    }

    /* Quick-pick chips for outfit creation */
    .quick-picks {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      margin-top: 8px;
      margin-bottom: 4px;
    }

    .quick-pick {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 6px 12px;
      background: var(--bg-card);
      border: 1.5px solid var(--border);
      border-radius: 100px;
      font-size: 13px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.15s ease;
      white-space: nowrap;
    }

    .quick-pick:hover {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: var(--accent);
    }

    .quick-pick:active {
      transform: scale(0.95);
    }

    .quick-pick.selected {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .quick-pick-icon {
      font-size: 12px;
      flex-shrink: 0;
    }

    .quick-pick-more {
      background: var(--accent-soft);
      color: var(--accent);
      font-weight: 600;
      border-color: transparent;
    }

    .quick-pick-more:hover {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* Quick-pick popup */
    .quick-pick-popup-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.4);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      z-index: 400;
      animation: fadeIn 0.2s ease;
    }

    .quick-pick-popup {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-card);
      border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom, 20px));
      z-index: 401;
      animation: slideUp 0.3s ease;
      max-height: 60vh;
      overflow-y: auto;
    }

    .quick-pick-popup-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .quick-pick-popup-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .quick-pick-popup-close {
      width: 32px;
      height: 32px;
      background: var(--bg-secondary);
      border: none;
      border-radius: 50%;
      font-size: 18px;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-secondary);
    }

    .quick-pick-popup-grid {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }

    .quick-pick-popup-item {
      padding: 10px 16px;
      background: var(--bg-card);
      border: 1.5px solid var(--border);
      border-radius: var(--radius-md);
      font-size: 14px;
      color: var(--text-primary);
      cursor: pointer;
      transition: all 0.15s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .quick-pick-popup-item:hover {
      background: var(--accent-soft);
      border-color: var(--accent);
      color: var(--accent);
    }

    .quick-pick-popup-item:active {
      transform: scale(0.97);
    }

    .quick-pick-popup-item.selected {
      background: var(--accent);
      border-color: var(--accent);
      color: white;
    }

    .field-group {
      margin-bottom: 4px;
    }

    .field-input-wrapper {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 6px;
      padding: 12px 16px;
      background: var(--bg-card);
      border: 1.5px solid var(--border);
      border-radius: var(--radius-md);
      min-height: 52px;
      cursor: text;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
    }

    .field-input-wrapper:focus-within {
      border-color: var(--accent);
      box-shadow: 0 0 0 3px var(--accent-soft);
    }

    .field-input-wrapper .selected-chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 10px;
      background: var(--accent);
      color: white;
      border-radius: 100px;
      font-size: 13px;
      font-weight: 500;
      animation: chipIn 0.2s ease-out;
      white-space: nowrap;
    }

    .field-input-wrapper .selected-chip-remove {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 16px;
      height: 16px;
      background: rgba(255,255,255,0.25);
      border: none;
      border-radius: 50%;
      font-size: 12px;
      line-height: 1;
      cursor: pointer;
      padding: 0;
      color: inherit;
      margin-left: 2px;
    }

    .field-input-wrapper .selected-chip-remove:hover {
      background: rgba(255,255,255,0.4);
    }

    .field-input-wrapper .field-input {
      flex: 1;
      min-width: 100px;
      border: none;
      background: transparent;
      outline: none;
      font-size: 16px;
      color: var(--text-primary);
      padding: 4px 0;
    }

    .field-input-wrapper .field-input::placeholder {
      color: var(--text-tertiary);
    }

    .field-label {
      font-size: 11px;
      font-weight: 600;
      color: var(--text-tertiary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: 6px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .field-label-count {
      font-size: 10px;
      font-weight: 500;
      background: var(--accent-soft);
      color: var(--text-secondary);
      padding: 2px 6px;
      border-radius: 10px;
    }

    @keyframes chipIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    .chip-remove {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      background: var(--text-tertiary);
      color: var(--bg-card);
      border: none;
      border-radius: 50%;
      font-size: 14px;
      line-height: 1;
      cursor: pointer;
      padding: 0;
      transition: background 0.15s ease;
    }

    .chip-remove:hover {
      background: var(--text-secondary);
    }

    .chip-input {
      flex: 1;
      min-width: 100px;
      border: none;
      background: transparent;
      font-size: 16px;
      color: var(--text-primary);
      outline: none;
      padding: 4px 0;
      font-family: inherit;
    }

    .chip-input::placeholder {
      color: var(--text-tertiary);
    }

    .autocomplete-list {
      position: absolute;
      top: calc(100% + 4px);
      left: 0;
      right: 0;
      background: var(--bg-card);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 4px;
      list-style: none;
      max-height: 220px;
      overflow-y: auto;
      z-index: 1000;
      box-shadow: 0 10px 40px rgba(0,0,0,0.15);
      -webkit-overflow-scrolling: touch;
    }

    .autocomplete-item {
      padding: 14px 16px;
      cursor: pointer;
      font-size: 15px;
      color: var(--text-primary);
      border-radius: var(--radius-sm);
      transition: background 0.1s ease;
      text-transform: capitalize;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .autocomplete-item::before {
      content: '→';
      font-size: 12px;
      color: var(--text-tertiary);
      opacity: 0;
      transition: opacity 0.1s ease;
    }

    .autocomplete-item:active,
    .autocomplete-item.highlighted {
      background: var(--accent-soft);
    }

    .autocomplete-item.highlighted::before,
    .autocomplete-item:active::before {
      opacity: 1;
    }

    @media (hover: hover) {
      .autocomplete-item:hover {
        background: var(--accent-soft);
      }
      .autocomplete-item:hover::before {
        opacity: 1;
      }
    }

    .autocomplete-item.user-item {
      background: linear-gradient(135deg, rgba(255,215,0,0.08) 0%, rgba(255,215,0,0.02) 100%);
      border-left: 3px solid #f59e0b;
    }

    .autocomplete-item.user-item::before {
      display: none;
    }

    .autocomplete-item.user-item.highlighted {
      background: linear-gradient(135deg, rgba(255,215,0,0.18) 0%, rgba(255,215,0,0.08) 100%);
    }

    .user-star {
      color: #f59e0b;
      font-size: 11px;
      flex-shrink: 0;
    }

    .autocomplete-text {
      flex: 1;
    }

    .user-item-remove {
      width: 22px;
      height: 22px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(239, 68, 68, 0.1);
      color: #ef4444;
      border: none;
      border-radius: 50%;
      font-size: 16px;
      cursor: pointer;
      padding: 0;
      margin-left: auto;
      opacity: 0.6;
      transition: opacity 0.15s ease, background 0.15s ease;
      flex-shrink: 0;
    }

    .user-item-remove:hover {
      opacity: 1;
      background: rgba(239, 68, 68, 0.2);
    }
  </style>
</head>
<body>
  <script>
    // Apply saved theme immediately to prevent flash
    const savedTheme = localStorage.getItem('theme') || 'standard';
    document.documentElement.setAttribute('data-theme', savedTheme);
  </script>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useMemo, useRef } = React;

    // ==========================================
    // MULTILINGUAL CLOTHING VOCABULARY DATABASE
    // ==========================================
    
    // Shared brands (same across all languages)
    const sharedBrands = [
      // Swedish brands
      'acne', 'acne studios', 'cos', 'arket', 'weekday', 'monki', 'h&m', 'hm',
      'filippa k', 'tiger of sweden', 'j lindeberg', 'our legacy', 'toteme', 'ganni',
      'hope', 'rodebjer', 'by malene birger', 'nudie', 'nudie jeans',
      // Fast fashion
      'zara', 'mango', 'massimo dutti', 'pull&bear', 'bershka', 'uniqlo', 'primark',
      'asos', 'na-kd', 'nelly', 'bikbok', 'gina tricot', 'lindex',
      // Sports & Streetwear
      'nike', 'adidas', 'puma', 'reebok', 'new balance', 'asics', 'converse', 'vans',
      'jordan', 'air jordan', 'yeezy', 'under armour', 'champion', 'fila',
      'the north face', 'patagonia', 'columbia', 'fjällräven',
      'carhartt', 'dickies', 'stussy', 'supreme', 'palace', 'bape', 'off-white',
      'stone island', 'moncler', 'canada goose',
      // Premium & Designer
      'ralph lauren', 'tommy hilfiger', 'calvin klein', 'hugo boss', 'gant', 'lacoste',
      'burberry', 'gucci', 'prada', 'louis vuitton', 'balenciaga', 'givenchy',
      'saint laurent', 'versace', 'fendi', 'dior', 'chanel', 'hermes', 'celine',
      // Jeans
      'levis', "levi's", 'lee', 'wrangler', 'diesel', 'replay', 'g-star',
      // Shoes
      'timberland', 'dr martens', 'clarks', 'ecco', 'vagabond', 'birkenstock',
      'ugg', 'blundstone', 'common projects', 'axel arigato', 'golden goose',
      // Watches
      'rolex', 'omega', 'tag heuer', 'cartier', 'daniel wellington', 'casio', 'apple watch'
    ];

    // Special product combos (mostly same across languages)
    const sharedCombos = [
      'nike air max', 'nike air force 1', 'nike dunk', 'air jordan 1',
      'adidas stan smith', 'adidas superstar', 'adidas samba', 'adidas gazelle',
      'new balance 550', 'new balance 990', 'new balance 574',
      'converse chuck taylor', 'vans old skool', 'vans sk8-hi',
      'timberland 6 inch', 'dr martens 1460', 'blundstone 500',
      'levis 501', 'levis 511', 'levis 512',
      'louis vuitton neverfull', 'gucci marmont', 'chanel classic flap',
      'rolex submariner', 'omega speedmaster', 'apple watch'
    ];

    const clothingByLang = {
      sv: {
        colors: [
          // === BASIC FÄRGER ===
          'vit', 'vita', 'kritvit', 'snövit', 'rent vit', 'äggskal', 'eggshell',
          'svart', 'svarta', 'kolsvart', 'becksvart', 'jet black', 'midnight',
          'grå', 'gråa', 'mörkgrå', 'ljusgrå', 'mellangrå', 'antracit', 'charcoal',
          'silvergrå', 'askgrå', 'grafitgrå', 'stålgrå', 'slate', 'gunmetal',
          
          // === BLÅ TONER ===
          'blå', 'blåa', 'mörkblå', 'ljusblå', 'mellanblå', 'klarblå',
          'marinblå', 'navy', 'navy blue', 'midnattsblå', 'midnight blue',
          'koboltblå', 'kobolt', 'royalblå', 'royal blue', 'safirblå',
          'himmelsblå', 'sky blue', 'babyblå', 'baby blue', 'puderblå',
          'isblå', 'ice blue', 'stålblå', 'steel blue', 'denimblå',
          'petrol', 'petroleum', 'teal', 'blågrön', 'turkos', 'turquoise',
          'aqua', 'cyan', 'elektrisk blå', 'electric blue', 'neonblå',
          'indigoblå', 'indigo', 'jeansblå', 'washed blue', 'tvättad blå',
          
          // === GRÖN TONER ===
          'grön', 'gröna', 'mörkgrön', 'ljusgrön', 'skogsgrön', 'forest green',
          'flaskgrön', 'bottle green', 'smaragdgrön', 'emerald', 'jade',
          'olivgrön', 'oliv', 'olive', 'army green', 'militärgrön',
          'khaki', 'kaki', 'mosgrön', 'moss', 'salviagrön', 'sage', 'sage green',
          'mintgrön', 'mint', 'mint green', 'pistasch', 'pistachio',
          'limegrön', 'lime', 'neongrön', 'neon green', 'gräsgrön',
          'tallgrön', 'pine', 'huntergrön', 'hunter green',
          'avokado', 'avocado', 'eucalyptus', 'seafoam',
          
          // === RÖD TONER ===
          'röd', 'röda', 'mörkröd', 'ljusröd', 'klarröd', 'knallröd',
          'vinröd', 'wine', 'wine red', 'burgundy', 'bordeaux',
          'oxblod', 'oxblood', 'maroon', 'körsbärsröd', 'cherry red',
          'tegelröd', 'brick red', 'rostbrun', 'rust', 'rost',
          'karminröd', 'crimson', 'scharlakansröd', 'scarlet',
          'koralröd', 'coral', 'korall', 'laxrosa', 'salmon',
          'brandröd', 'fire red', 'ferrari röd', 'racing red',
          
          // === ROSA TONER ===
          'rosa', 'ljusrosa', 'mörkrosa', 'hot pink', 'knallrosa',
          'babyros', 'baby pink', 'puderrosa', 'dusty pink', 'dusty rose',
          'gammalrosa', 'old rose', 'antikrosa', 'blush', 'blush pink',
          'fuchsia', 'magenta', 'cerise', 'hallonrosa', 'raspberry',
          'bubblegum', 'bubblegum pink', 'neonrosa', 'neon pink',
          'mauve', 'rose', 'rosé', 'millennial pink',
          
          // === LILA TONER ===
          'lila', 'ljuslila', 'mörklila', 'violett', 'violet',
          'lavendel', 'lavender', 'syren', 'lilac',
          'plommon', 'plum', 'aubergine', 'eggplant',
          'grape', 'druva', 'ametist', 'amethyst',
          'orchid', 'orkidé', 'purpur', 'purple', 'royal purple',
          'ultraviolett', 'ultra violet', 'iris',
          
          // === GUL TONER ===
          'gul', 'gula', 'mörkgul', 'ljusgul', 'klargul', 'solrosgul',
          'senapsgul', 'mustard', 'senap', 'curry', 'currygul',
          'citrongul', 'lemon', 'lemon yellow', 'pastel yellow',
          'guld', 'gold', 'golden', 'gyllene', 'champagne',
          'kanariefågel', 'canary yellow', 'bananagul', 'butter yellow',
          'neongul', 'neon yellow', 'highlighter yellow',
          
          // === ORANGE TONER ===
          'orange', 'orangea', 'mörkorange', 'ljusorange', 'bränd orange',
          'burnt orange', 'terracotta', 'terrakotta', 'aprikosfärgad', 'apricot',
          'persika', 'peach', 'melon', 'mango', 'tangerine',
          'korall orange', 'papaya', 'pumpkin', 'pumpa',
          'neonorange', 'neon orange', 'koppar', 'copper',
          
          // === BRUN TONER ===
          'brun', 'bruna', 'mörkbrun', 'ljusbrun', 'mellanbrun',
          'chokladbrun', 'chocolate', 'kakao', 'cocoa', 'espresso',
          'kaffebrun', 'coffee', 'mocka', 'mocha', 'kastanj', 'chestnut',
          'karamell', 'caramel', 'toffee', 'hasselnöt', 'hazelnut',
          'cognac', 'konjak', 'whiskey', 'bourbon', 'mahogny', 'mahogany',
          'valnöt', 'walnut', 'ek', 'oak', 'teakbrun', 'teak',
          'tobacco', 'tobak', 'sepia', 'taupe', 'greige',
          
          // === BEIGE & NEUTRALA ===
          'beige', 'sand', 'sandfärgad', 'nude', 'hudtoned', 'tan',
          'kamel', 'camel', 'karamell', 'butterscotch',
          'off-white', 'offwhite', 'ivory', 'elfenben', 'cream', 'creme', 'kräm',
          'ecru', 'oyster', 'oatmeal', 'havre', 'bone', 'alabaster',
          'vanilla', 'vanilj', 'latte', 'cappuccino',
          'stone', 'sten', 'mushroom', 'svamp', 'truffle',
          
          // === METALLIC ===
          'silver', 'silvrig', 'guld', 'guldig', 'gyllene',
          'rose gold', 'roséguld', 'bronze', 'brons', 'bronsig',
          'koppar', 'copper', 'pewter', 'tenn', 'platinum', 'platina',
          'metallic', 'metallisk', 'chrome', 'krom', 'holografisk', 'iridescent',
          
          // === MÖNSTER SOM FÄRG ===
          'randig', 'striped', 'stripes', 'ränder',
          'rutig', 'checked', 'checkered', 'plaid', 'tartan',
          'prickig', 'polka dot', 'dots', 'prickar',
          'blommig', 'floral', 'flowers', 'blommor',
          'leopard', 'leopardmönstrad', 'zebra', 'zebramönstrad',
          'kamouflage', 'camo', 'camoflage', 'army mönster',
          'paisley', 'etnisk', 'abstrakt', 'grafisk', 'geometric'
        ],
        materials: [
          // === LÄDER & SKINN ===
          'läder', 'skinn', 'leather', 'äkta läder', 'real leather', 'genuine leather',
          'nappaläder', 'nappa', 'kalvskinn', 'calf leather', 'lammskinn', 'lambskin',
          'fårskinn', 'sheepskin', 'shearling', 'nubuck', 'nubuckläder',
          'mocka', 'suede', 'mockaläder', 'sammetsmocka',
          'krokodilskinn', 'crocodile', 'ormskinn', 'snake', 'python',
          'konstläder', 'faux leather', 'vegan leather', 'pu-läder', 'syntetläder',
          'lack', 'patent leather', 'lackläder', 'vinyl', 'pvc',
          
          // === DENIM ===
          'denim', 'jeans', 'jeansmaterial', 'jeanstyg',
          'raw denim', 'rå denim', 'selvedge denim', 'selvage',
          'stretch denim', 'mjuk denim', 'rigid denim', 'styv denim',
          'chambray', 'chambraytyg', 'ljus denim', 'mörk denim',
          
          // === BOMULL ===
          'bomull', 'cotton', 'ekologisk bomull', 'organic cotton',
          'jersey', 'bomullsjersey', 'cotton jersey', 'single jersey',
          'fransk frotté', 'french terry', 'sweatshirt-tyg', 'loop back',
          'piké', 'pique', 'oxford', 'oxfordtyg', 'poplin', 'poplintyg',
          'twill', 'twillväv', 'gabardine', 'gabardin',
          'canvas', 'segelduk', 'duck canvas', 'heavy canvas',
          'muslin', 'musslin', 'voile', 'batist', 'lawn',
          'seersucker', 'gingham', 'chino', 'chinomaterial',
          
          // === LINNE ===
          'linne', 'linen', 'lin', 'rent linne', 'pure linen',
          'linneblandning', 'linen blend', 'ramie', 'hampa', 'hemp',
          'sommarlinen', 'tvättat linne', 'washed linen', 'stonewashed linne',
          
          // === ULL & KASHMIR ===
          'ull', 'ylle', 'wool', 'merinoull', 'merino', 'merino wool',
          'lamm ull', 'lambswool', 'shetland', 'shetlandsull',
          'kashmir', 'cashmere', 'pure cashmere', 'cashmere blend',
          'kamelhår', 'camel hair', 'alpaca', 'alpacka', 'mohair',
          'angora', 'angoraull', 'kammad ull', 'worsted wool',
          'tweed', 'harris tweed', 'donegal tweed', 'herringbone',
          'flanell', 'flannel', 'yllelanell', 'borstade ull',
          'melton', 'meltontyg', 'loden', 'boiled wool', 'kokt ull',
          'bouclé', 'boucle', 'noppig ull', 'teddy',
          
          // === SIDEN & SATIN ===
          'siden', 'silk', 'silke', 'rent siden', 'pure silk',
          'mulberry silk', 'mullbärssilke', 'charmeuse', 'crepe de chine',
          'satin', 'satäng', 'duchess satin', 'bridal satin',
          'chiffong', 'chiffon', 'georgette', 'organza', 'organdi',
          'habotai', 'china silk', 'taft', 'taffeta', 'shantung',
          
          // === SYNTETISKA ===
          'polyester', 'poly', 'polyesterblandning', 'recycled polyester',
          'nylon', 'nylon 66', 'ripstop', 'ripstop nylon', 'cordura',
          'akryl', 'acrylic', 'spandex', 'elastan', 'lycra', 'stretch',
          'viskos', 'viscose', 'rayon', 'modal', 'tencel', 'lyocell',
          'cupro', 'acetate', 'acetat', 'triacetate',
          
          // === SPECIELLA ===
          'sammet', 'velvet', 'velour', 'krossad sammet', 'crushed velvet',
          'manchester', 'corduroy', 'cord', 'finribbad cord', 'wale cord',
          'fleece', 'polar fleece', 'microfleece', 'tech fleece',
          'sherpa', 'borg', 'teddy', 'faux fur', 'fuskpäls', 'konstpäls',
          'spets', 'lace', 'broderad spets', 'chantilly', 'guipure',
          'brodyr', 'embroidery', 'broderat', 'beading', 'pärlor',
          'paljetter', 'sequins', 'glitter', 'metallic', 'lurex',
          'mesh', 'nät', 'tulle', 'tyll', 'point desprit',
          'crêpe', 'crepe', 'kreppväv', 'double crepe',
          'scuba', 'neopren', 'neoprene', 'wetsuit material',
          'jacquard', 'brokad', 'brocade', 'damast', 'damask',
          'bouclé', 'tweed', 'houndstooth', 'hundtand', 'pepita',
          
          // === TEKNISKA ===
          'gore-tex', 'goretex', 'waterproof', 'vattentät',
          'windproof', 'vindtät', 'breathable', 'andningsbar',
          'softshell', 'hardshell', 'membrane', 'membran',
          'dri-fit', 'moisture wicking', 'fuktavledande', 'quick dry',
          'uv-skydd', 'upf', 'antimikrobiell', 'odor resistant'
        ],
        tops: [
          // === BASIC T-SHIRTS ===
          't-shirt', 'tröja', 't-tröja', 'tee', 'basic tee', 'basic t-shirt',
          'vit t-shirt', 'svart t-shirt', 'grå t-shirt', 'vit tröja', 'svart tröja',
          'v-ringad t-shirt', 'v-neck', 'rund hals', 'crew neck', 'u-ringad',
          'oversize t-shirt', 'oversize tröja', 'boxy t-shirt', 'boxy tee',
          'fitted t-shirt', 'tight t-shirt', 'slim fit t-shirt', 'figurnära',
          'longline t-shirt', 'lång t-shirt', 'förlängd t-shirt',
          'croppad t-shirt', 'crop t-shirt', 'kort t-shirt', 'cropped tee',
          'graphic tee', 'tryckt t-shirt', 'mönstrad t-shirt', 'logotyp t-shirt',
          'band tee', 'band t-shirt', 'vintage t-shirt', 'retro t-shirt',
          'randig t-shirt', 'striped tee', 'pocket tee', 'ficka t-shirt',
          'raglan', 'baseball tee', 'ringer tee', 'henley', 'henley tröja',
          'långärmad t-shirt', 'long sleeve', 'kortärmad', 'short sleeve',
          'ärmlös t-shirt', 'sleeveless', 'muscle tee', 'tank',
          
          // === SKJORTOR ===
          'skjorta', 'shirt', 'button-down', 'button down', 'knäppt skjorta',
          'oxford skjorta', 'oxford shirt', 'poplin skjorta', 'klassisk skjorta',
          'vit skjorta', 'svart skjorta', 'blå skjorta', 'randig skjorta',
          'oversize skjorta', 'oversized shirt', 'boyfriend skjorta',
          'croppad skjorta', 'cropped shirt', 'knuten skjorta', 'tie-front',
          'kortärmad skjorta', 'short sleeve shirt', 'hawaiiskjorta', 'hawaii shirt',
          'camp collar', 'kubansk krage', 'bowling shirt', 'bowling skjorta',
          'flanellskjorta', 'flannel', 'rutig flanell', 'lumberjack',
          'jeansskjorta', 'denim skjorta', 'denim shirt', 'chambray',
          'linneskjorta', 'linen shirt', 'sommarskjorta', 'resort shirt',
          'arbetsskjorta', 'work shirt', 'utility skjorta', 'western skjorta',
          'satängskjorta', 'satin shirt', 'sidenkskorta', 'silk shirt',
          'transparent skjorta', 'sheer shirt', 'mesh skjorta', 'genomskinlig',
          
          // === BLUSAR ===
          'blus', 'blouse', 'vit blus', 'svart blus', 'sidenblus', 'silk blouse',
          'satängblus', 'satin blouse', 'chiffongblus', 'chiffon blouse',
          'spetsblus', 'lace blouse', 'volangblus', 'ruffle blouse',
          'knytblus', 'pussy bow', 'rosettblus', 'bow blouse',
          'omlottblus', 'wrap blouse', 'wrap top', 'peplum blus', 'peplum top',
          'off-shoulder blus', 'axelbandslös', 'one-shoulder blus',
          'croppad blus', 'cropped blouse', 'kort blus',
          'oversize blus', 'oversized blouse', 'flowy blus', 'ledig blus',
          'ärmlös blus', 'sleeveless blouse', 'halterneck blus',
          'bondblus', 'peasant blouse', 'boho blus', 'bohemisk blus',
          
          // === STICKADE TRÖJOR ===
          'stickad tröja', 'knit sweater', 'knit', 'sweater', 'jumper',
          'pullover', 'stickad pullover', 'fintstickad', 'grovstickad',
          'chunky knit', 'chunky stickad', 'tjock stickad', 'cable knit',
          'flätstickad', 'cable sweater', 'zopf', 'aran sweater',
          'kashmir tröja', 'cashmere sweater', 'kashmir', 'cashmere',
          'merinoull tröja', 'merino sweater', 'ylle tröja', 'ull tröja',
          'mohair tröja', 'mohair sweater', 'angora', 'alpaca tröja',
          'oversize stickad', 'oversized sweater', 'slouchy sweater',
          'fitted stickad', 'tight stickad', 'figurnära stickad',
          'croppad stickad', 'cropped sweater', 'kort stickad',
          'polotröja', 'polo neck', 'turtleneck', 'rollneck', 'roll neck',
          'mock neck', 'halv polo', 'funnel neck', 'tratt hals',
          'collegetröja', 'crew neck sweater', 'crewneck', 'rund hals tröja',
          'v-ringad tröja', 'v-neck sweater', 'v-hals tröja',
          'argyle', 'argyle tröja', 'fair isle', 'mönsterstickad',
          'ribbstickad', 'ribbed sweater', 'ribbad tröja',
          'bouclé tröja', 'boucle', 'nopprig stickad',
          
          // === CARDIGANS & KOFTOR ===
          'cardigan', 'kofta', 'stickad kofta', 'knit cardigan',
          'kort cardigan', 'croppad cardigan', 'cropped cardigan',
          'lång cardigan', 'longline cardigan', 'maxi cardigan', 'coatigan',
          'oversize cardigan', 'oversized cardigan', 'chunky cardigan',
          'tunn cardigan', 'lightweight cardigan', 'sommar cardigan',
          'knäppt cardigan', 'button cardigan', 'zip cardigan', 'dragkedja',
          'omlott cardigan', 'wrap cardigan', 'bälte cardigan',
          'bolero', 'shrug', 'axelkofta', 'kortkofta',
          'kashmir cardigan', 'cashmere cardigan', 'ull cardigan',
          'mormors kofta', 'farmor kofta', 'grandma cardigan',
          
          // === HOODIES & SWEATSHIRTS ===
          'hoodie', 'hood', 'luvtröja', 'sweatshirt', 'collegetröja',
          'zip hoodie', 'zip-up hoodie', 'full zip', 'dragkedja hoodie',
          'pullover hoodie', 'over head', 'pull-over', 'huvtröja',
          'oversize hoodie', 'oversized hoodie', 'baggy hoodie',
          'croppad hoodie', 'cropped hoodie', 'kort hoodie',
          'fitted hoodie', 'slim hoodie', 'figurnära hoodie',
          'graphic hoodie', 'tryckt hoodie', 'logga hoodie', 'brand hoodie',
          'basic hoodie', 'plain hoodie', 'enfärgad hoodie',
          'fleece hoodie', 'fleece', 'tech fleece', 'nike tech fleece',
          'sweatshirt', 'crewneck sweatshirt', 'college sweatshirt',
          'oversize sweatshirt', 'vintage sweatshirt', 'retro sweatshirt',
          'croppad sweatshirt', 'cropped sweatshirt',
          'half-zip', 'halv dragkedja', 'quarter zip', 'kvarts dragkedja',
          
          // === VÄSTAR ===
          'väst', 'vest', 'stickad väst', 'sweater vest', 'knit vest',
          'kostymväst', 'suit vest', 'waistcoat', 'gilet',
          'dun väst', 'puffer vest', 'quilted vest', 'vadderad väst',
          'fleece väst', 'fleece gilet', 'bodywarmer',
          'jeans väst', 'denim vest', 'jeansvest',
          'läder väst', 'leather vest', 'mc väst', 'biker vest',
          
          // === TOPPAR ===
          'topp', 'top', 'linne', 'tank top', 'tanktopp', 'singlet',
          'cami', 'camisole', 'spaghettiband', 'tunna band',
          'crop top', 'croptop', 'croppad topp', 'kort topp', 'mage-fri',
          'halterneck', 'halter top', 'nackband', 'halter',
          'tubtopp', 'tube top', 'bandeau', 'strapless', 'axelbandslös topp',
          'off-shoulder', 'off shoulder topp', 'bar axel', 'cold shoulder',
          'one-shoulder', 'en axel', 'asymmetrisk topp',
          'bralette', 'bralette topp', 'bh-topp', 'bra top',
          'bodysuit', 'body', 'string body', 'thong bodysuit',
          'mesh topp', 'mesh top', 'transparent topp', 'see-through',
          'spets topp', 'lace top', 'spetslinne', 'lace cami',
          'satin topp', 'satin cami', 'silke topp', 'silk cami',
          'ribbad topp', 'ribbed top', 'ribbat linne', 'ribbed tank',
          'smockad topp', 'smocked top', 'rynkad topp', 'shirred',
          'virkad topp', 'crochet top', 'virkat linne',
          'paljett topp', 'sequin top', 'glitter topp', 'fest topp',
          'corset topp', 'korsett topp', 'bustier', 'bustier topp',
          'wrap topp', 'omlott topp', 'knyttopp', 'tie front',
          'peplum', 'peplum topp', 'volang topp', 'ruffle top',
          'baby tee', 'shrunken tee', 'tight topp', 'fitted topp',
          
          // === FLEECE & TEDDY ===
          'fleecetröja', 'fleece pullover', 'fleece jacket',
          'teddy tröja', 'teddy fleece', 'sherpa', 'sherpa pullover',
          'borg tröja', 'borg fleece', 'pile tröja',
          'zip fleece', 'half zip fleece', 'kvarts zip fleece',
          
          // === POLO ===
          'polo', 'pikétröja', 'polo shirt', 'pique',
          'långärmad polo', 'long sleeve polo',
          'slim fit polo', 'fitted polo', 'oversize polo',
          'tennis polo', 'golf polo', 'sport polo',
          
          // === TRÄNING ===
          'träningströja', 'sports top', 'workout top', 'gym topp',
          'sport-bh', 'sports bra', 'tränings-bh', 'high impact bra',
          'compression top', 'kompressionströja', 'base layer',
          'rashguard', 'rash guard', 'uv-tröja', 'badtröja',
          'yoga topp', 'pilates topp', 'träningslinne',
          'running top', 'löpartröja', 'löparlinne'
        ],
        bottoms: [
          // === JEANS - MODELLER ===
          'jeans', 'denim', 'denimbyxor', 'jeanbyxor', 'blåjeans',
          'skinny jeans', 'skinny', 'super skinny', 'spray on jeans', 'jeggings',
          'slim jeans', 'slim fit jeans', 'slim', 'tapered jeans', 'tapered',
          'straight jeans', 'straight leg', 'straight fit', 'raka jeans',
          'regular jeans', 'regular fit', 'classic fit', 'standard fit',
          'relaxed jeans', 'relaxed fit', 'loose jeans', 'loose fit',
          'baggy jeans', 'baggy', 'wide jeans', 'super baggy', 'skater jeans',
          'wide leg jeans', 'vida jeans', 'vida benpar', 'palazzo jeans',
          'flare jeans', 'flare', 'utsvängda jeans', 'bell bottoms', 'bootcut',
          'bootcut jeans', 'kick flare', 'kick flare jeans', 'cropped flare',
          'mom jeans', 'mom fit', 'mom', 'momjeans',
          'dad jeans', 'dad fit', 'dad', 'dadjeans',
          'boyfriend jeans', 'boyfriend', 'boyfriend fit',
          'girlfriend jeans', 'girlfriend fit', 'girlfriend',
          'barrel jeans', 'barrel leg', 'barrel fit', 'balloon jeans', 'balloon',
          'carrot jeans', 'carrot fit', 'carrot', 'anti-fit',
          'cigarette jeans', 'cigarette', 'cigarettjeans',
          'carpenter jeans', 'painter jeans', 'worker jeans',
          
          // === JEANS - MIDJA ===
          'lågmidjade jeans', 'low waist jeans', 'low rise jeans', 'low rise',
          'låg midja', 'ultra low rise', 'super low rise',
          'mellanhög midja', 'mid rise jeans', 'mid waist', 'medium rise',
          'högmidjade jeans', 'high waist jeans', 'high rise jeans', 'high rise',
          'hög midja', 'ultra high rise', 'super high rise', 'sky high',
          
          // === JEANS - TVÄTT & FÄRG ===
          'blå jeans', 'blue jeans', 'mellanblå', 'medium blue',
          'ljusa jeans', 'ljusblå jeans', 'light blue', 'bleached',
          'mörka jeans', 'mörkblå jeans', 'dark blue', 'indigo',
          'svarta jeans', 'black jeans', 'svart denim', 'coated black',
          'vita jeans', 'white jeans', 'ecru jeans', 'offwhite jeans',
          'grå jeans', 'grey jeans', 'gråa jeans', 'charcoal jeans',
          'färgade jeans', 'colored jeans', 'röda jeans', 'gröna jeans',
          'tvättade jeans', 'washed jeans', 'vintage wash', 'acid wash',
          'råa jeans', 'raw denim', 'selvedge', 'selvage', 'otvättade',
          'stonewashed', 'stone wash', 'enzyme wash',
          
          // === JEANS - DETALJER ===
          'slitna jeans', 'ripped jeans', 'ripped', 'distressed jeans',
          'hål i knäna', 'knee rips', 'destroyed jeans', 'shredded',
          'fransiga jeans', 'frayed jeans', 'frayed hem', 'raw hem',
          'patchwork jeans', 'lappar', 'patches',
          'broderade jeans', 'embroidered jeans', 'brodyr',
          'nitar jeans', 'studded jeans', 'rhinestone jeans',
          
          // === BYXOR - TYPER ===
          'byxor', 'pants', 'trousers', 'slacks',
          'chinos', 'chino', 'chinbyxor', 'bomullsbyxor',
          'kostymbyxor', 'dress pants', 'suit pants', 'suit trousers',
          'anzugbyxor', 'formella byxor', 'office pants',
          'pressade byxor', 'pleat front', 'flat front', 'slät front',
          'plisserade byxor', 'pleated pants', 'pleated trousers',
          'cigarettbyxor', 'cigarette pants', 'slim trousers',
          'vida byxor', 'wide leg pants', 'wide trousers', 'palazzo',
          'palazzo byxor', 'palazzo pants', 'flowy pants',
          'culotte', 'culottes', 'knäbyxor', 'midi pants',
          'capri', 'capribyxor', 'capri pants', '3/4 byxor',
          'ankellånga byxor', 'ankle pants', 'cropped pants',
          'paper bag', 'paper bag byxor', 'paperbag waist',
          'bälte byxor', 'belted pants', 'self-tie', 'knytband',
          
          // === BYXOR - CASUAL ===
          'joggers', 'joggingbyxor', 'mjukisbyxor', 'sweatpants',
          'track pants', 'träningsbyxor', 'sporty pants',
          'cargobyxor', 'cargo pants', 'cargo', 'fickor byxor',
          'parachute pants', 'fallskärmsbyxor', 'nylon pants',
          'utility byxor', 'utility pants', 'arbetarbyxor',
          'carpenter pants', 'snickare byxor', 'painter pants',
          'fatigue pants', 'military pants', 'militärbyxor', 'army pants',
          'baggy byxor', 'baggy pants', 'loose pants', 'vida mjukis',
          'straight leg byxor', 'straight pants',
          
          // === BYXOR - MATERIAL ===
          'läderbyxor', 'leather pants', 'skinnbyxor', 'real leather',
          'konstläder byxor', 'faux leather pants', 'pu-byxor', 'vegan leather',
          'vinyl byxor', 'vinyl pants', 'lack byxor', 'wet look',
          'latex byxor', 'latex pants', 'gummi byxor',
          'sammet byxor', 'velvet pants', 'velour pants', 'velour',
          'manchester', 'corduroy', 'cord pants', 'cordbyxor',
          'linnebyxor', 'linen pants', 'linen trousers', 'sommar byxor',
          'siden byxor', 'silk pants', 'satin byxor', 'satin pants',
          'ull byxor', 'wool pants', 'wool trousers', 'flanell byxor',
          'tweed byxor', 'tweed pants', 'herringbone',
          
          // === SHORTS ===
          'shorts', 'kortbyxor', 'korta byxor', 'sommar shorts',
          'jeans shorts', 'denim shorts', 'jeansshorts', 'cutoffs',
          'avklippta shorts', 'cut off', 'ripped shorts', 'slitna shorts',
          'high waist shorts', 'hög midja shorts', 'högmidjade shorts',
          'low rise shorts', 'låg midja shorts', 'lågmidjade shorts',
          'bermuda shorts', 'bermudas', 'knälånga shorts',
          'chino shorts', 'chinoshorts', 'tailored shorts',
          'cargo shorts', 'cargoshorts', 'ficka shorts',
          'löparshorts', 'running shorts', 'athletic shorts', 'sport shorts',
          'biker shorts', 'cykelbyxor', 'cycling shorts', 'bike shorts',
          'sweat shorts', 'mjukis shorts', 'lounge shorts',
          'paper bag shorts', 'paperbag shorts', 'knytband shorts',
          'linne shorts', 'linen shorts', 'flow shorts',
          'läder shorts', 'leather shorts', 'skinn shorts',
          'badshorts', 'swim shorts', 'board shorts', 'swim trunks',
          'skort', 'kjol shorts', 'skirt shorts',
          
          // === KJOLAR ===
          'kjol', 'skirt', 'kjolar',
          'minikjol', 'mini skirt', 'mini', 'kort kjol', 'micro mini',
          'midikjol', 'midi skirt', 'midi', 'knälång kjol',
          'maxikjol', 'maxi skirt', 'maxi', 'lång kjol', 'golvlång',
          'a-linje kjol', 'a-line skirt', 'a-line', 'klockad kjol',
          'pennkjol', 'pencil skirt', 'pencil', 'tight kjol', 'figurnära kjol',
          'rak kjol', 'straight skirt', 'tube skirt', 'tubkjol',
          'plisserad kjol', 'pleated skirt', 'pleats', 'veckad kjol',
          'veckad kjol', 'accordion pleat', 'knife pleat', 'box pleat',
          'volang kjol', 'ruffle skirt', 'tiered skirt', 'våningar',
          'wrap kjol', 'omlott kjol', 'wrap skirt', 'knyt kjol',
          'asymmetrisk kjol', 'asymmetric skirt', 'hi-lo kjol', 'mullet kjol',
          'slip skirt', 'slip kjol', 'satin kjol', 'satin skirt',
          'silke kjol', 'silk skirt', 'siden kjol',
          'tyll kjol', 'tulle skirt', 'ballerina kjol',
          'läder kjol', 'leather skirt', 'skinn kjol', 'faux leather skirt',
          'mocka kjol', 'suede skirt', 'suede',
          'denim kjol', 'jeans kjol', 'denim skirt', 'jean skirt',
          'manchester kjol', 'corduroy skirt', 'cord kjol',
          'ull kjol', 'wool skirt', 'tweed kjol', 'tweed skirt',
          'stickad kjol', 'knit skirt', 'knitted skirt',
          'spets kjol', 'lace skirt', 'spetskjol',
          'paljett kjol', 'sequin skirt', 'glitter kjol',
          'tenniskjol', 'tennis skirt', 'sport kjol', 'golf kjol',
          'skolkjol', 'school skirt', 'uniform kjol',
          'cargo kjol', 'utility skirt', 'ficka kjol',
          'bodycon kjol', 'tight kjol', 'stretch kjol',
          'paperbag kjol', 'paper bag skirt', 'hög midja kjol',
          'godet kjol', 'flare kjol', 'trumpet kjol',
          
          // === KLÄNNINGAR (bonus) ===
          'klänning', 'dress', 'klänningar',
          'miniklänning', 'mini dress', 'kort klänning',
          'midiklänning', 'midi dress', 'knälång klänning',
          'maxiklänning', 'maxi dress', 'lång klänning',
          't-shirt klänning', 't-shirt dress', 'tee dress',
          'skjortklänning', 'shirt dress', 'button down dress',
          'omlottklänning', 'wrap dress', 'wrap klänning',
          'slip dress', 'slip klänning', 'underklädesklänning',
          'bodycon dress', 'tight klänning', 'figurnära klänning',
          'a-linje klänning', 'a-line dress', 'klockad klänning',
          'blazer dress', 'blazer klänning', 'kostym klänning',
          'stickad klänning', 'knit dress', 'sweater dress',
          'sweatshirt klänning', 'hoodie dress', 'hoodie klänning'
        ],
        jackets: [
          // === JACKOR - CASUAL ===
          'jacka', 'jacket', 'ytterplagg', 'ytterjacka',
          'jeansjacka', 'denim jacket', 'jean jacket', 'denim jacka',
          'trucker jacket', 'trucker jacka', 'klassisk jeansjacka',
          'oversize jeansjacka', 'oversize denim jacket', 'boyfriend jeansjacka',
          'croppad jeansjacka', 'cropped denim jacket', 'kort jeansjacka',
          'sherpa jeansjacka', 'sherpa denim', 'fodrad jeansjacka', 'borg jacka',
          'bomberjacka', 'bomber jacket', 'bomber', 'flight jacket',
          'oversize bomber', 'cropped bomber', 'satin bomber', 'nylon bomber',
          'harrington', 'harrington jacket', 'harrington jacka',
          'varsity jacket', 'college jacka', 'letterman jacket', 'baseball jacka',
          'coach jacket', 'coach jacka', 'windbreaker', 'vindjacka',
          'anorak', 'anorak jacka', 'pullover anorak', 'half-zip anorak',
          'track jacket', 'träningsjacka', 'sport jacka', 'zip up',
          'blouson', 'blouson jacka', 'baseball blouson',
          
          // === LÄDER & SKINN ===
          'skinnjacka', 'leather jacket', 'läderjacka', 'real leather',
          'mc jacka', 'biker jacket', 'biker jacka', 'moto jacket',
          'perfecto', 'perfecto jacka', 'classic biker',
          'racer jacket', 'racer jacka', 'cafe racer',
          'aviator jacket', 'aviator jacka', 'pilot jacka', 'shearling',
          'bombardier jacka', 'b3 bomber', 'flight jacket',
          'mockajacka', 'suede jacket', 'mocka jacka', 'suede',
          'konstläder jacka', 'faux leather jacket', 'pu jacka', 'vegan leather',
          'oversize skinnjacka', 'oversize leather', 'boyfriend läder',
          'croppad skinnjacka', 'cropped leather', 'kort läderjacka',
          
          // === DUNJACKOR & VADDERADE ===
          'dunjacka', 'down jacket', 'puffer jacket', 'puffer',
          'puffer jacka', 'padded jacket', 'vadderad jacka', 'quilted',
          'lång dunjacka', 'long puffer', 'puffer coat', 'maxi puffer',
          'kort dunjacka', 'cropped puffer', 'short puffer',
          'oversize puffer', 'oversized puffer', 'cloud jacket',
          'lightweight puffer', 'tunn dunjacka', 'packable down',
          'puffer vest', 'dun väst', 'vadderad väst', 'gilet',
          'high neck puffer', 'hög krage dunjacka', 'funnel neck',
          
          // === FLEECE & TEDDY ===
          'fleecejacka', 'fleece jacket', 'fleece', 'polar fleece',
          'teddy jacka', 'teddy jacket', 'teddy coat', 'teddy',
          'sherpa jacka', 'sherpa jacket', 'sherpa', 'borg jacka',
          'pile jacka', 'pile jacket', 'faux shearling',
          'half-zip fleece', 'kvarts-zip', 'quarter zip fleece',
          'full zip fleece', 'zip fleece', 'fleece zip-up',
          
          // === YTTERKLÄDER - FORMELLT ===
          'blazer', 'kavaj', 'blazer jacka', 'sport coat',
          'oversize blazer', 'oversized blazer', 'boyfriend blazer',
          'croppad blazer', 'cropped blazer', 'kort blazer',
          'dubbelbröstad blazer', 'double breasted', 'db blazer',
          'singelknäppt', 'single breasted', 'klassisk blazer',
          'linne blazer', 'linen blazer', 'sommar blazer',
          'sammet blazer', 'velvet blazer', 'smoking blazer',
          'tweed blazer', 'tweed kavaj', 'harris tweed',
          
          // === KAPPOR & ROCKAR ===
          'kappa', 'coat', 'rock', 'överrock',
          'ullkappa', 'wool coat', 'ylle kappa', 'klassisk kappa',
          'trenchcoat', 'trench coat', 'trench', 'regnrock',
          'oversize kappa', 'oversized coat', 'cocoon coat',
          'lång kappa', 'long coat', 'maxi coat', 'full length',
          'kort kappa', 'short coat', 'car coat', 'knälång kappa',
          'wrap coat', 'omlottkappa', 'bälte kappa', 'bathrobe coat',
          'dubbelbröstad kappa', 'double breasted coat', 'militärkappa',
          'singelknäppt kappa', 'single breasted coat',
          'peacoat', 'pea coat', 'sjömanskappa', 'naval coat',
          'duffel coat', 'duffelrock', 'toggle coat', 'montgomery',
          'camel coat', 'kamelkappa', 'camel', 'beige kappa',
          'teddy coat', 'teddy kappa', 'faux fur coat', 'fuskpäls kappa',
          'shearling coat', 'shearling kappa', 'lammpäls',
          'pälskappa', 'fur coat', 'faux fur', 'konstpäls',
          
          // === REGN & FUNKTIONSJACKOR ===
          'regnjacka', 'rain jacket', 'rain coat', 'regnrock',
          'regnkappa', 'waterproof coat', 'vattentät jacka',
          'softshell', 'softshell jacka', 'soft shell',
          'hardshell', 'hardshell jacka', 'hard shell', 'gore-tex',
          'teknisk jacka', 'technical jacket', 'outdoor jacka',
          'skaljacka', 'shell jacket', 'wind shell',
          'parkas', 'parka', 'parka jacka', 'snorkel parka',
          'vinterjacka', 'winter jacket', 'vinter jacka',
          'varmfodrad jacka', 'insulated jacket', 'fodrad jacka',
          
          // === SPECIELLA ===
          'shacket', 'shirt jacket', 'skjortjacka', 'overshirt',
          'overkshjorta', 'utility shirt', 'flanell jacka',
          'workwear jacka', 'chore jacket', 'worker jacket', 'arbetsjacka',
          'field jacket', 'field jacka', 'm-65', 'safari jacka',
          'utility jacka', 'utility jacket', 'cargo jacket', 'fickor jacka',
          'cape', 'poncho', 'cape jacka', 'slängkappa',
          'kimono jacka', 'kimono jacket', 'kimono',
          'blazer coat', 'coatigan', 'långkofta', 'cardigan coat'
        ],
        shoes: [
          // === SNEAKERS - TYPER ===
          'sneakers', 'skor', 'sportskor', 'tennisskor',
          'låga sneakers', 'low top', 'low tops', 'låg modell',
          'höga sneakers', 'high top', 'high tops', 'hög modell',
          'mid top', 'mid tops', 'mellan modell',
          'slip-on sneakers', 'slip-ons', 'slip on', 'laceless',
          'canvas sneakers', 'canvas skor', 'tygskor', 'tygsneakers',
          'läder sneakers', 'leather sneakers', 'skinn sneakers',
          'mocka sneakers', 'suede sneakers', 'mocka skor',
          'mesh sneakers', 'mesh skor', 'breathable sneakers',
          'knit sneakers', 'stickade sneakers', 'sock sneakers', 'sock-style',
          
          // === SNEAKERS - STILAR ===
          'vita sneakers', 'white sneakers', 'all white', 'triple white',
          'svarta sneakers', 'black sneakers', 'all black', 'triple black',
          'chunky sneakers', 'chunky', 'dad sneakers', 'dad shoes', 'ugly sneakers',
          'platform sneakers', 'platå sneakers', 'platform skor', 'höga sulor',
          'retro sneakers', 'vintage sneakers', 'klassiska sneakers', 'old school',
          'minimalist sneakers', 'minimalistiska sneakers', 'clean sneakers',
          'designer sneakers', 'luxury sneakers', 'premium sneakers',
          'streetwear sneakers', 'hype sneakers', 'limited edition',
          'running-style sneakers', 'runner', 'running sneakers',
          'basketball sneakers', 'basket skor', 'basketball shoes',
          'tennis sneakers', 'court shoes', 'court sneakers',
          'skate shoes', 'skateskor', 'skate sneakers',
          'golf skor', 'golf shoes',
          
          // === TRÄNINGSSKOR ===
          'träningsskor', 'training shoes', 'gym skor', 'workout shoes',
          'löparskor', 'running shoes', 'jogging skor', 'löpskor',
          'crossfit skor', 'cross training', 'functional training',
          'promenad skor', 'walking shoes', 'vardagsskor',
          'vandringsskor', 'hiking shoes', 'trekking skor',
          'fotbollsskor', 'football boots', 'soccer shoes',
          
          // === BOOTS & STÖVLAR ===
          'boots', 'stövlar', 'kängor', 'stövel',
          'ankle boots', 'ankelboots', 'kort stövel', 'bootie', 'booties',
          'chelsea boots', 'chelsea', 'chelsea stövlar', 'elastiska boots',
          'combat boots', 'combat', 'militärkängor', 'army boots', 'soldier boots',
          'biker boots', 'mc boots', 'mc stövlar', 'motorcycle boots',
          'worker boots', 'work boots', 'arbetskängor', 'safety boots',
          'hiking boots', 'vandringskängor', 'trekking boots', 'bergskor',
          'lace-up boots', 'snörkängor', 'snörboots', 'laced boots',
          'zip boots', 'dragkedja boots', 'side zip', 'back zip',
          'platform boots', 'platå boots', 'chunky boots', 'tjock sula',
          'heeled boots', 'klack boots', 'klackkängor',
          'flat boots', 'platta boots', 'utan klack',
          'knee high boots', 'knähöga stövlar', 'knee boots',
          'over the knee boots', 'over-knee', 'otk boots', 'lårhöga',
          'thigh high boots', 'lårhöga stövlar', 'cuissardes',
          'riding boots', 'ridstövlar', 'equestrian boots',
          'cowboy boots', 'western boots', 'cowboy stövlar', 'western',
          'rain boots', 'gummistövlar', 'wellies', 'wellington',
          'snow boots', 'vinterstövlar', 'vinter boots', 'moon boots',
          'ugg boots', 'uggs', 'shearling boots', 'fårskinn boots',
          'dr martens', 'docs', 'martens', '1460',
          'timberland', 'timbs', 'timberlands', '6 inch',
          'blundstone', 'blunnies', 'australiska boots',
          'desert boots', 'desert', 'chukka boots', 'chukka',
          
          // === LOAFERS & SLIP-ONS ===
          'loafers', 'loafer', 'loafers skor', 'slip-in',
          'penny loafers', 'penny loafer', 'classic loafer',
          'tassel loafers', 'tassel', 'tofs loafers',
          'horsebit loafers', 'gucci loafers', 'horsebit',
          'platform loafers', 'chunky loafers', 'platå loafers',
          'heeled loafers', 'klack loafers', 'block heel loafers',
          'backless loafers', 'mules loafers', 'babouche',
          'driving shoes', 'driving loafers', 'mocassins', 'moccasins',
          'boat shoes', 'seglarskor', 'deck shoes', 'topsiders',
          
          // === KLACKSKOR ===
          'klackar', 'heels', 'klackskor', 'high heels',
          'stilettos', 'stiletto', 'stilettklackar', 'nålklack',
          'pumps', 'pump', 'klassiska pumps', 'court shoes',
          'kitten heels', 'kitten klack', 'låg klack', 'petit klack',
          'block heels', 'blockklack', 'tjock klack', 'chunky heels',
          'wedges', 'kilklack', 'wedge', 'platå kilklack',
          'platform heels', 'platå klackar', 'platform pumps',
          'slingbacks', 'slingback', 'hälrem', 'open back',
          'ankle strap', 'ankelrem', 'strap heels',
          'peep toe', 'öppen tå', 'open toe heels',
          'pointed toe', 'spetsig tå', 'pointy heels',
          'square toe', 'fyrkantig tå', 'square toe heels',
          'round toe', 'rund tå', 'round toe heels',
          'mules', 'mule', 'mulor', 'slip-in klack',
          'mary janes', 'mary jane', 'rem över foten',
          
          // === PLATTA SKOR ===
          'platta skor', 'flats', 'flat shoes', 'utan klack',
          'ballerina', 'ballerinas', 'ballet flats', 'ballerinaskor',
          'pointed flats', 'spetsiga flats', 'pointy flats',
          'loafer flats', 'flat loafers', 'platta loafers',
          'slip-ons', 'slip on', 'instegsskor',
          'espadrilles', 'espadrillos', 'espadriller',
          
          // === SANDALER ===
          'sandaler', 'sandals', 'sandal', 'sommarskor',
          'flip flops', 'flip-flops', 'flipflops', 'tåsandaler',
          'slides', 'slide sandaler', 'slip-in sandaler', 'pool slides',
          'strappy sandals', 'remmar sandaler', 'multi-strap',
          'gladiator sandals', 'gladiator', 'gladiatorsandaler',
          'platform sandals', 'platå sandaler', 'chunky sandals',
          'heeled sandals', 'klack sandaler', 'block heel sandals',
          'wedge sandals', 'kilklack sandaler', 'wedge',
          'flat sandals', 'platta sandaler', 'enkla sandaler',
          'ankle wrap sandals', 'knytning sandaler', 'tie-up',
          'birkenstock', 'birkenstocks', 'arizona', 'boston',
          'clogs', 'träskor', 'clog', 'swedish hasbeens',
          'crocs', 'crocs sandaler', 'foam clogs',
          'jelly sandals', 'jelly shoes', 'plastic sandaler',
          'fisherman sandals', 'fisherman', 'stängda sandaler',
          'dad sandals', 'sport sandals', 'outdoor sandaler', 'teva',
          
          // === FORMELLA SKOR ===
          'oxford', 'oxfords', 'oxford skor', 'cap toe oxford',
          'brogues', 'brogue', 'brogue skor', 'full brogue', 'wingtip',
          'derby', 'derbys', 'derby skor', 'plain toe derby',
          'monk strap', 'monk straps', 'munkskor', 'double monk',
          'dress shoes', 'finskor', 'kostym skor', 'suit shoes',
          'patent leather', 'lack skor', 'lackade skor', 'shiny shoes',
          'velvet shoes', 'sammet skor', 'velvet loafers',
          'smoking shoes', 'tuxedo shoes', 'evening shoes'
        ],
        accessories: [
          // === HUVUDBONADER - MÖSSOR ===
          'mössa', 'beanie', 'stickad mössa', 'vintermössa', 'bobble hat',
          'slouchy mössa', 'fisherman beanie', 'docker beanie', 'cuff beanie',
          'fleecemössa', 'skidmössa', 'öronlappar', 'earflap', 'trapper hat',
          'pälsmössa', 'rysk mössa', 'ushanka', 'aviator mössa',
          'balaclava', 'rånarluva', 'skidmask', 'neckwarmer',
          
          // === HUVUDBONADER - KEPSAR ===
          'keps', 'cap', 'baseball cap', 'baseballkeps', 'dad cap', 'dad hat',
          'snapback', 'fitted cap', 'trucker cap', 'trucker keps', 'mesh back',
          'flat cap', 'gubbkeps', 'newsboy cap', 'newsboy', 'gatsby',
          'baker boy', 'baker boy cap', 'ivy cap', 'cabbie hat',
          'visor', 'solskärm', 'tennis visor', 'golf visor',
          'cadet cap', 'military cap', 'army cap',
          
          // === HUVUDBONADER - HATTAR ===
          'hatt', 'hat', 'solhatt', 'sun hat', 'stråhatt', 'straw hat',
          'bucket hat', 'fiskarhatt', 'bucket', 'terry bucket',
          'fedora', 'trilby', 'pork pie', 'homburg',
          'panama', 'panama hatt', 'boater', 'båtarhatt',
          'cowboy hatt', 'western hat', 'rancher',
          'floppy hat', 'wide brim', 'bred brätte',
          'cloche', 'pillbox', 'beret', 'basker', 'konstnärsmössa',
          'beret ull', 'leather beret', 'military beret',
          'bowler', 'kubb', 'top hat', 'cylinderhatt',
          
          // === HUVUDBONADER - ÖVRIGT ===
          'pannband', 'headband', 'sport pannband', 'stickad pannband',
          'hårband', 'hair band', 'turban', 'head wrap', 'bandana',
          'do-rag', 'durag', 'silk scarf', 'huvudscarf',
          
          // === HALSACCESSOARER ===
          'halsduk', 'scarf', 'sjal', 'shawl', 'pashmina', 'poncho',
          'vinterhalsduk', 'ull scarf', 'cashmere scarf', 'kashmir halsduk',
          'siden scarf', 'silk scarf', 'satin scarf', 'tunn scarf',
          'infinity scarf', 'loop scarf', 'oändlig halsduk', 'snood',
          'tubscarf', 'buff', 'neck gaiter', 'neckwarmer',
          'bandana', 'näsduk', 'pocket square', 'bröstficka näsduk',
          'choker scarf', 'skinny scarf', 'smal halsduk',
          'blanket scarf', 'filt scarf', 'oversize scarf',
          
          // === SLIPS & FLUGA ===
          'slips', 'tie', 'necktie', 'sidenslips', 'silk tie',
          'smal slips', 'skinny tie', 'bred slips', 'wide tie',
          'stickad slips', 'knitted tie', 'ull slips', 'wool tie',
          'fluga', 'bow tie', 'butterfly', 'self-tie', 'pre-tied',
          'bolo tie', 'western tie', 'string tie',
          'ascot', 'cravat', 'kravatt',
          'slipsnål', 'tie clip', 'tie bar', 'tie pin',
          
          // === SMYCKEN - HALSBAND ===
          'halsband', 'necklace', 'kedja', 'chain', 'neck chain',
          'guld halsband', 'gold necklace', 'guld kedja', 'gold chain',
          'silver halsband', 'silver necklace', 'silver kedja', 'silver chain',
          'rose gold', 'roséguld', 'rose gold chain',
          'pärlhalsband', 'pearl necklace', 'pärlor', 'pearls',
          'choker', 'tätt halsband', 'collar necklace',
          'pendant', 'hänge', 'berlock halsband', 'charm necklace',
          'layered necklace', 'lager halsband', 'multi-strand',
          'statement necklace', 'statement halsband', 'chunky necklace',
          'dainty necklace', 'minimalist halsband', 'delicate chain',
          'lariat', 'y-necklace', 'tennis necklace',
          'dog tag', 'id-bricka', 'medallion', 'medalj',
          'coin necklace', 'mynt halsband', 'initial', 'bokstav',
          'cross', 'kors', 'heart', 'hjärta', 'star', 'stjärna',
          'shell necklace', 'snäckor', 'surfer necklace',
          
          // === SMYCKEN - ARMBAND ===
          'armband', 'bracelet', 'bangle', 'cuff',
          'guld armband', 'gold bracelet', 'gold bangle',
          'silver armband', 'silver bracelet', 'silver cuff',
          'läderarmband', 'leather bracelet', 'wrap bracelet',
          'pärlarmband', 'pearl bracelet', 'bead bracelet', 'pärlor',
          'tennisarmband', 'tennis bracelet', 'diamant armband',
          'charm armband', 'berlock armband', 'pandora', 'charm bracelet',
          'friendship bracelet', 'vänskapsband', 'thread bracelet',
          'chain bracelet', 'kedjearmband', 'link bracelet',
          'cuff bracelet', 'manschett', 'open cuff',
          'stackable', 'stapelbara armband', 'arm party',
          'watch band', 'klockarmband', 'nato strap', 'leather strap',
          'anklet', 'fotlänk', 'ankle bracelet', 'ankelkedja',
          
          // === SMYCKEN - ÖRHÄNGEN ===
          'örhängen', 'earrings', 'örhänge',
          'guld örhängen', 'gold earrings', 'silver örhängen', 'silver earrings',
          'studs', 'stift', 'örhängen stift', 'stud earrings',
          'pearl studs', 'pärl studs', 'diamant studs', 'diamond studs',
          'hoops', 'ringar', 'creoler', 'hoop earrings',
          'small hoops', 'små ringar', 'large hoops', 'stora ringar',
          'huggie', 'huggie hoops', 'mini hoops',
          'drop earrings', 'hängande örhängen', 'dangle earrings',
          'chandelier', 'statement örhängen', 'tassel earrings', 'tofs',
          'ear cuff', 'öronkuff', 'climber', 'ear climber',
          'clip-on', 'clips örhängen', 'magnetiska örhängen',
          'mismatched', 'asymmetriska', 'single earring', 'solo örhänge',
          
          // === SMYCKEN - RINGAR ===
          'ring', 'ringar', 'fingerring',
          'guld ring', 'gold ring', 'silver ring', 'silver ring',
          'signetring', 'signet ring', 'chevalier', 'sigill',
          'statement ring', 'cocktail ring', 'stor ring',
          'stackable rings', 'stapelbara ringar', 'midi rings', 'knoge ringar',
          'band ring', 'plain band', 'wedding band', 'vigselring',
          'engagement ring', 'förlovningsring', 'solitaire',
          'pinky ring', 'lillfinger ring', 'thumb ring', 'tumring',
          'adjustable ring', 'justerbar ring', 'open ring',
          'pearl ring', 'pärlring', 'gemstone ring', 'ädelsten',
          'vintage ring', 'antik ring', 'art deco',
          
          // === SMYCKEN - PIERCINGAR ===
          'piercing', 'piercingar', 'näsring', 'nose ring', 'septum',
          'lip ring', 'läppiercing', 'labret', 'monroe',
          'eyebrow', 'ögonbryn', 'belly button', 'navelpiercing',
          'helix', 'tragus', 'conch', 'daith', 'rook',
          'industrial', 'scaffold', 'cartilage',
          
          // === KLOCKOR ===
          'klocka', 'watch', 'armbandsur',
          'guld klocka', 'gold watch', 'silver klocka', 'silver watch',
          'svart klocka', 'black watch', 'vit klocka', 'white watch',
          'läderband', 'leather strap', 'metallband', 'metal bracelet',
          'nato band', 'nato strap', 'mesh band', 'milanese',
          'chronograph', 'kronograf', 'diver', 'dykarklocka', 'dive watch',
          'dress watch', 'klädklocka', 'field watch', 'fältklocka',
          'pilot watch', 'aviator watch', 'flieger',
          'minimalist watch', 'minimalistisk klocka', 'bauhaus',
          'vintage watch', 'retro klocka', 'quartz', 'automatisk', 'automatic',
          'smartwatch', 'smart klocka', 'apple watch', 'fitbit', 'garmin',
          'samsung watch', 'android watch', 'fitness tracker',
          'rolex', 'omega', 'tag heuer', 'cartier', 'breitling',
          'seiko', 'citizen', 'casio', 'g-shock', 'timex',
          'daniel wellington', 'tissot', 'longines', 'tudor',
          
          // === GLASÖGON ===
          'glasögon', 'glasses', 'eyeglasses', 'spectacles',
          'läsglasögon', 'reading glasses', 'optiska', 'prescription',
          'solglasögon', 'sunglasses', 'shades', 'sunnies',
          'pilotglasögon', 'aviators', 'aviator sunglasses',
          'wayfarer', 'wayfarers', 'classic wayfarer',
          'cat eye', 'kattögon', 'cat eye sunglasses',
          'round glasses', 'runda glasögon', 'round sunglasses',
          'square glasses', 'fyrkantiga', 'rectangular', 'rektangulära',
          'oversized', 'oversize glasögon', 'shield', 'mask sunglasses',
          'sport sunglasses', 'sportglasögon', 'wrap around',
          'clip-on', 'klämma solglasögon', 'flip-up',
          'blue light', 'blåljus', 'datorglasögon', 'gaming glasses',
          'transparent', 'genomskinliga', 'clear frame',
          'tortoise', 'sköldpadd', 'havana', 'horn',
          'ray-ban', 'oakley', 'persol', 'gucci', 'prada',
          'celine', 'dior', 'tom ford', 'versace',
          
          // === VÄSKOR - HANDVÄSKOR ===
          'väska', 'bag', 'handväska', 'handbag', 'purse',
          'tote', 'tote bag', 'shopper', 'shopping bag', 'shoppingväska',
          'crossbody', 'crossbody väska', 'cross body bag', 'axelremsväska',
          'shoulder bag', 'axelväska', 'hobo', 'hobo bag',
          'clutch', 'kuvertväska', 'evening bag', 'kvällsväska',
          'bucket bag', 'hinkväska', 'bucket', 'drawstring bag',
          'saddle bag', 'sadelväska', 'half moon', 'halvmåne',
          'baguette', 'baguette bag', 'mini bag', 'micro bag', 'nano bag',
          'top handle', 'handtag väska', 'doctor bag', 'bowling bag',
          'chain bag', 'kedjväska', 'quilted bag', 'quiltad väska',
          'structured bag', 'strukturerad', 'slouchy', 'mjuk väska',
          'woven bag', 'flätad väska', 'raffia', 'straw bag', 'stråväska',
          'canvas tote', 'canvas väska', 'leather tote', 'läderväska',
          'designer bag', 'designer väska', 'luxury bag', 'lyxväska',
          
          // === VÄSKOR - RYGGSÄCKAR ===
          'ryggsäck', 'backpack', 'rucksack', 'knapsack',
          'mini ryggsäck', 'mini backpack', 'small backpack',
          'läder ryggsäck', 'leather backpack', 'canvas ryggsäck',
          'laptop ryggsäck', 'dator ryggsäck', 'laptop backpack',
          'roll-top', 'roll top ryggsäck', 'courier bag',
          'hiking backpack', 'vandringsryggsäck', 'outdoor backpack',
          'gym backpack', 'sport ryggsäck', 'school bag', 'skolväska',
          'daypack', 'dagsryggsäck', 'travel backpack', 'reseryggsäck',
          'drawstring bag', 'snöreväska', 'gymbag', 'gym bag',
          
          // === VÄSKOR - MIDJA & BELT BAGS ===
          'midjeväska', 'belt bag', 'bum bag', 'fanny pack', 'fannypack',
          'crossbody belt bag', 'sling bag', 'chest bag', 'bröstväska',
          'hip bag', 'höftväska', 'waist bag',
          
          // === VÄSKOR - ÖVRIGT ===
          'weekendbag', 'weekend bag', 'duffel bag', 'duffel', 'duffle',
          'holdall', 'carry-on', 'kabinväska', 'travel bag', 'resväska',
          'garment bag', 'kostymväska', 'suit carrier',
          'toiletry bag', 'necessär', 'wash bag', 'dopp kit',
          'laptop bag', 'datorväska', 'briefcase', 'portfölj', 'attaché',
          'messenger bag', 'messenger', 'courier bag', 'satchel',
          'camera bag', 'kameraväska', 'tech pouch', 'organizer',
          
          // === BÄLTEN ===
          'bälte', 'belt', 'skärp',
          'läderbälte', 'leather belt', 'äkta läder', 'genuine leather',
          'svart bälte', 'black belt', 'brunt bälte', 'brown belt',
          'vitt bälte', 'white belt', 'tan bälte', 'tan belt',
          'reversible', 'vändbart', 'dual-sided', 'två-sidigt',
          'skinny belt', 'smalt bälte', 'thin belt', 'tunnt bälte',
          'wide belt', 'brett bälte', 'waist belt', 'midjebälte',
          'chain belt', 'kedjebälte', 'link belt',
          'braided belt', 'flätat bälte', 'woven belt',
          'canvas belt', 'tyg bälte', 'fabric belt', 'webbing',
          'elastic belt', 'stretch bälte', 'braided elastic',
          'western belt', 'cowboy bälte', 'concho belt',
          'studded belt', 'nitat bälte', 'punk belt', 'pyramid studs',
          'designer belt', 'logo belt', 'gucci belt', 'lv belt',
          'guld spänne', 'gold buckle', 'silver spänne', 'silver buckle',
          'statement buckle', 'oversize spänne', 'double buckle',
          'no-hole belt', 'ratchet belt', 'automatic belt',
          
          // === HANDSKAR ===
          'handskar', 'gloves', 'vinterhandskar', 'winter gloves',
          'läderhandskar', 'leather gloves', 'driving gloves', 'körhandskar',
          'cashmere handskar', 'kashmir handskar', 'lined gloves', 'fodrade',
          'touchscreen gloves', 'pekskärms handskar', 'tech gloves',
          'fingerless gloves', 'fingerlösa', 'fingerless', 'halvhandskar',
          'mittens', 'vantar', 'tumvantar', 'wool mittens',
          'ski gloves', 'skidhandskar', 'snowboard gloves',
          'running gloves', 'löparhandskar', 'sport gloves',
          'opera gloves', 'långa handskar', 'evening gloves', 'elbow length',
          
          // === PLÅNBÖCKER ===
          'plånbok', 'wallet', 'portmonnä', 'purse',
          'läder plånbok', 'leather wallet', 'bi-fold', 'bifold',
          'tri-fold', 'trifold', 'long wallet', 'lång plånbok',
          'zip wallet', 'dragkedja plånbok', 'zip around',
          'card holder', 'korthållare', 'card case', 'kortfodral',
          'money clip', 'sedelklämma', 'slim wallet', 'smal plånbok',
          'travel wallet', 'reseplånbok', 'passport holder', 'passfodral',
          'coin purse', 'myntfack', 'pouch', 'key wallet', 'nyckelfodral',
          
          // === HÅR ACCESSOARER ===
          'hårspänne', 'hair clip', 'barrette', 'bobby pin',
          'hårklämmor', 'hair claws', 'claw clip', 'klämma',
          'hårnålar', 'hair pins', 'u-pins', 'bobby pins',
          'hårband', 'headband', 'alice band', 'padded headband',
          'scrunchie', 'scrunchies', 'hair tie', 'hårsnodd', 'hårsnoddar',
          'hårrosett', 'hair bow', 'bow', 'rosett',
          'hårring', 'hair ring', 'hair cuff', 'ponytail cuff',
          'bandana', 'silk scarf', 'hair scarf', 'hårscarf',
          'tiara', 'diadem', 'hair crown', 'huvudbonad',
          'fascinator', 'cocktail hat', 'headpiece',
          
          // === TECH ACCESSOARER ===
          'airpods', 'airpods fodral', 'airpods case', 'earbud case',
          'mobilskal', 'phone case', 'iphone case', 'telefonfodral',
          'laptop sleeve', 'laptop fodral', 'macbook case',
          'smartwatch band', 'apple watch band', 'watch strap',
          'charging cable', 'laddare', 'power bank', 'portable charger',
          'bluetooth speaker', 'högtalare', 'portable speaker',
          'camera strap', 'kamerarem', 'neck strap',
          
          // === ÖVRIGT ===
          'paraply', 'umbrella', 'compact umbrella', 'fällbart paraply',
          'parasoll', 'sun umbrella', 'beach umbrella',
          'nyckelring', 'keychain', 'key ring', 'lanyard',
          'labubu', 'pop mart', 'bag charm', 'väsk berlock',
          'brosch', 'brooch', 'pin', 'lapel pin', 'enamel pin',
          'badge', 'märke', 'button', 'knapp',
          'hängslen', 'suspenders', 'braces', 'clip-on suspenders',
          'manschettknappar', 'cufflinks', 'cuff links',
          'näsduk', 'handkerchief', 'pocket square',
          'cigarettetui', 'cigarette case', 'card case',
          'kompakt spegel', 'compact mirror', 'pocket mirror',
          'blomma', 'boutonniere', 'corsage', 'flower pin'
        ],
        descriptive: [
          // === PASSFORM - STORLEK ===
          'oversize', 'oversized', 'baggy', 'loose', 'lös', 'vid', 'rymlig',
          'fitted', 'figurnära', 'tajt', 'tight', 'tight fit', 'body con', 'bodycon',
          'slim', 'slim fit', 'smal', 'slimmad', 'narrow', 'tapered',
          'regular', 'regular fit', 'normal', 'standard', 'klassisk passform',
          'relaxed', 'relaxed fit', 'avslappnad', 'ledig', 'casual fit',
          'boxy', 'boxig', 'fyrkantig', 'straight', 'rak',
          'cropped', 'croppad', 'kort', 'förkortad', 'kortare', 'avkortad',
          'longline', 'lång', 'förlängd', 'extra lång', 'extended',
          'petite', 'kort passform', 'tall', 'lång passform',
          'plus size', 'plus', 'curvy', 'curve',
          
          // === PASSFORM - JEANS SPECIFIKT ===
          'skinny', 'super skinny', 'ultra skinny', 'spray on', 'skin tight',
          'slim fit', 'slim straight', 'slim tapered',
          'straight leg', 'raka ben', 'straight fit',
          'regular fit', 'regular straight', 'classic fit',
          'relaxed fit', 'relaxed straight', 'comfort fit',
          'loose fit', 'loose straight', 'baggy fit',
          'wide leg', 'vida ben', 'full leg', 'palazzo',
          'bootcut', 'boot cut', 'semi flare',
          'flare', 'flared', 'utsvängd', 'bell bottom', 'kick flare',
          'mom fit', 'mom', 'high rise relaxed',
          'dad fit', 'dad', 'loose tapered',
          'boyfriend', 'boyfriend fit', 'borrowed from the boys',
          'girlfriend', 'girlfriend fit',
          'barrel', 'barrel leg', 'balloon', 'balloon fit',
          'carrot', 'carrot fit', 'anti-fit',
          'cigarette', 'cigarette leg', 'ankle length',
          'jegging', 'jean legging', 'pull-on',
          
          // === MIDJA ===
          'high waist', 'hög midja', 'högmidjade', 'high rise', 'high-rise',
          'ultra high rise', 'super high waist', 'sky high',
          'mid waist', 'mellan midja', 'mid rise', 'mid-rise', 'normal midja',
          'low waist', 'låg midja', 'lågmidjade', 'low rise', 'low-rise',
          'ultra low rise', 'super low', 'hip hugger',
          'drop waist', 'dropped waist', 'sänkt midja',
          'paper bag', 'paperbag waist', 'belted waist',
          'elastic waist', 'resår', 'stretch waist', 'pull-on',
          
          // === LÄNGD ===
          'mini', 'kort', 'micro', 'ultra kort',
          'midi', 'knälång', 'knee length', 'mid-length',
          'maxi', 'lång', 'full length', 'floor length', 'golvlång',
          'ankle', 'ankellång', 'ankle length', 'cropped',
          '7/8', 'sju åttondels', 'three quarter', '3/4',
          'tea length', 'te-längd', 'ballerina length',
          
          // === ÄRMAR ===
          'short sleeve', 'kortärmad', 'kort ärm', 't-shirt ärm',
          'long sleeve', 'långärmad', 'lång ärm',
          'sleeveless', 'ärmlös', 'utan ärmar',
          'cap sleeve', 'liten ärm', 'mini ärm',
          '3/4 sleeve', 'trekvarts ärm', 'bracelet sleeve',
          'puff sleeve', 'puffärm', 'balloon sleeve', 'ballongärm',
          'bishop sleeve', 'bishop ärm', 'poet sleeve',
          'bell sleeve', 'vid ärm', 'flare sleeve', 'trumpet sleeve',
          'raglan', 'raglan ärm', 'raglan sleeve',
          'dolman', 'dolman sleeve', 'batwing', 'fladdermusärm',
          'cold shoulder', 'öppna axlar', 'cutout shoulder',
          'off-shoulder', 'bar axel', 'bardot',
          'one-shoulder', 'en axel', 'asymmetric',
          'halter', 'halterneck', 'nackband',
          
          // === HALS & URRINGNING ===
          'crew neck', 'rund hals', 'crewneck', 'round neck',
          'v-neck', 'v-ringad', 'v-hals', 'deep v',
          'scoop neck', 'u-ringad', 'u-hals', 'low cut',
          'boat neck', 'båthals', 'bateau', 'slash neck',
          'square neck', 'fyrkantig hals', 'carré',
          'sweetheart', 'hjärtformad', 'sweetheart neckline',
          'halter neck', 'halter', 'nackband',
          'high neck', 'hög hals', 'mock neck', 'funnel neck',
          'turtleneck', 'polokrage', 'roll neck', 'polo neck',
          'cowl neck', 'vattenfallskrage', 'draped neck',
          'collar', 'krage', 'spread collar', 'button-down collar',
          'mandarin collar', 'mao krage', 'band collar', 'grandad',
          'peter pan collar', 'rund krage', 'flat collar',
          'pussy bow', 'rosett', 'tie neck', 'knytband',
          'keyhole', 'nyckelhål', 'cutout', 'cut-out',
          'strapless', 'axelbandslös', 'bandeau',
          'plunge', 'djup urringning', 'plunging neckline',
          
          // === DETALJER ===
          'button-down', 'knäppt', 'button front', 'button up',
          'zip-up', 'dragkedja', 'zip front', 'full zip', 'half zip',
          'pull-over', 'dra över huvudet', 'pullover',
          'wrap', 'omlott', 'wrap around', 'tie waist',
          'belted', 'skärp', 'self-tie belt', 'bältad',
          'pleated', 'plisserad', 'veckad', 'knife pleat', 'box pleat',
          'ruched', 'rynkad', 'shirred', 'smockad', 'gathered',
          'ruffle', 'volang', 'frill', 'frills', 'volanger',
          'tiered', 'våningar', 'layered', 'lager',
          'asymmetric', 'asymmetrisk', 'uneven hem',
          'raw hem', 'rå fåll', 'frayed', 'fransig', 'distressed',
          'ripped', 'sliten', 'destroyed', 'shredded', 'hål',
          'patch', 'lapp', 'patchwork', 'patches',
          'embroidered', 'broderad', 'brodyr', 'stitched',
          'beaded', 'pärlbroderad', 'sequined', 'paljetter',
          'studded', 'nitar', 'rhinestone', 'crystal',
          'lace trim', 'spetskant', 'crochet trim', 'virkad kant',
          'contrast', 'kontrast', 'color block', 'färgblock',
          'piping', 'kantband', 'binding', 'contrast piping',
          
          // === MATERIAL & TEXTUR ===
          'ribbed', 'ribbad', 'ribbstickad', 'rib knit',
          'cable knit', 'flätstickad', 'cable', 'aran',
          'chunky knit', 'grovstickad', 'thick knit', 'heavy knit',
          'fine knit', 'fintstickad', 'lightweight knit',
          'waffle', 'våffla', 'waffle knit', 'honeycomb',
          'terry', 'frotté', 'towel', 'loop back',
          'velour', 'velours', 'velvet', 'sammet', 'crushed velvet',
          'satin', 'satäng', 'silk', 'silke', 'silky',
          'sheer', 'genomskinlig', 'transparent', 'see-through',
          'mesh', 'nät', 'net', 'fishnet',
          'lace', 'spets', 'all-over lace', 'lace overlay',
          'crochet', 'virkad', 'handmade', 'macrame',
          'quilted', 'quiltad', 'vadderad', 'padded',
          'washed', 'tvättad', 'stonewashed', 'acid wash', 'bleached',
          'coated', 'behandlad', 'waxed', 'vaxad', 'oiled',
          'distressed', 'sliten look', 'worn in', 'vintage wash',
          
          // === MÖNSTER ===
          'solid', 'enfärgad', 'plain', 'basic',
          'striped', 'randig', 'stripes', 'ränder', 'pinstripe', 'breton',
          'checked', 'rutig', 'checkered', 'plaid', 'tartan', 'gingham',
          'houndstooth', 'hundtand', 'pepita', 'dogtooth',
          'herringbone', 'fiskbensmönster', 'chevron',
          'polka dot', 'prickig', 'dots', 'spotted',
          'floral', 'blommig', 'flower print', 'botanical',
          'animal print', 'djurmönster', 'leopard', 'zebra', 'snake', 'cow',
          'camo', 'kamouflage', 'military print', 'army',
          'paisley', 'paisley mönster',
          'geometric', 'geometrisk', 'abstract', 'abstrakt',
          'tropical', 'tropiskt', 'palm', 'hawaiian',
          'tie-dye', 'batik', 'ombre', 'gradient', 'dip-dye',
          'logo', 'logga', 'branded', 'monogram',
          'graphic', 'grafiskt', 'print', 'tryck', 'slogan',
          
          // === STILAR & ESTETIK ===
          'vintage', 'retro', 'antik', 'second hand',
          'y2k', '2000-tal', 'early 2000s', 'millennium',
          'minimalist', 'minimalistisk', 'minimal', 'clean',
          'maximalist', 'maximalistisk', 'bold', 'statement',
          'quiet luxury', 'stealth wealth', 'understated',
          'old money', 'preppy', 'ivy league', 'collegiate',
          'new money', 'flashy', 'logo heavy',
          'clean girl', 'effortless', 'no makeup makeup',
          'mob wife', 'mafia wife', 'leopard aesthetic',
          'coastal', 'coastal grandmother', 'hamptons', 'nautical',
          'scandi', 'scandinavian', 'nordic', 'swedish style',
          'parisian', 'french girl', 'effortless chic',
          'italian', 'la dolce vita', 'mediterranean',
          'boho', 'bohemian', 'hippie', 'free spirit',
          'grunge', '90s grunge', 'alternative',
          'punk', 'punk rock', 'edgy', 'rebellious',
          'goth', 'gothic', 'dark', 'all black',
          'streetwear', 'urban', 'hypebeast', 'sneakerhead',
          'athleisure', 'sporty', 'athletic', 'gym to street',
          'gorpcore', 'outdoor', 'hiking aesthetic', 'technical',
          'normcore', 'basic', 'everyday', 'casual',
          'cottagecore', 'romantic', 'pastoral', 'countryside',
          'dark academia', 'light academia', 'scholarly',
          'fairycore', 'whimsical', 'ethereal', 'dreamy',
          'coquette', 'feminine', 'girly', 'soft girl',
          'tomboy', 'androgynous', 'gender neutral', 'unisex',
          'business casual', 'smart casual', 'office', 'work',
          'formal', 'dressy', 'elegant', 'sophisticated',
          'party', 'going out', 'night out', 'clubbing',
          'bridal', 'wedding', 'special occasion', 'event'
        ]
      },
      en: {
        colors: ['white', 'black', 'grey', 'gray', 'dark grey', 'light grey',
          'blue', 'dark blue', 'navy blue', 'navy', 'light blue', 'sky blue',
          'red', 'dark red', 'burgundy', 'wine red', 'green', 'dark green', 'olive', 'khaki',
          'brown', 'dark brown', 'light brown', 'cognac', 'camel', 'beige', 'tan', 'sand',
          'pink', 'purple', 'yellow', 'orange', 'cream', 'off-white', 'ivory'],
        materials: ['leather', 'suede', 'denim', 'cotton', 'linen', 'wool', 'cashmere',
          'silk', 'velvet', 'fleece', 'nylon', 'canvas', 'tweed', 'corduroy'],
        tops: ['t-shirt', 'tee', 'sweater', 'shirt', 'blouse', 'hoodie', 'sweatshirt', 'tank top',
          'polo', 'cardigan', 'knit sweater', 'oversized sweater', 'turtleneck', 'crewneck',
          // Modern terms
          'cropped sweater', 'cropped tee', 'crop top', 'baby tee', 'shrunken tee',
          'bodysuit', 'mesh top', 'ribbed top', 'ribbed tank', 'cami', 'camisole',
          'off-shoulder top', 'one-shoulder', 'halter top', 'tube top', 'bralette top',
          'basic tee', 'oversized tee', 'boxy tee', 'longline tee', 'fitted tee',
          'zip hoodie', 'zip-up hoodie', 'fleece', 'teddy sweater', 'sherpa pullover',
          'crochet top', 'knit vest', 'sweater vest', 'vest top', 'short sleeve shirt'],
        bottoms: ['jeans', 'pants', 'trousers', 'chinos', 'shorts', 'skirt', 'dress pants', 'joggers', 'cargo pants',
          'black jeans', 'blue jeans', 'wide leg pants', 'slim jeans', 'mom jeans', 'straight jeans',
          // Modern terms - Jeans
          'low rise jeans', 'low waisted jeans', 'high rise jeans', 'high waisted jeans', 'mid rise jeans',
          'bootcut jeans', 'flare jeans', 'bell bottoms', 'baggy jeans', 'balloon jeans',
          'wide leg jeans', 'dad jeans', 'boyfriend jeans', 'skinny jeans', 'regular jeans',
          'light wash jeans', 'dark wash jeans', 'acid wash', 'raw denim', 'distressed jeans', 'ripped jeans',
          // Modern terms - Pants
          'low rise pants', 'wide leg trousers', 'pleated pants', 'tailored trousers',
          'linen pants', 'parachute pants', 'track pants', 'sweatpants', 'cargos',
          'leather pants', 'faux leather pants', 'vinyl pants', 'suit pants',
          // Modern terms - Skirts
          'mini skirt', 'midi skirt', 'maxi skirt', 'pleated skirt', 'a-line skirt',
          'denim skirt', 'jean skirt', 'leather skirt', 'slip skirt', 'satin skirt', 'tennis skirt'],
        jackets: ['jacket', 'coat', 'blazer', 'trench coat', 'parka',
          'bomber jacket', 'leather jacket', 'denim jacket', 'puffer jacket', 'winter jacket', 'rain jacket',
          // Modern terms
          'cropped jacket', 'cropped blazer', 'oversized blazer', 'oversized coat',
          'puffer vest', 'quilted jacket', 'shacket', 'shirt jacket', 'overshirt',
          'varsity jacket', 'letterman jacket', 'trucker jacket', 'utility jacket', 'field jacket',
          'teddy coat', 'fleece jacket', 'sherpa jacket', 'faux fur coat', 'fur coat',
          'windbreaker', 'anorak', 'softshell', 'hardshell', 'gore-tex jacket',
          'long coat', 'short coat', 'double breasted', 'single breasted', 'wrap coat'],
        shoes: ['shoes', 'sneakers', 'boots', 'loafers', 'sandals', 'heels', 'high heels',
          'chelsea boots', 'ankle boots', 'running shoes', 'trainers', 'white sneakers', 'black boots',
          // Modern terms
          'chunky sneakers', 'platform sneakers', 'platform shoes', 'dad sneakers',
          'retro sneakers', 'vintage sneakers', 'tennis shoes', 'court sneakers',
          'ballet flats', 'ballerinas', 'mary janes', 'platform loafers',
          'mules', 'slip-ons', 'slides', 'flip flops', 'espadrilles', 'clogs',
          'cowboy boots', 'western boots', 'knee high boots', 'thigh high boots', 'over the knee boots',
          'combat boots', 'biker boots', 'hiking boots', 'lug sole boots',
          'kitten heels', 'stilettos', 'block heels', 'wedges', 'platform heels',
          'slingbacks', 'pumps', 'oxfords', 'brogues', 'derbys', 'monk straps',
          'ugg boots', 'shearling boots', 'canvas sneakers', 'mesh sneakers'],
        accessories: [
          // Head
          'beanie', 'cap', 'hat', 'beret', 'headband', 'sun hat', 'bucket hat',
          // Neck & Scarf
          'scarf', 'shawl', 'snood', 'bandana',
          // Jewelry - Necklaces
          'necklace', 'gold necklace', 'silver necklace', 'chain', 'gold chain', 'silver chain', 'pearl necklace', 'choker', 'pendant',
          // Jewelry - Bracelets
          'bracelet', 'gold bracelet', 'silver bracelet', 'pearl bracelet', 'leather bracelet', 'tennis bracelet', 'charm bracelet', 'bangle',
          // Jewelry - Earrings & Rings
          'earrings', 'gold earrings', 'silver earrings', 'hoops', 'studs', 'ring', 'gold ring', 'silver ring', 'signet ring',
          // Watches
          'watch', 'gold watch', 'silver watch', 'black watch', 'apple watch', 'smartwatch',
          // Eyewear
          'sunglasses', 'glasses', 'aviators', 'wayfarers', 'cat eye sunglasses',
          // Bags
          'bag', 'handbag', 'shoulder bag', 'crossbody bag', 'tote bag', 'clutch', 'pouch',
          'backpack', 'mini backpack', 'laptop bag', 'weekender', 'gym bag', 'fanny pack', 'belt bag',
          // Belts
          'belt', 'leather belt', 'black belt', 'brown belt', 'gold buckle', 'silver buckle',
          // Gloves
          'gloves', 'leather gloves', 'black gloves', 'mittens',
          // Other accessories
          'wallet', 'card holder', 'keychain', 'key ring', 'labubu', 'charm',
          'airpods', 'airpods case', 'phone case', 'hair clip', 'scrunchie', 'hair claw'
        ],
        descriptive: ['oversized', 'cropped', 'fitted', 'loose fit', 'slim fit', 'relaxed fit',
          'high waisted', 'low waisted', 'straight leg', 'wide leg', 'knitted', 'striped', 'plaid',
          // Modern terms
          'baggy', 'boxy', 'tapered', 'bootcut', 'flare', 'balloon', 'barrel leg',
          'regular fit', 'skinny', 'ultra skinny', 'super slim', 'mom fit', 'dad fit',
          'longline', 'shortened', 'tailored', 'structured', 'unstructured',
          'ribbed', 'mesh', 'sheer', 'see-through', 'lace', 'eyelet',
          'distressed', 'ripped', 'raw hem', 'frayed', 'cut-off',
          'pleated', 'tiered', 'ruffle', 'puff sleeve', 'balloon sleeve',
          'vintage', 'retro', 'y2k', 'minimalist', 'clean girl', 'quiet luxury', 'old money',
          'streetwear', 'athleisure', 'gorpcore', 'scandi style', 'coastal grandmother', 'mob wife']
      },
      es: {
        colors: ['blanco', 'blanca', 'negro', 'negra', 'gris', 'gris oscuro', 'gris claro',
          'azul', 'azul oscuro', 'azul marino', 'azul claro', 'celeste',
          'rojo', 'roja', 'burdeos', 'verde', 'verde oscuro', 'oliva', 'caqui',
          'marrón', 'marrón oscuro', 'marrón claro', 'cognac', 'camel', 'beige', 'arena',
          'rosa', 'morado', 'lila', 'amarillo', 'naranja', 'crema', 'hueso'],
        materials: ['cuero', 'piel', 'ante', 'denim', 'vaquero', 'algodón', 'lino', 'lana', 'cachemira',
          'seda', 'terciopelo', 'polar', 'nylon', 'lona', 'tweed', 'pana'],
        tops: ['camiseta', 'jersey', 'camisa', 'blusa', 'sudadera', 'sudadera con capucha', 'tirantes',
          'polo', 'cárdigan', 'jersey de punto', 'jersey oversize', 'cuello alto',
          // Términos modernos
          'crop top', 'camiseta corta', 'top corto', 'baby tee',
          'body', 'bodysuit', 'top de malla', 'top acanalado', 'camisola',
          'top sin hombros', 'top un hombro', 'halter', 'top tubo', 'bralette',
          'camiseta básica', 'camiseta oversize', 'camiseta boxy', 'top largo',
          'sudadera con cremallera', 'polar', 'teddy', 'chaleco de punto'],
        bottoms: ['vaqueros', 'jeans', 'pantalones', 'chinos', 'shorts', 'falda', 'pantalón de vestir', 'joggers',
          'vaqueros negros', 'vaqueros azules', 'pantalón ancho', 'vaqueros slim', 'mom jeans',
          // Términos modernos - Jeans
          'jeans de tiro bajo', 'low rise', 'jeans de tiro alto', 'high rise',
          'bootcut', 'flare', 'acampanados', 'baggy jeans', 'balloon jeans',
          'wide leg', 'dad jeans', 'boyfriend jeans', 'skinny jeans', 'regular',
          'jeans claros', 'jeans oscuros', 'desgastados', 'rotos', 'ripped',
          // Términos modernos - Pantalones
          'pantalón tiro bajo', 'pantalón ancho', 'plisados', 'sastre',
          'pantalón de lino', 'parachute', 'cargo', 'chándal',
          'pantalón de cuero', 'vinilo', 'piel sintética',
          // Términos modernos - Faldas
          'minifalda', 'falda midi', 'falda maxi', 'falda plisada', 'falda línea a',
          'falda vaquera', 'falda de cuero', 'slip skirt', 'falda satén', 'falda tenis'],
        jackets: ['chaqueta', 'abrigo', 'blazer', 'gabardina', 'parka',
          'bomber', 'chaqueta de cuero', 'chaqueta vaquera', 'plumas', 'chaqueta de invierno',
          // Términos modernos
          'chaqueta corta', 'blazer corto', 'blazer oversize', 'abrigo oversize',
          'chaleco acolchado', 'chaqueta acolchada', 'shacket', 'sobrecamisa',
          'varsity', 'chaqueta universitaria', 'trucker', 'utility',
          'teddy', 'polar', 'sherpa', 'pelo sintético',
          'cortavientos', 'chubasquero', 'softshell', 'gore-tex',
          'abrigo largo', 'abrigo corto', 'doble botonadura', 'cruzado'],
        shoes: ['zapatos', 'zapatillas', 'botas', 'mocasines', 'sandalias', 'tacones',
          'botines', 'botas chelsea', 'deportivas', 'zapatillas blancas', 'botas negras',
          // Términos modernos
          'chunky sneakers', 'plataformas', 'dad sneakers',
          'zapatillas retro', 'zapatillas vintage', 'tenis',
          'bailarinas', 'mary janes', 'mocasines plataforma',
          'mules', 'slip-on', 'slides', 'chanclas', 'alpargatas', 'zuecos',
          'botas cowboy', 'botas western', 'botas altas', 'botas mosqueteras',
          'botas militares', 'botas biker', 'botas montaña', 'suela track',
          'kitten heels', 'stilettos', 'tacón bloque', 'cuñas', 'plataforma',
          'slingback', 'salones', 'oxford', 'brogues', 'mocasín',
          'ugg', 'borreguito', 'zapatillas lona', 'zapatillas malla'],
        accessories: [
          // Cabeza
          'gorro', 'gorra', 'sombrero', 'boina', 'diadema', 'sombrero de sol',
          // Cuello & Bufanda
          'bufanda', 'chal', 'pañuelo', 'bandana',
          // Joyería - Collares
          'collar', 'collar de oro', 'collar de plata', 'cadena', 'cadena de oro', 'cadena de plata', 'collar de perlas', 'gargantilla', 'colgante',
          // Joyería - Pulseras
          'pulsera', 'pulsera de oro', 'pulsera de plata', 'pulsera de perlas', 'pulsera de cuero', 'pulsera de tenis', 'brazalete',
          // Joyería - Pendientes & Anillos
          'pendientes', 'pendientes de oro', 'pendientes de plata', 'aros', 'anillo', 'anillo de oro', 'anillo de plata', 'sello',
          // Relojes
          'reloj', 'reloj de oro', 'reloj de plata', 'reloj negro', 'apple watch', 'smartwatch',
          // Gafas
          'gafas de sol', 'gafas', 'aviadores', 'wayfarers',
          // Bolsos
          'bolso', 'bolso de mano', 'bolso de hombro', 'bandolera', 'tote bag', 'clutch', 'neceser',
          'mochila', 'mini mochila', 'bolsa de portátil', 'bolsa de fin de semana', 'bolsa de deporte', 'riñonera',
          // Cinturones
          'cinturón', 'cinturón de cuero', 'cinturón negro', 'cinturón marrón', 'hebilla dorada', 'hebilla plateada',
          // Guantes
          'guantes', 'guantes de cuero', 'guantes negros', 'manoplas',
          // Otros accesorios
          'cartera', 'tarjetero', 'llavero', 'labubu', 'charm',
          'airpods', 'funda de airpods', 'funda de móvil', 'pinza de pelo', 'scrunchie', 'horquilla'
        ],
        descriptive: ['oversize', 'crop', 'ajustado', 'holgado', 'slim fit', 'relaxed fit',
          'tiro alto', 'tiro bajo', 'recto', 'ancho', 'punto', 'rayas', 'cuadros',
          // Términos modernos
          'baggy', 'boxy', 'tapered', 'bootcut', 'flare', 'balloon', 'barril',
          'regular', 'skinny', 'ceñido', 'mom fit', 'dad fit',
          'largo', 'corto', 'sastre', 'estructurado', 'desestructurado',
          'acanalado', 'malla', 'transparente', 'encaje',
          'desgastado', 'roto', 'deshilachado', 'cortado',
          'plisado', 'volantes', 'manga abullonada', 'manga globo',
          'vintage', 'retro', 'y2k', 'minimalista', 'clean girl', 'quiet luxury', 'old money',
          'streetwear', 'athleisure', 'gorpcore', 'scandi', 'coastal']
      }
    };

    // Generate category-specific suggestions for a language
    const generateSuggestionsByCategory = (lang) => {
      const db = clothingByLang[lang] || clothingByLang.sv;
      
      // Just return the base items - no combinations (much faster!)
      // Users can type their own combinations like "svart hoodie"
      return {
        top: [...db.tops, ...db.colors, ...db.descriptive].map(s => s.toLowerCase()),
        bottom: [...db.bottoms, ...db.colors, ...db.descriptive].map(s => s.toLowerCase()),
        jacket: [...db.jackets, ...db.colors, ...db.descriptive].map(s => s.toLowerCase()),
        shoes: [...db.shoes, ...db.colors, ...sharedCombos.filter(c => 
          c.includes('nike') || c.includes('adidas') || c.includes('new balance') || 
          c.includes('converse') || c.includes('vans') || c.includes('timberland') || 
          c.includes('dr martens') || c.includes('blundstone')
        )].map(s => s.toLowerCase()),
        accessories: [...db.accessories, ...db.colors, ...sharedCombos.filter(c => 
          c.includes('louis vuitton') || c.includes('gucci') || c.includes('chanel') || 
          c.includes('rolex') || c.includes('omega') || c.includes('apple watch')
        )].map(s => s.toLowerCase())
      };
    };

    // Pre-generate suggestions for all languages by category
    const suggestionsByLangAndCategory = {
      sv: generateSuggestionsByCategory('sv'),
      en: generateSuggestionsByCategory('en'),
      es: generateSuggestionsByCategory('es')
    };


    // Multi-chip Autocomplete Component
    function AutoComplete({ value, onChange, placeholder, lang = 'sv', fieldType = 'top', userItems = [], onRemoveUserItem }) {
      const allCategories = suggestionsByLangAndCategory[lang] || suggestionsByLangAndCategory.sv;
      const suggestions = allCategories[fieldType] || [];
      const [inputValue, setInputValue] = useState('');
      const [isOpen, setIsOpen] = useState(false);
      const [filtered, setFiltered] = useState([]);
      const [highlightIndex, setHighlightIndex] = useState(0);
      const inputRef = useRef(null);
      const listRef = useRef(null);
      const debounceRef = useRef(null);

      // Parse chips from value (comma separated)
      const chips = value ? value.split(',').map(s => s.trim()).filter(s => s.length > 0) : [];

      // Optimized search with debounce and early exit
      useEffect(() => {
        // Clear previous timeout
        if (debounceRef.current) {
          clearTimeout(debounceRef.current);
        }

        // Require at least 2 characters to search
        if (!inputValue || inputValue.length < 2) {
          setIsOpen(false);
          setFiltered([]);
          return;
        }

        // Debounce: wait 150ms before searching
        debounceRef.current = setTimeout(() => {
          const query = inputValue.toLowerCase().trim();
          const maxResults = 8;
          const matches = [];
          
          // First: user's own items (max 4)
          const chipsLower = chips.map(c => c.toLowerCase());
          for (let i = 0; i < userItems.length && matches.length < 4; i++) {
            const item = userItems[i];
            const lower = item.toLowerCase();
            if (lower.includes(query) && !chipsLower.includes(lower)) {
              matches.push({ text: item, isUser: true, priority: lower.startsWith(query) ? 0 : 1 });
            }
          }
          
          // Sort user matches: startsWith first, then by length
          matches.sort((a, b) => a.priority - b.priority || a.text.length - b.text.length);
          
          // Second: standard suggestions with early exit
          const userItemsLower = userItems.map(u => u.toLowerCase());
          const startsWithMatches = [];
          const otherMatches = [];
          
          for (let i = 0; i < suggestions.length; i++) {
            // Early exit if we have enough
            if (startsWithMatches.length >= maxResults) break;
            
            const s = suggestions[i];
            const lower = s.toLowerCase();
            
            // Skip if already in user items or chips
            if (userItemsLower.includes(lower) || chipsLower.includes(lower)) continue;
            
            if (lower.startsWith(query)) {
              startsWithMatches.push(s);
            } else if (otherMatches.length < maxResults && lower.includes(query)) {
              otherMatches.push(s);
            }
          }
          
          // Combine and limit results
          const remaining = maxResults - matches.length;
          const standardMatches = [...startsWithMatches, ...otherMatches]
            .slice(0, remaining)
            .map(s => ({ text: s, isUser: false }));
          
          const finalMatches = [...matches.slice(0, 4), ...standardMatches];
          
          setFiltered(finalMatches);
          setIsOpen(finalMatches.length > 0);
          setHighlightIndex(0);
        }, 150);

        return () => {
          if (debounceRef.current) {
            clearTimeout(debounceRef.current);
          }
        };
      }, [inputValue, suggestions, userItems, chips]);

      const addChip = (text) => {
        const formatted = text.charAt(0).toUpperCase() + text.slice(1);
        if (chips.some(c => c.toLowerCase() === formatted.toLowerCase())) return;
        const newChips = [...chips, formatted];
        onChange(newChips.join(', '));
        setInputValue('');
        setIsOpen(false);
      };

      const removeChip = (index) => {
        const newChips = chips.filter((_, i) => i !== index);
        onChange(newChips.join(', '));
      };

      const handleSelect = (item) => {
        const text = item.text || item;
        addChip(text);
        inputRef.current?.focus();
      };

      const handleKeyDown = (e) => {
        if (e.key === 'Enter' && inputValue.trim()) {
          e.preventDefault();
          if (isOpen && filtered[highlightIndex]) {
            handleSelect(filtered[highlightIndex]);
          } else {
            addChip(inputValue.trim());
          }
        } else if (e.key === 'Backspace' && !inputValue && chips.length > 0) {
          removeChip(chips.length - 1);
        } else if (e.key === 'ArrowDown' && isOpen) {
          e.preventDefault();
          setHighlightIndex(i => Math.min(i + 1, filtered.length - 1));
        } else if (e.key === 'ArrowUp' && isOpen) {
          e.preventDefault();
          setHighlightIndex(i => Math.max(i - 1, 0));
        } else if (e.key === 'Escape') {
          setIsOpen(false);
        } else if (e.key === 'Tab' && isOpen && filtered[highlightIndex]) {
          e.preventDefault();
          handleSelect(filtered[highlightIndex]);
        }
      };

      const handleRemoveUserItem = (e, text) => {
        e.stopPropagation();
        e.preventDefault();
        if (onRemoveUserItem) {
          onRemoveUserItem(text);
        }
      };

      return (
        <div className="autocomplete-wrapper">
          <div className="chip-input-container">
            {chips.map((chip, index) => (
              <span key={index} className="chip">
                {chip}
                <button 
                  type="button" 
                  className="chip-remove" 
                  onClick={() => removeChip(index)}
                >
                  ×
                </button>
              </span>
            ))}
            <input
              ref={inputRef}
              type="text"
              value={inputValue}
              onChange={(e) => setInputValue(e.target.value)}
              onKeyDown={handleKeyDown}
              onFocus={() => inputValue && inputValue.length >= 2 && filtered.length > 0 && setIsOpen(true)}
              onBlur={() => setTimeout(() => setIsOpen(false), 200)}
              placeholder={chips.length === 0 ? placeholder : ''}
              autoComplete="off"
              autoCorrect="off"
              autoCapitalize="off"
              spellCheck="false"
              className="chip-input"
            />
          </div>
          {isOpen && filtered.length > 0 && (
            <ul className="autocomplete-list" ref={listRef}>
              {filtered.map((item, index) => (
                <li
                  key={item.text || item}
                  className={`autocomplete-item ${index === highlightIndex ? 'highlighted' : ''} ${item.isUser ? 'user-item' : ''}`}
                  onMouseDown={() => handleSelect(item)}
                  onMouseEnter={() => setHighlightIndex(index)}
                >
                  {item.isUser && <span className="user-star">★</span>}
                  <span className="autocomplete-text">{item.text || item}</span>
                  {item.isUser && onRemoveUserItem && (
                    <button 
                      type="button"
                      className="user-item-remove"
                      onMouseDown={(e) => handleRemoveUserItem(e, item.text)}
                    >
                      ×
                    </button>
                  )}
                </li>
              ))}
            </ul>
          )}
        </div>
      );
    }

    const translations = {
      sv: {
        greeting: { morning: 'God morgon', afternoon: 'God eftermiddag', evening: 'God kväll', night: 'God natt' },
        title: 'Garderob.',
        appName: 'Garderob.',
        total: 'Totalt',
        thisWeek: 'Denna vecka',
        favorites: 'Favoriter',
        filter: 'Filtrera',
        all: 'Alla',
        yourOutfits: 'Dina outfits',
        outfits: 'outfits',
        newOutfit: 'Ny outfit',
        editOutfit: 'Redigera outfit',
        outfitName: 'Namn',
        selectOccasion: 'Välj tillfälle',
        top: 'Överdel',
        bottom: 'Underdel',
        jacket: 'Jacka',
        shoes: 'Skor',
        accessories: 'Accessoarer',
        addImage: 'Lägg till bild',
        removeImage: 'Ta bort bild',
        version: 'Version',
        cancel: 'Avbryt',
        save: 'Spara outfit',
        update: 'Uppdatera',
        delete: 'Radera outfit',
        edit: 'Redigera',
        back: 'Tillbaka',
        noOutfits: 'Din garderob är tom',
        pressToStart: 'Lägg till din första outfit och börja bygga din stilguide',
        addFirst: 'Lägg till outfit',
        items: 'plagg',
        details: 'Detaljer',
        cantDecide: 'Kan inte välja?',
        pickForMe: 'Välj åt mig',
        spinning: 'Väljer...',
        todaysPick: 'Dagens val',
        wearThis: 'Kör på denna!',
        tryAgain: 'Slumpa igen',
        wearToday: 'Bär idag',
        lastWorn: 'Senast',
        daysAgo: 'dagar sen',
        today: 'Idag',
        yesterday: 'Igår',
        neverWorn: 'Aldrig använd',
        confirmDelete: 'Radera outfit?',
        confirmDeleteText: 'Är du säker? Detta går inte att ångra.',
        yes: 'Ja, radera',
        no: 'Avbryt',
        worn: 'Använd!',
        undoWear: 'Ångra',
        inspiration: 'Se inspiration på Pinterest',
        settings: 'Inställningar',
        yourName: 'Ditt namn',
        yourNamePlaceholder: 'Skriv ditt namn',
        yourCity: 'Din stad',
        yourCityPlaceholder: 'T.ex. Stockholm',
        resetAll: 'Börja om',
        resetAllDesc: 'Raderar alla outfits och sparade plagg',
        resetConfirm: 'Börja om?',
        resetConfirmText: 'Detta raderar alla dina outfits och sparade plagg. Kan inte ångras.',
        resetYes: 'Ja, börja om',
        language: 'Språk',
        saveSettings: 'Spara',
        // Wardrobe translations
        wardrobe: {
          title: 'Dina plagg',
          items: 'plagg',
          empty: 'Din garderob är tom',
          emptyDesc: 'Lägg till dina plagg för att få bättre outfit-förslag',
          addItem: 'Lägg till plagg',
          addMethod: 'Hur vill du lägga till?',
          kickstart: 'Kickstarta',
          kickstartDesc: '60 sek quiz → hel garderob',
          voice: 'Röst',
          voiceDesc: 'Prata och lägg till',
          brands: 'Märken',
          brandsDesc: 'Välj bland dina märken',
          camera: 'Ta bild',
          cameraDesc: 'Kommer snart...',
          manual: 'Manuell',
          manualDesc: 'Fyll i själv',
          // Kickstart
          kickstartTitle: 'Kickstarta din garderob',
          kickstartIntro: '60 sekunder → Hela garderoben',
          step1: 'Vilken vibe är du?',
          step2: 'Dina go-to färger?',
          step3: 'Vilka märken äger du?',
          step4: 'Hur stor är din garderob?',
          styles: {
            minimalist: 'Minimalist',
            streetwear: 'Streetwear', 
            classic: 'Klassisk',
            scandi: 'Scandi',
            y2k: 'Y2K',
            athleisure: 'Athleisure',
            mix: 'Mix av allt'
          },
          sizes: {
            minimal: 'Minimalist',
            minimalCount: '~20-30 plagg',
            minimalDesc: 'Bara det jag verkligen använder',
            medium: 'Lagom',
            mediumCount: '~40-60 plagg', 
            mediumDesc: 'En bra blandning',
            large: 'Samlare',
            largeCount: '~80+ plagg',
            largeDesc: 'Jag älskar kläder'
          },
          generating: 'Skapar din garderob...',
          generated: 'Din garderob är klar!',
          basedOn: 'Baserat på',
          quickEdit: 'Tryck för att ta bort, håll för att ändra',
          looksGood: 'Ser bra ut!',
          adjust: 'Finjustera',
          // Voice
          voiceTitle: 'Berätta vad du har',
          voiceHint: 'T.ex. "Jag har en svart Nike hoodie och två par Levi\'s jeans"',
          voiceListening: 'Lyssnar...',
          voiceTap: 'Tryck och prata',
          voiceFound: 'Hittade dessa plagg:',
          voiceConfirm: 'Lägg till alla',
          voiceRetry: 'Försök igen',
          // Brands  
          brandsTitle: 'Vilka märken har du?',
          brandsSelect: 'Välj märken du äger',
          brandsNext: 'Vad har du från',
          brandsTap: 'Tryck för att lägga till',
          brandsHold: 'Håll för antal & färg',
          brandsDone: 'Klar',
          // Manual
          manualTitle: 'Lägg till plagg',
          category: 'Kategori',
          type: 'Typ',
          brand: 'Märke',
          color: 'Färg',
          fit: 'Passform',
          size: 'Storlek',
          saveItem: 'Spara plagg',
          // Categories
          categories: {
            tops: 'Överdelar',
            bottoms: 'Underdelar',
            jackets: 'Jackor',
            shoes: 'Skor',
            accessories: 'Accessoarer'
          },
          // Coming soon
          comingSoon: 'Kommer snart',
          comingSoonDesc: 'AI-bildanalys kommer i en framtida uppdatering. Då kan du fota dina plagg och få dem automatiskt identifierade!',
          // Item types
          types: {
            tshirt: 'T-shirt',
            shirt: 'Skjorta',
            hoodie: 'Hoodie',
            sweater: 'Tröja',
            cardigan: 'Cardigan',
            polo: 'Polo',
            tank: 'Linne',
            blouse: 'Blus',
            jeans: 'Jeans',
            chinos: 'Chinos',
            trousers: 'Byxor',
            shorts: 'Shorts',
            skirt: 'Kjol',
            joggers: 'Joggers',
            leggings: 'Leggings',
            jacket: 'Jacka',
            coat: 'Kappa',
            blazer: 'Blazer',
            puffer: 'Dunjacka',
            denim: 'Jeansjacka',
            leather: 'Skinnjacka',
            sneakers: 'Sneakers',
            boots: 'Boots',
            loafers: 'Loafers',
            sandals: 'Sandaler',
            heels: 'Klackar',
            watch: 'Klocka',
            bag: 'Väska',
            cap: 'Keps',
            sunglasses: 'Solglasögon',
            jewelry: 'Smycken',
            scarf: 'Halsduk',
            belt: 'Bälte'
          },
          // Fits / Passform
          fits: {
            slim: 'Slim',
            regular: 'Regular',
            relaxed: 'Relaxed',
            oversized: 'Oversized',
            wide: 'Wide',
            bootcut: 'Bootcut',
            skinny: 'Skinny',
            loose: 'Loose',
            cropped: 'Cropped',
            tailored: 'Tailored',
            straight: 'Straight',
            tapered: 'Tapered'
          },
          // Edit mode
          editMode: 'Redigera',
          deleteMode: 'Ta bort',
          doneEditing: 'Klar',
          editItem: 'Redigera plagg',
          itemName: 'Namn på plagg',
          confirmDeleteItem: 'Radera plagg?',
          confirmDeleteItemText: 'Är du säker på att du vill radera detta plagg?',
          voiceEdit: 'Tryck för att redigera',
          voiceConfirmText: 'Stämmer detta?'
        },
        weatherTip: {
          freezing: [
            'Kallt! Dags för vinterjacka 🥶',
            'Brrr! Glöm inte vantar och mössa',
            'Iskallt ute – klä dig varmt! 🧊',
            'Minusgrader! Lager på lager idag',
            'Kylan biter – dunjacka är ett måste 🧥'
          ],
          cold: [
            'Ta på dig en varm jacka',
            'Lite kyligt – perfekt för en hoodie under jackan',
            'Rätt skönt väder för en mysig kappa',
            'Tänk lager – det är svalt ute 🍂',
            'En tjock tröja + jacka funkar bra idag'
          ],
          cool: [
            'En lätt jacka passar bra',
            'Perfekt väder för en skjortjacka',
            'Lagom temperatur – kanske en tunn jacka',
            'Skönt väder! En cardigan kan räcka',
            'Inte för kallt, inte för varmt – sweet spot! 👌'
          ],
          warm: [
            'Perfekt väder utan jacka ☀️',
            'Sommarvibbar! T-shirt räcker gott',
            'Skönt och varmt – njut! 🌞',
            'Dags för solglasögon och lätta kläder',
            'Strålande väder – skippa jackan idag ✨'
          ]
        },
        occasions: ['Vardag', 'Jobb', 'Fest', 'Date', 'Träning', 'Annat'],
        chooseTheme: 'Välj tema',
        chooseThemeSubtitle: 'Anpassa din upplevelse',
        themes: { standard: 'Standard', rose: 'Rosa', sky: 'Himmel', mint: 'Mint', lavender: 'Lavendel', peach: 'Persika', lemon: 'Citron', dark: 'Mörkt' }
      },
      en: {
        greeting: { morning: 'Good morning', afternoon: 'Good afternoon', evening: 'Good evening', night: 'Good night' },
        title: 'Garderob.',
        appName: 'Wardrobe.',
        total: 'Total',
        thisWeek: 'This week',
        favorites: 'Favorites',
        filter: 'Filter',
        all: 'All',
        yourOutfits: 'Your outfits',
        outfits: 'outfits',
        newOutfit: 'New outfit',
        editOutfit: 'Edit outfit',
        outfitName: 'Name',
        selectOccasion: 'Select occasion',
        top: 'Top',
        bottom: 'Bottom',
        jacket: 'Jacket',
        shoes: 'Shoes',
        accessories: 'Accessories',
        addImage: 'Add image',
        removeImage: 'Remove image',
        version: 'Version',
        cancel: 'Cancel',
        save: 'Save outfit',
        update: 'Update',
        delete: 'Delete outfit',
        edit: 'Edit',
        back: 'Back',
        noOutfits: 'Your wardrobe is empty',
        pressToStart: 'Add your first outfit and start building your style guide',
        addFirst: 'Add outfit',
        items: 'items',
        details: 'Details',
        cantDecide: "Can't decide?",
        pickForMe: 'Pick for me',
        spinning: 'Picking...',
        todaysPick: "Today's pick",
        wearThis: 'Wear this one!',
        tryAgain: 'Try again',
        wearToday: 'Wear today',
        lastWorn: 'Last worn',
        daysAgo: 'days ago',
        today: 'Today',
        yesterday: 'Yesterday',
        neverWorn: 'Never worn',
        confirmDelete: 'Delete outfit?',
        confirmDeleteText: 'Are you sure? This cannot be undone.',
        yes: 'Yes, delete',
        no: 'Cancel',
        worn: 'Worn!',
        undoWear: 'Undo',
        inspiration: 'Get inspiration on Pinterest',
        settings: 'Settings',
        yourName: 'Your name',
        yourNamePlaceholder: 'Enter your name',
        yourCity: 'Your city',
        yourCityPlaceholder: 'E.g. London',
        resetAll: 'Start over',
        resetAllDesc: 'Deletes all outfits and saved items',
        resetConfirm: 'Start over?',
        resetConfirmText: 'This will delete all your outfits and saved items. Cannot be undone.',
        resetYes: 'Yes, start over',
        language: 'Language',
        saveSettings: 'Save',
        // Wardrobe translations
        wardrobe: {
          title: 'Your clothes',
          items: 'items',
          empty: 'Your wardrobe is empty',
          emptyDesc: 'Add your clothes to get better outfit suggestions',
          addItem: 'Add item',
          addMethod: 'How do you want to add?',
          kickstart: 'Kickstart',
          kickstartDesc: '60 sec quiz → full wardrobe',
          voice: 'Voice',
          voiceDesc: 'Speak and add',
          brands: 'Brands',
          brandsDesc: 'Pick from your brands',
          camera: 'Camera',
          cameraDesc: 'Coming soon...',
          manual: 'Manual',
          manualDesc: 'Fill in yourself',
          // Kickstart
          kickstartTitle: 'Kickstart your wardrobe',
          kickstartIntro: '60 seconds → Full wardrobe',
          step1: 'What\'s your vibe?',
          step2: 'Your go-to colors?',
          step3: 'Which brands do you own?',
          step4: 'How big is your wardrobe?',
          styles: {
            minimalist: 'Minimalist',
            streetwear: 'Streetwear',
            classic: 'Classic',
            scandi: 'Scandi',
            y2k: 'Y2K',
            athleisure: 'Athleisure',
            mix: 'Mix of all'
          },
          sizes: {
            minimal: 'Minimalist',
            minimalCount: '~20-30 items',
            minimalDesc: 'Only what I really use',
            medium: 'Medium',
            mediumCount: '~40-60 items',
            mediumDesc: 'A good mix',
            large: 'Collector',
            largeCount: '~80+ items',
            largeDesc: 'I love clothes'
          },
          generating: 'Creating your wardrobe...',
          generated: 'Your wardrobe is ready!',
          basedOn: 'Based on',
          quickEdit: 'Tap to remove, hold to edit',
          looksGood: 'Looks good!',
          adjust: 'Adjust',
          // Voice
          voiceTitle: 'Tell me what you have',
          voiceHint: 'E.g. "I have a black Nike hoodie and two pairs of Levi\'s jeans"',
          voiceListening: 'Listening...',
          voiceTap: 'Tap and speak',
          voiceFound: 'Found these items:',
          voiceConfirm: 'Add all',
          voiceRetry: 'Try again',
          // Brands
          brandsTitle: 'Which brands do you have?',
          brandsSelect: 'Select brands you own',
          brandsNext: 'What do you have from',
          brandsTap: 'Tap to add',
          brandsHold: 'Hold for quantity & color',
          brandsDone: 'Done',
          // Manual
          manualTitle: 'Add item',
          category: 'Category',
          type: 'Type',
          brand: 'Brand',
          color: 'Color',
          fit: 'Fit',
          size: 'Size',
          saveItem: 'Save item',
          // Categories
          categories: {
            tops: 'Tops',
            bottoms: 'Bottoms',
            jackets: 'Jackets',
            shoes: 'Shoes',
            accessories: 'Accessories'
          },
          // Coming soon
          comingSoon: 'Coming soon',
          comingSoonDesc: 'AI image analysis is coming in a future update. Then you can snap your clothes and have them automatically identified!',
          // Item types
          types: {
            tshirt: 'T-shirt',
            shirt: 'Shirt',
            hoodie: 'Hoodie',
            sweater: 'Sweater',
            cardigan: 'Cardigan',
            polo: 'Polo',
            tank: 'Tank top',
            blouse: 'Blouse',
            jeans: 'Jeans',
            chinos: 'Chinos',
            trousers: 'Trousers',
            shorts: 'Shorts',
            skirt: 'Skirt',
            joggers: 'Joggers',
            leggings: 'Leggings',
            jacket: 'Jacket',
            coat: 'Coat',
            blazer: 'Blazer',
            puffer: 'Puffer',
            denim: 'Denim jacket',
            leather: 'Leather jacket',
            sneakers: 'Sneakers',
            boots: 'Boots',
            loafers: 'Loafers',
            sandals: 'Sandals',
            heels: 'Heels',
            watch: 'Watch',
            bag: 'Bag',
            cap: 'Cap',
            sunglasses: 'Sunglasses',
            jewelry: 'Jewelry',
            scarf: 'Scarf',
            belt: 'Belt'
          },
          // Fits
          fits: {
            slim: 'Slim',
            regular: 'Regular',
            relaxed: 'Relaxed',
            oversized: 'Oversized',
            wide: 'Wide',
            bootcut: 'Bootcut',
            skinny: 'Skinny',
            loose: 'Loose',
            cropped: 'Cropped',
            tailored: 'Tailored',
            straight: 'Straight',
            tapered: 'Tapered'
          },
          // Edit mode
          editMode: 'Edit',
          deleteMode: 'Delete',
          doneEditing: 'Done',
          editItem: 'Edit item',
          itemName: 'Item name',
          confirmDeleteItem: 'Delete item?',
          confirmDeleteItemText: 'Are you sure you want to delete this item?',
          voiceEdit: 'Tap to edit',
          voiceConfirmText: 'Is this correct?'
        },
        weatherTip: {
          freezing: [
            'Freezing out there! Bundle up 🥶',
            'Brrr! Gloves and beanie weather',
            'It\'s brutal – grab your warmest coat 🧊',
            'Sub-zero vibes – layer up!',
            'Proper cold today – puffer jacket essential 🧥'
          ],
          cold: [
            'Jacket weather for sure',
            'Bit nippy – hoodie under coat kind of day',
            'Cozy coat weather ☁️',
            'Layer up – it\'s chilly out there 🍂',
            'Chunky knit + jacket combo today'
          ],
          cool: [
            'Light jacket should do it',
            'Shacket weather! Perfect temps',
            'Mild out – thin jacket maybe?',
            'Lovely weather! Cardigan vibes',
            'Not too hot, not too cold – chef\'s kiss 👌'
          ],
          warm: [
            'No jacket needed! ☀️',
            'T-shirt weather – finally!',
            'Gorgeous out there – enjoy! 🌞',
            'Sunnies and light layers today',
            'Beautiful day – leave the jacket at home ✨'
          ]
        },
        occasions: ['Everyday', 'Work', 'Party', 'Date', 'Workout', 'Other'],
        chooseTheme: 'Choose theme',
        chooseThemeSubtitle: 'Customize your experience',
        themes: { standard: 'Standard', rose: 'Rose', sky: 'Sky', mint: 'Mint', lavender: 'Lavender', peach: 'Peach', lemon: 'Lemon', dark: 'Dark' }
      },
      es: {
        greeting: { morning: 'Buenos días', afternoon: 'Buenas tardes', evening: 'Buenas noches', night: 'Buenas noches' },
        title: 'Garderob.',
        appName: 'Armario.',
        total: 'Total',
        thisWeek: 'Esta semana',
        favorites: 'Favoritos',
        filter: 'Filtrar',
        all: 'Todo',
        yourOutfits: 'Tus outfits',
        outfits: 'outfits',
        newOutfit: 'Nuevo outfit',
        editOutfit: 'Editar outfit',
        outfitName: 'Nombre',
        selectOccasion: 'Seleccionar ocasión',
        top: 'Top',
        bottom: 'Pantalón',
        jacket: 'Abrigo',
        shoes: 'Calzado',
        accessories: 'Accesorios',
        addImage: 'Añadir imagen',
        removeImage: 'Eliminar imagen',
        version: 'Versión',
        cancel: 'Cancelar',
        save: 'Guardar outfit',
        update: 'Actualizar',
        delete: 'Eliminar outfit',
        edit: 'Editar',
        back: 'Volver',
        noOutfits: 'Tu armario está vacío',
        pressToStart: 'Añade tu primer outfit y empieza a crear tu guía de estilo',
        addFirst: 'Añadir outfit',
        items: 'prendas',
        details: 'Detalles',
        cantDecide: '¿No puedes decidir?',
        pickForMe: 'Elige por mí',
        spinning: 'Eligiendo...',
        todaysPick: 'Elección del día',
        wearThis: '¡Ponte este!',
        tryAgain: 'Intentar de nuevo',
        wearToday: 'Usar hoy',
        lastWorn: 'Último uso',
        daysAgo: 'días',
        today: 'Hoy',
        yesterday: 'Ayer',
        neverWorn: 'Nunca usado',
        confirmDelete: '¿Eliminar outfit?',
        confirmDeleteText: '¿Estás seguro? Esto no se puede deshacer.',
        yes: 'Sí, eliminar',
        no: 'Cancelar',
        worn: '¡Usado!',
        undoWear: 'Deshacer',
        inspiration: 'Ver inspiración en Pinterest',
        settings: 'Ajustes',
        yourName: 'Tu nombre',
        yourNamePlaceholder: 'Escribe tu nombre',
        yourCity: 'Tu ciudad',
        yourCityPlaceholder: 'Ej. Madrid',
        resetAll: 'Empezar de nuevo',
        resetAllDesc: 'Elimina todos los outfits y prendas guardadas',
        resetConfirm: '¿Empezar de nuevo?',
        resetConfirmText: 'Esto eliminará todos tus outfits y prendas guardadas. No se puede deshacer.',
        resetYes: 'Sí, empezar de nuevo',
        language: 'Idioma',
        saveSettings: 'Guardar',
        // Wardrobe translations
        wardrobe: {
          title: 'Tu ropa',
          items: 'prendas',
          empty: 'Tu armario está vacío',
          emptyDesc: 'Añade tu ropa para obtener mejores sugerencias de outfits',
          addItem: 'Añadir prenda',
          addMethod: '¿Cómo quieres añadir?',
          kickstart: 'Comenzar',
          kickstartDesc: '60 seg quiz → armario completo',
          voice: 'Voz',
          voiceDesc: 'Habla y añade',
          brands: 'Marcas',
          brandsDesc: 'Elige entre tus marcas',
          camera: 'Cámara',
          cameraDesc: 'Próximamente...',
          manual: 'Manual',
          manualDesc: 'Rellena tú mismo',
          // Kickstart
          kickstartTitle: 'Inicia tu armario',
          kickstartIntro: '60 segundos → Armario completo',
          step1: '¿Cuál es tu estilo?',
          step2: '¿Tus colores favoritos?',
          step3: '¿Qué marcas tienes?',
          step4: '¿Qué tan grande es tu armario?',
          styles: {
            minimalist: 'Minimalista',
            streetwear: 'Streetwear',
            classic: 'Clásico',
            scandi: 'Scandi',
            y2k: 'Y2K',
            athleisure: 'Athleisure',
            mix: 'Mezcla de todo'
          },
          sizes: {
            minimal: 'Minimalista',
            minimalCount: '~20-30 prendas',
            minimalDesc: 'Solo lo que realmente uso',
            medium: 'Medio',
            mediumCount: '~40-60 prendas',
            mediumDesc: 'Una buena mezcla',
            large: 'Coleccionista',
            largeCount: '~80+ prendas',
            largeDesc: 'Me encanta la ropa'
          },
          generating: 'Creando tu armario...',
          generated: '¡Tu armario está listo!',
          basedOn: 'Basado en',
          quickEdit: 'Toca para quitar, mantén para editar',
          looksGood: '¡Perfecto!',
          adjust: 'Ajustar',
          // Voice
          voiceTitle: 'Cuéntame qué tienes',
          voiceHint: 'Ej. "Tengo un hoodie negro de Nike y dos vaqueros de Levi\'s"',
          voiceListening: 'Escuchando...',
          voiceTap: 'Pulsa y habla',
          voiceFound: 'He encontrado:',
          voiceConfirm: 'Añadir todo',
          voiceRetry: 'Repetir',
          // Brands
          brandsTitle: '¿Qué marcas tienes?',
          brandsSelect: 'Selecciona tus marcas',
          brandsNext: '¿Qué tienes de',
          brandsTap: 'Pulsa para añadir',
          brandsHold: 'Mantén para cantidad y color',
          brandsDone: 'Listo',
          // Manual
          manualTitle: 'Añadir prenda',
          category: 'Categoría',
          type: 'Tipo',
          brand: 'Marca',
          color: 'Color',
          fit: 'Corte',
          size: 'Talla',
          saveItem: 'Guardar prenda',
          // Categories
          categories: {
            tops: 'Tops',
            bottoms: 'Pantalones',
            jackets: 'Abrigos',
            shoes: 'Calzado',
            accessories: 'Accesorios'
          },
          // Coming soon
          comingSoon: 'Próximamente',
          comingSoonDesc: 'El análisis de imágenes con IA llegará en una actualización futura. ¡Podrás fotografiar tu ropa y tenerla identificada automáticamente!',
          // Item types
          types: {
            tshirt: 'Camiseta',
            shirt: 'Camisa',
            hoodie: 'Hoodie',
            sweater: 'Jersey',
            cardigan: 'Cárdigan',
            polo: 'Polo',
            tank: 'Tirantes',
            blouse: 'Blusa',
            jeans: 'Vaqueros',
            chinos: 'Chinos',
            trousers: 'Pantalón',
            shorts: 'Shorts',
            skirt: 'Falda',
            joggers: 'Joggers',
            leggings: 'Leggings',
            jacket: 'Chaqueta',
            coat: 'Abrigo',
            blazer: 'Blazer',
            puffer: 'Plumas',
            denim: 'Cazadora vaquera',
            leather: 'Cazadora de cuero',
            sneakers: 'Zapatillas',
            boots: 'Botas',
            loafers: 'Mocasines',
            sandals: 'Sandalias',
            heels: 'Tacones',
            watch: 'Reloj',
            bag: 'Bolso',
            cap: 'Gorra',
            sunglasses: 'Gafas de sol',
            jewelry: 'Joyas',
            scarf: 'Bufanda',
            belt: 'Cinturón'
          },
          // Fits
          fits: {
            slim: 'Slim fit',
            regular: 'Regular',
            relaxed: 'Relaxed',
            oversized: 'Oversize',
            wide: 'Wide leg',
            bootcut: 'Bootcut',
            skinny: 'Skinny',
            loose: 'Holgado',
            cropped: 'Cropped',
            tailored: 'Entallado',
            straight: 'Recto',
            tapered: 'Tapered'
          },
          // Edit mode
          editMode: 'Editar',
          deleteMode: 'Eliminar',
          doneEditing: 'Listo',
          editItem: 'Editar prenda',
          itemName: 'Nombre de prenda',
          confirmDeleteItem: '¿Eliminar prenda?',
          confirmDeleteItemText: '¿Estás seguro de que quieres eliminar esta prenda?',
          voiceEdit: 'Toca para editar',
          voiceConfirmText: '¿Es correcto?'
        },
        weatherTip: {
          freezing: [
            '¡Hace un frío polar! Toca abrigarse bien 🥶',
            '¡Brrr! No salgas sin guantes y gorro',
            '¡Está helando! Saca el abrigo de invierno 🧊',
            '¡Bajo cero! Hoy toca ir bien tapado',
            'Frío que pela – el plumas es obligatorio 🧥'
          ],
          cold: [
            'Ponte algo de abrigo',
            'Fresquito – ideal para sudadera y chaqueta encima',
            'Buen día para estrenar ese abrigo',
            'Hace fresco – piensa en capas 🍂',
            'Jersey gordito + chaqueta y listo'
          ],
          cool: [
            'Con una chaqueta ligera vas bien',
            'Tiempo ideal para una sobrecamisa',
            'Templado – quizás una chaqueta fina',
            '¡Qué tiempo más agradable! Un cárdigan basta',
            'Ni frío ni calor – el tiempo perfecto 👌'
          ],
          warm: [
            'Tiempo ideal para ir sin chaqueta ☀️',
            '¡Viva el verano! Con una camiseta sobra',
            'Calorcito rico – ¡a disfrutar! 🌞',
            'Saca las gafas de sol y ropa fresquita',
            '¡Qué día más bonito! Deja la chaqueta en casa ✨'
          ]
        },
        occasions: ['Diario', 'Trabajo', 'Fiesta', 'Cita', 'Ejercicio', 'Otro'],
        chooseTheme: 'Elegir tema',
        chooseThemeSubtitle: 'Personaliza tu experiencia',
        themes: { standard: 'Estándar', rose: 'Rosa', sky: 'Cielo', mint: 'Menta', lavender: 'Lavanda', peach: 'Melocotón', lemon: 'Limón', dark: 'Oscuro' }
      }
    };

    function getGreeting(t) {
      // Get Stockholm time
      const stockholmTime = new Date().toLocaleString('en-US', { timeZone: 'Europe/Stockholm' });
      const hour = new Date(stockholmTime).getHours();
      
      if (hour >= 5 && hour < 12) return t.greeting.morning;      // 05:00 - 11:59
      if (hour >= 12 && hour < 17) return t.greeting.afternoon;   // 12:00 - 16:59
      if (hour >= 17 && hour < 22) return t.greeting.evening;     // 17:00 - 21:59
      return t.greeting.night;                                      // 22:00 - 04:59
    }

    function countItems(outfit) {
      let count = 0;
      if (outfit.top) count++;
      if (outfit.bottom) count++;
      if (outfit.jacket) count++;
      if (outfit.shoes) count++;
      if (outfit.accessories) count++;
      return count;
    }

    function getPinterestUrl(outfit) {
      // Collect all outfit parts
      const parts = [
        outfit.top,
        outfit.bottom,
        outfit.jacket,
        outfit.shoes,
        outfit.accessories
      ].filter(Boolean);
      
      // Create search query
      const query = parts.join(' ') + ' outfit';
      const encodedQuery = encodeURIComponent(query);
      
      return `https://pinterest.com/search/pins/?q=${encodedQuery}`;
    }

    function OutfitApp() {
      const [lang, setLang] = useState(() => localStorage.getItem('lang') || 'sv');
      const [theme, setTheme] = useState(() => localStorage.getItem('theme') || 'standard');
      const [showThemeModal, setShowThemeModal] = useState(false);
      const t = translations[lang];

      const [outfits, setOutfits] = useState(() => {
        const saved = localStorage.getItem('outfits');
        return saved ? JSON.parse(saved) : [];
      });

      // User's saved clothing items (personalized suggestions)
      const [userClothing, setUserClothing] = useState(() => {
        const saved = localStorage.getItem('userClothing');
        return saved ? JSON.parse(saved) : [];
      });

      // Settings
      const [showSettings, setShowSettings] = useState(false);
      const [showResetConfirm, setShowResetConfirm] = useState(false);
      const [userName, setUserName] = useState(() => localStorage.getItem('userName') || '');
      const [userCity, setUserCity] = useState(() => localStorage.getItem('userCity') || '');
      const [weather, setWeather] = useState(null);

      const [showForm, setShowForm] = useState(false);
      const [selectedOutfit, setSelectedOutfit] = useState(null);
      const [editingOutfit, setEditingOutfit] = useState(null);
      const [activeFilter, setActiveFilter] = useState('all');
      const [isSpinning, setIsSpinning] = useState(false);
      const [randomResult, setRandomResult] = useState(null);
      const [showDeleteConfirm, setShowDeleteConfirm] = useState(false);
      const [newOutfit, setNewOutfit] = useState({
        name: '', top: '', bottom: '', jacket: '', shoes: '', accessories: '', occasion: '', image: null
      });

      // Wardrobe state
      const [wardrobeItems, setWardrobeItems] = useState(() => {
        const saved = localStorage.getItem('wardrobeItems');
        return saved ? JSON.parse(saved) : [];
      });
      const [showWardrobe, setShowWardrobe] = useState(false);
      const [showAddMethod, setShowAddMethod] = useState(false);
      const [showKickstart, setShowKickstart] = useState(false);
      const [showVoice, setShowVoice] = useState(false);
      const [showBrands, setShowBrands] = useState(false);
      const [showManual, setShowManual] = useState(false);
      const [showComingSoon, setShowComingSoon] = useState(false);
      const [quickPickPopup, setQuickPickPopup] = useState(null); // null or { field: 'top', items: [...] }
      
      // Kickstart state
      const [kickstartStep, setKickstartStep] = useState(1);
      const [kickstartData, setKickstartData] = useState({
        styles: [],
        colors: [],
        brands: [],
        size: 'medium'
      });
      const [kickstartResult, setKickstartResult] = useState(null);
      
      // Voice state
      const [isListening, setIsListening] = useState(false);
      const [voiceTranscript, setVoiceTranscript] = useState('');
      const [voiceParsedItems, setVoiceParsedItems] = useState([]);
      const [voiceEditingIndex, setVoiceEditingIndex] = useState(null);
      
      // Brands state
      const [selectedBrands, setSelectedBrands] = useState([]);
      const [brandItemsStep, setBrandItemsStep] = useState(false);
      const [currentBrandIndex, setCurrentBrandIndex] = useState(0);
      const [brandAddedItems, setBrandAddedItems] = useState([]);
      
      // Manual form state
      const [manualItem, setManualItem] = useState({
        category: 'tops',
        type: '',
        brand: '',
        color: '',
        fit: '',
        name: ''
      });
      
      // Wardrobe edit mode
      const [wardrobeEditMode, setWardrobeEditMode] = useState(false);
      const [editingWardrobeItem, setEditingWardrobeItem] = useState(null);
      const [showDeleteItemConfirm, setShowDeleteItemConfirm] = useState(null);

      const occasions = t.occasions;

      // All refs must be declared before useEffects (React hooks rules)
      const weatherDebounceRef = useRef(null);
      const weatherAbortRef = useRef(null);
      const spinIntervalRef = useRef(null);

      useEffect(() => {
        localStorage.setItem('outfits', JSON.stringify(outfits));
      }, [outfits]);

      useEffect(() => {
        localStorage.setItem('userClothing', JSON.stringify(userClothing));
      }, [userClothing]);

      useEffect(() => {
        localStorage.setItem('wardrobeItems', JSON.stringify(wardrobeItems));
      }, [wardrobeItems]);

      useEffect(() => {
        localStorage.setItem('lang', lang);
      }, [lang]);

      useEffect(() => {
        document.documentElement.setAttribute('data-theme', theme);
        localStorage.setItem('theme', theme);
      }, [theme]);

      // Save userName to localStorage
      useEffect(() => {
        localStorage.setItem('userName', userName);
      }, [userName]);

      // Save userCity and fetch weather (with debounce)
      useEffect(() => {
        localStorage.setItem('userCity', userCity);
        const trimmedCity = userCity.trim();
        
        // Clear previous debounce
        if (weatherDebounceRef.current) {
          clearTimeout(weatherDebounceRef.current);
        }
        
        // Cancel previous fetch
        if (weatherAbortRef.current) {
          weatherAbortRef.current.abort();
        }
        
        if (!trimmedCity) {
          setWeather(null);
          return;
        }
        
        // Debounce weather fetch by 500ms
        weatherDebounceRef.current = setTimeout(() => {
          fetchWeather(trimmedCity);
        }, 500);
        
        return () => {
          if (weatherDebounceRef.current) {
            clearTimeout(weatherDebounceRef.current);
          }
        };
      }, [userCity]);

      // Fetch weather from Open-Meteo
      const fetchWeather = async (city) => {
        // Create new AbortController for this request
        weatherAbortRef.current = new AbortController();
        const signal = weatherAbortRef.current.signal;
        
        try {
          // First get coordinates from city name
          const geoRes = await fetch(
            `https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}&count=1`,
            { signal }
          );
          const geoData = await geoRes.json();
          
          if (geoData.results && geoData.results[0]) {
            const { latitude, longitude } = geoData.results[0];
            
            // Then get weather
            const weatherRes = await fetch(
              `https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current=temperature_2m,weather_code`,
              { signal }
            );
            const weatherData = await weatherRes.json();
            
            if (weatherData.current) {
              setWeather({
                temp: Math.round(weatherData.current.temperature_2m),
                code: weatherData.current.weather_code
              });
            }
          }
        } catch (err) {
          // Ignore abort errors
          if (err.name !== 'AbortError') {
            console.log('Weather fetch failed:', err);
            setWeather(null);
          }
        }
      };

      // Get weather icon based on WMO code
      const getWeatherIcon = (code) => {
        if (code === 0) return '☀️';
        if (code <= 3) return '⛅';
        if (code <= 48) return '☁️';
        if (code <= 67) return '🌧️';
        if (code <= 77) return '🌨️';
        if (code <= 82) return '🌧️';
        if (code <= 86) return '🌨️';
        if (code >= 95) return '⛈️';
        return '🌡️';
      };

      // Get weather tip based on temperature (randomly picks from array, changes every few hours)
      const getWeatherTip = (temp) => {
        let tips;
        if (temp < 0) tips = t.weatherTip.freezing;
        else if (temp < 10) tips = t.weatherTip.cold;
        else if (temp < 18) tips = t.weatherTip.cool;
        else tips = t.weatherTip.warm;
        
        // Create a seed that changes every 3-6 hours (varies by day)
        const now = new Date();
        const dayOfYear = Math.floor((now - new Date(now.getFullYear(), 0, 0)) / (1000 * 60 * 60 * 24));
        const hoursBlock = Math.floor(now.getHours() / (3 + (dayOfYear % 4))); // 3-6 hour blocks depending on day
        const seed = dayOfYear * 10 + hoursBlock + Math.abs(temp);
        
        // Pick index based on seed
        const index = seed % tips.length;
        return tips[index];
      };

      // Reset all data
      const resetAllData = () => {
        setOutfits([]);
        setUserClothing([]);
        setWardrobeItems([]);
        setShowResetConfirm(false);
        setShowSettings(false);
      };

      const themes = ['standard', 'rose', 'sky', 'mint', 'lavender', 'peach', 'lemon', 'dark'];

      // ==================== WARDROBE FUNCTIONS ====================
      
      // Common brands database
      const commonBrands = [
        // Basics & Fast Fashion
        'H&M', 'Zara', 'Uniqlo', 'Mango', 'ASOS', 'Pull & Bear', 'Bershka', 'Stradivarius',
        'Primark', 'Forever 21', 'Shein', 'Monki', '& Other Stories', 'Topshop', 'River Island',
        // Scandinavian
        'COS', 'Arket', 'Weekday', 'Acne Studios', 'Our Legacy', 'Filippa K', 'Tiger of Sweden',
        'J.Lindeberg', 'Holzweiler', 'Ganni', 'Wood Wood', 'Norse Projects', 'NN07', 'Samsøe Samsøe',
        // Sportswear
        'Nike', 'Adidas', 'Puma', 'New Balance', 'Reebok', 'Under Armour', 'Asics', 'Fila',
        'Champion', 'The North Face', 'Patagonia', 'Arc\'teryx', 'Salomon', 'Hoka', 'On Running',
        // Streetwear
        'Carhartt', 'Stüssy', 'Supreme', 'Palace', 'Kith', 'A Bathing Ape', 'Fear of God',
        'Represent', 'Essentials', 'Corteiz', 'Trapstar', 'Palm Angels',
        // Denim & Casual
        "Levi's", 'Wrangler', 'Lee', 'Nudie Jeans', 'G-Star Raw', 'Diesel', 'True Religion',
        'Edwin', 'Carhartt WIP', 'Dickies',
        // Classic & Premium
        'Ralph Lauren', 'Tommy Hilfiger', 'Calvin Klein', 'Hugo Boss', 'Lacoste', 'Fred Perry',
        'Massimo Dutti', 'Reiss', 'Ted Baker', 'AllSaints', 'Gant', 'Brooks Brothers',
        // Shoes
        'Converse', 'Vans', 'Dr. Martens', 'Timberland', 'Clarks', 'Birkenstock', 'Crocs',
        'UGG', 'Blundstone', 'Red Wing', 'Common Projects', 'Axel Arigato',
        // Luxury
        'Gucci', 'Balenciaga', 'Off-White', 'Stone Island', 'Prada', 'Louis Vuitton', 'Dior',
        'Burberry', 'Versace', 'Givenchy', 'Saint Laurent', 'Bottega Veneta', 'Maison Margiela'
      ];
      
      // Color options with hex values
      const colorOptions = [
        { id: 'black', hex: '#1a1a1a' },
        { id: 'white', hex: '#ffffff' },
        { id: 'grey', hex: '#6b7280' },
        { id: 'navy', hex: '#1e3a5f' },
        { id: 'blue', hex: '#3b82f6' },
        { id: 'beige', hex: '#d4c5a9' },
        { id: 'brown', hex: '#8b5a2b' },
        { id: 'green', hex: '#22c55e' },
        { id: 'olive', hex: '#6b8e23' },
        { id: 'red', hex: '#ef4444' },
        { id: 'pink', hex: '#ec4899' },
        { id: 'purple', hex: '#8b5cf6' }
      ];
      
      // Item types by category
      const itemTypesByCategory = {
        tops: ['tshirt', 'shirt', 'hoodie', 'sweater', 'cardigan', 'polo', 'tank', 'blouse'],
        bottoms: ['jeans', 'chinos', 'trousers', 'shorts', 'skirt', 'joggers', 'leggings'],
        jackets: ['jacket', 'coat', 'blazer', 'puffer', 'denim', 'leather'],
        shoes: ['sneakers', 'boots', 'loafers', 'sandals', 'heels'],
        accessories: ['watch', 'bag', 'cap', 'sunglasses', 'jewelry', 'scarf', 'belt']
      };
      
      // Add single item to wardrobe
      const addWardrobeItem = (item) => {
        const newItem = {
          id: Date.now() + Math.random(),
          ...item,
          addedAt: new Date().toISOString()
        };
        setWardrobeItems(prev => [newItem, ...prev]);
      };
      
      // Add multiple items
      const addWardrobeItems = (items) => {
        const newItems = items.map((item, i) => ({
          id: Date.now() + i + Math.random(),
          ...item,
          addedAt: new Date().toISOString()
        }));
        setWardrobeItems(prev => [...newItems, ...prev]);
      };
      
      // Remove item from wardrobe
      const removeWardrobeItem = (id) => {
        setWardrobeItems(prev => prev.filter(item => item.id !== id));
      };
      
      // Group wardrobe items by category
      const wardrobeByCategory = useMemo(() => {
        const grouped = { tops: [], bottoms: [], jackets: [], shoes: [], accessories: [] };
        wardrobeItems.forEach(item => {
          if (grouped[item.category]) {
            grouped[item.category].push(item);
          }
        });
        return grouped;
      }, [wardrobeItems]);
      
      // Generate wardrobe from kickstart
      const generateWardrobeFromKickstart = () => {
        const { styles, colors, brands, size } = kickstartData;
        const items = [];
        
        // Determine quantities based on size
        const quantities = {
          minimal: { tops: 8, bottoms: 4, jackets: 2, shoes: 3, accessories: 3 },
          medium: { tops: 14, bottoms: 6, jackets: 4, shoes: 5, accessories: 5 },
          large: { tops: 22, bottoms: 10, jackets: 6, shoes: 8, accessories: 8 }
        }[size];
        
        // Helper to pick random items
        const pickRandom = (arr) => arr[Math.floor(Math.random() * arr.length)];
        
        // Generate tops
        const topTypes = ['tshirt', 'tshirt', 'tshirt', 'hoodie', 'sweater', 'shirt'];
        for (let i = 0; i < quantities.tops; i++) {
          items.push({
            category: 'tops',
            type: pickRandom(topTypes),
            brand: brands.length > 0 ? pickRandom(brands) : pickRandom(commonBrands.slice(0, 10)),
            color: colors.length > 0 ? pickRandom(colors) : 'black'
          });
        }
        
        // Generate bottoms
        const bottomTypes = ['jeans', 'jeans', 'chinos', 'trousers', 'shorts'];
        for (let i = 0; i < quantities.bottoms; i++) {
          items.push({
            category: 'bottoms',
            type: pickRandom(bottomTypes),
            brand: brands.length > 0 ? pickRandom(brands) : pickRandom(commonBrands.slice(0, 10)),
            color: colors.length > 0 ? pickRandom(colors) : pickRandom(['black', 'navy', 'blue'])
          });
        }
        
        // Generate jackets
        const jacketTypes = ['jacket', 'puffer', 'blazer', 'denim'];
        for (let i = 0; i < quantities.jackets; i++) {
          items.push({
            category: 'jackets',
            type: pickRandom(jacketTypes),
            brand: brands.length > 0 ? pickRandom(brands) : pickRandom(commonBrands.slice(0, 10)),
            color: colors.length > 0 ? pickRandom(colors) : 'black'
          });
        }
        
        // Generate shoes
        const shoeTypes = ['sneakers', 'sneakers', 'boots', 'loafers'];
        for (let i = 0; i < quantities.shoes; i++) {
          items.push({
            category: 'shoes',
            type: pickRandom(shoeTypes),
            brand: pickRandom(['Nike', 'Adidas', 'New Balance', 'Converse', 'Vans', 'Dr. Martens']),
            color: colors.length > 0 ? pickRandom(colors) : pickRandom(['white', 'black'])
          });
        }
        
        // Generate accessories
        const accTypes = ['watch', 'cap', 'bag', 'sunglasses', 'belt'];
        for (let i = 0; i < quantities.accessories; i++) {
          items.push({
            category: 'accessories',
            type: pickRandom(accTypes),
            brand: '',
            color: colors.length > 0 ? pickRandom(colors) : 'black'
          });
        }
        
        return items;
      };
      
      // Parse voice input to extract clothing items
      // Parse voice input - keeps the exact words spoken, tries to identify category
      const parseVoiceInput = (text) => {
        const items = [];
        const lowerText = text.toLowerCase();
        
        // Split by common separators (och, and, y, comma)
        const parts = text.split(/,|\soch\s|\sand\s|\sy\s/i).map(p => p.trim()).filter(p => p.length > 1);
        
        parts.forEach(part => {
          // Try to identify category based on keywords
          let category = 'tops'; // Default
          const lower = part.toLowerCase();
          
          // Bottoms keywords
          if (/jeans|byxor|shorts|kjol|pants|trousers|chinos|joggers|skirt|pantalon/i.test(lower)) {
            category = 'bottoms';
          }
          // Jackets keywords  
          else if (/jacka|jacket|coat|kappa|blazer|hoodie|dunjacka|puffer|chaqueta|abrigo/i.test(lower)) {
            category = 'jackets';
          }
          // Shoes keywords
          else if (/skor|shoes|sneakers|boots|loafers|sandals|heels|stövlar|zapatos/i.test(lower)) {
            category = 'shoes';
          }
          // Accessories keywords
          else if (/klocka|watch|väska|bag|keps|cap|glasögon|sunglasses|smycke|jewelry|bälte|belt|halsduk|scarf|reloj|bolso/i.test(lower)) {
            category = 'accessories';
          }
          
          // Keep the original text as the name - user can edit
          items.push({
            category,
            name: part.trim(),
            type: '',
            color: '',
            brand: '',
            fit: ''
          });
        });
        
        // If nothing was parsed, add the whole text as one item
        if (items.length === 0 && text.trim().length > 1) {
          items.push({
            category: 'tops',
            name: text.trim(),
            type: '',
            color: '',
            brand: '',
            fit: ''
          });
        }
        
        return items;
      };
      
      // Start voice recognition - supports all languages
      const startVoiceRecognition = () => {
        if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
          alert('Din webbläsare stödjer inte röstinmatning');
          return;
        }
        
        const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
        const recognition = new SpeechRecognition();
        
        // Use the user's language but with flexible recognition
        recognition.lang = lang === 'sv' ? 'sv-SE' : lang === 'es' ? 'es-ES' : 'en-US';
        recognition.continuous = false;
        recognition.interimResults = true;
        
        recognition.onstart = () => {
          setIsListening(true);
          setVoiceTranscript('');
          setVoiceParsedItems([]);
          setVoiceEditingIndex(null);
        };
        
        recognition.onresult = (event) => {
          const transcript = Array.from(event.results)
            .map(result => result[0].transcript)
            .join('');
          setVoiceTranscript(transcript);
          
          if (event.results[0].isFinal) {
            const parsed = parseVoiceInput(transcript);
            setVoiceParsedItems(parsed);
          }
        };
        
        recognition.onend = () => {
          setIsListening(false);
        };
        
        recognition.onerror = () => {
          setIsListening(false);
        };
        
        recognition.start();
      };
      
      // Close all wardrobe modals
      const closeAllWardrobeModals = () => {
        setShowWardrobe(false);
        setShowAddMethod(false);
        setShowKickstart(false);
        setShowVoice(false);
        setShowBrands(false);
        setShowManual(false);
        setShowComingSoon(false);
        setKickstartStep(1);
        setKickstartData({ styles: [], colors: [], brands: [], size: 'medium' });
        setKickstartResult(null);
        setVoiceTranscript('');
        setVoiceParsedItems([]);
        setVoiceEditingIndex(null);
        setSelectedBrands([]);
        setBrandItemsStep(false);
        setCurrentBrandIndex(0);
        setBrandAddedItems([]);
        setManualItem({ category: 'tops', type: '', brand: '', color: '', fit: '', name: '' });
        setWardrobeEditMode(false);
        setEditingWardrobeItem(null);
        setShowDeleteItemConfirm(null);
      };

      // Get color name translation
      const getColorName = (colorId) => {
        const colorNames = {
          sv: { black: 'Svart', white: 'Vit', grey: 'Grå', navy: 'Marinblå', blue: 'Blå', beige: 'Beige', brown: 'Brun', green: 'Grön', olive: 'Oliv', red: 'Röd', pink: 'Rosa', purple: 'Lila' },
          en: { black: 'Black', white: 'White', grey: 'Grey', navy: 'Navy', blue: 'Blue', beige: 'Beige', brown: 'Brown', green: 'Green', olive: 'Olive', red: 'Red', pink: 'Pink', purple: 'Purple' },
          es: { black: 'Negro', white: 'Blanco', grey: 'Gris', navy: 'Azul marino', blue: 'Azul', beige: 'Beige', brown: 'Marrón', green: 'Verde', olive: 'Oliva', red: 'Rojo', pink: 'Rosa', purple: 'Morado' }
        };
        return colorNames[lang]?.[colorId] || colorId;
      };

      // Format item display name - supports both new name field and legacy type+color
      const formatItemName = (item) => {
        const colorName = item.color ? getColorName(item.color) : '';
        const fitName = item.fit || '';
        
        // Build details array
        const details = [];
        if (colorName) details.push(colorName);
        if (fitName) details.push(fitName);
        
        // If item has a custom name, use it + add details if they exist
        if (item.name && item.name.trim()) {
          if (details.length > 0) {
            return `${item.name} (${details.join(', ')})`;
          }
          return item.name;
        }
        
        // Otherwise build from brand + type + details
        const typeName = t.wardrobe.types[item.type] || item.type || '';
        
        let name = '';
        if (item.brand) name += item.brand + ' ';
        if (typeName) name += typeName;
        
        if (details.length > 0 && name) {
          name += ` (${details.join(', ')})`;
        }
        
        return name.trim() || 'Plagg';
      };

      // Get combined user items for autocomplete (userClothing + wardrobeItems by category)
      const getCombinedUserItems = (fieldType) => {
        // Map fieldType to wardrobe category
        const categoryMap = {
          'top': 'tops',
          'bottom': 'bottoms',
          'jacket': 'jackets',
          'shoes': 'shoes',
          'accessories': 'accessories'
        };
        const wardrobeCategory = categoryMap[fieldType];
        
        // Get wardrobe items for this category and format them as strings
        const wardrobeNames = wardrobeItems
          .filter(item => item.category === wardrobeCategory)
          .map(item => formatItemName(item));
        
        // Combine with userClothing (remove duplicates)
        const combined = [...new Set([...wardrobeNames, ...userClothing])];
        return combined;
      };

      // Get wardrobe items for quick-pick chips (returns formatted names)
      const getWardrobeQuickPicks = (fieldType) => {
        const categoryMap = {
          'top': 'tops',
          'bottom': 'bottoms',
          'jacket': 'jackets',
          'shoes': 'shoes',
          'accessories': 'accessories'
        };
        const wardrobeCategory = categoryMap[fieldType];
        
        return wardrobeItems
          .filter(item => item.category === wardrobeCategory)
          .map(item => formatItemName(item));
      };

      // Icons for each field type
      const fieldIcons = {
        'top': '👕',
        'bottom': '👖',
        'jacket': '🧥',
        'shoes': '👟',
        'accessories': '⌚'
      };

      // Add item to field (append with " + " if already has value)
      const addToOutfitField = (field, item) => {
        const current = newOutfit[field];
        if (!current) {
          setNewOutfit({ ...newOutfit, [field]: item });
        } else if (!current.toLowerCase().includes(item.toLowerCase())) {
          // Add with " + " separator if not already included
          setNewOutfit({ ...newOutfit, [field]: current + ' + ' + item });
        }
      };

      // Remove specific item from field
      const removeFromOutfitField = (field, itemToRemove) => {
        const current = newOutfit[field];
        if (!current) return;
        
        const items = current.split(' + ').filter(item => 
          item.toLowerCase() !== itemToRemove.toLowerCase()
        );
        setNewOutfit({ ...newOutfit, [field]: items.join(' + ') });
      };

      // Get items in field as array
      const getFieldItems = (field) => {
        const current = newOutfit[field];
        if (!current) return [];
        return current.split(' + ').filter(item => item.trim());
      };

      // Check if item is already in field
      const isItemInField = (field, item) => {
        const current = newOutfit[field];
        if (!current) return false;
        return current.toLowerCase().includes(item.toLowerCase());
      };

      // Helper function - must be defined before useMemo that uses it
      const getDaysSinceWorn = (lastWorn) => {
        if (!lastWorn) return null;
        const days = Math.floor((new Date() - new Date(lastWorn)) / (1000 * 60 * 60 * 24));
        return days;
      };

      const filteredOutfits = useMemo(() => {
        if (activeFilter === 'all') return outfits;
        if (activeFilter === 'favorites') return outfits.filter(o => o.isFavorite);
        return outfits.filter(o => o.occasion === activeFilter);
      }, [outfits, activeFilter]);

      // Memoized stats to avoid recalculation on every render
      const stats = useMemo(() => ({
        total: outfits.length,
        favorites: outfits.filter(o => o.isFavorite).length,
        thisWeek: outfits.filter(o => {
          const days = getDaysSinceWorn(o.lastWorn);
          return days !== null && days <= 7;
        }).length
      }), [outfits]);

      const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onloadend = () => {
            // Compress image to prevent crashes
            const img = new Image();
            img.onload = () => {
              const canvas = document.createElement('canvas');
              const maxSize = 800; // Max width/height
              let width = img.width;
              let height = img.height;
              
              if (width > height && width > maxSize) {
                height = (height * maxSize) / width;
                width = maxSize;
              } else if (height > maxSize) {
                width = (width * maxSize) / height;
                height = maxSize;
              }
              
              canvas.width = width;
              canvas.height = height;
              const ctx = canvas.getContext('2d');
              ctx.drawImage(img, 0, 0, width, height);
              
              const compressedImage = canvas.toDataURL('image/jpeg', 0.7);
              setNewOutfit(prev => ({ ...prev, image: compressedImage }));
            };
            img.src = reader.result;
          };
          reader.readAsDataURL(file);
        }
      };

      // Save clothing items from outfit to user's personal list
      const saveClothingItems = (outfit) => {
        const items = [outfit.top, outfit.bottom, outfit.jacket, outfit.shoes, outfit.accessories]
          .filter(item => item && item.trim().length > 1)
          .map(item => item.trim().toLowerCase());
        
        setUserClothing(prev => {
          const newItems = items.filter(item => !prev.includes(item));
          if (newItems.length === 0) return prev;
          // Keep max 100 items, newest first
          return [...newItems, ...prev].slice(0, 100);
        });
      };

      // Remove item from user's personal list
      const removeUserItem = (item) => {
        if (!item) return;
        const normalizedItem = item.trim().toLowerCase();
        setUserClothing(prev => prev.filter(i => i.toLowerCase() !== normalizedItem));
      };

      const addOutfit = () => {
        if (newOutfit.name) {
          saveClothingItems(newOutfit);
          setOutfits(prev => [{ ...newOutfit, id: Date.now(), createdAt: new Date().toISOString() }, ...prev]);
          setNewOutfit({ name: '', top: '', bottom: '', jacket: '', shoes: '', accessories: '', occasion: '', image: null });
          setShowForm(false);
        }
      };

      const startEdit = (outfit) => {
        setEditingOutfit(outfit);
        setNewOutfit({
          name: outfit.name,
          top: outfit.top || '',
          bottom: outfit.bottom || '',
          jacket: outfit.jacket || '',
          shoes: outfit.shoes || '',
          accessories: outfit.accessories || '',
          occasion: outfit.occasion || '',
          image: outfit.image || null
        });
        setSelectedOutfit(null);
        setShowForm(true);
      };

      const updateOutfit = () => {
        if (newOutfit.name && editingOutfit) {
          saveClothingItems(newOutfit);
          setOutfits(prev => prev.map(o => 
            o.id === editingOutfit.id 
              ? { ...o, ...newOutfit }
              : o
          ));
          setNewOutfit({ name: '', top: '', bottom: '', jacket: '', shoes: '', accessories: '', occasion: '', image: null });
          setEditingOutfit(null);
          setShowForm(false);
        }
      };

      const cancelEdit = () => {
        setNewOutfit({ name: '', top: '', bottom: '', jacket: '', shoes: '', accessories: '', occasion: '', image: null });
        setEditingOutfit(null);
        setShowForm(false);
      };

      // Drag-to-close helper for modals
      const createDragToClose = (onClose, scrollAreaSelector = null) => ({
        onTouchStart: (e) => {
          const touch = e.touches[0];
          e.currentTarget.dataset.startY = touch.clientY;
          e.currentTarget.dataset.startScrollTop = scrollAreaSelector 
            ? (e.currentTarget.querySelector(scrollAreaSelector)?.scrollTop || 0)
            : 0;
        },
        onTouchMove: (e) => {
          const touch = e.touches[0];
          const startY = parseFloat(e.currentTarget.dataset.startY);
          const startScrollTop = parseFloat(e.currentTarget.dataset.startScrollTop);
          const deltaY = touch.clientY - startY;
          
          if (startScrollTop === 0 && deltaY > 30) {
            e.currentTarget.style.transform = `translateY(${deltaY - 30}px)`;
            e.currentTarget.style.transition = 'none';
          }
        },
        onTouchEnd: (e) => {
          const startY = parseFloat(e.currentTarget.dataset.startY);
          const endY = e.changedTouches[0].clientY;
          const deltaY = endY - startY;
          const startScrollTop = parseFloat(e.currentTarget.dataset.startScrollTop);
          
          e.currentTarget.style.transform = '';
          e.currentTarget.style.transition = '';
          
          if (startScrollTop === 0 && deltaY > 120) {
            onClose();
          }
        }
      });

      const deleteOutfit = (id) => {
        setOutfits(prev => prev.filter(o => o.id !== id));
        setSelectedOutfit(null);
        setShowDeleteConfirm(false);
      };

      const toggleFavorite = (id) => {
        setOutfits(prev => prev.map(o => 
          o.id === id ? { ...o, isFavorite: !o.isFavorite } : o
        ));
      };

      const wearToday = (id, currentLastWorn) => {
        const isWornToday = getDaysSinceWorn(currentLastWorn) === 0;
        setOutfits(prev => prev.map(o => 
          o.id === id ? { ...o, lastWorn: isWornToday ? null : new Date().toISOString() } : o
        ));
      };

      const cycleLang = () => {
        const langs = ['sv', 'en', 'es'];
        const next = langs[(langs.indexOf(lang) + 1) % langs.length];
        setLang(next);
      };

      const pickRandom = () => {
        if (filteredOutfits.length < 2) return;
        
        // Clear any existing interval
        if (spinIntervalRef.current) {
          clearInterval(spinIntervalRef.current);
        }
        
        // If already showing result (retry), make it faster
        const isRetry = randomResult !== null;
        const maxSpins = isRetry ? 6 : 12;
        const spinSpeed = isRetry ? 40 : 70;
        
        setIsSpinning(true);
        
        let spins = 0;
        spinIntervalRef.current = setInterval(() => {
          spins++;
          if (spins >= maxSpins) {
            clearInterval(spinIntervalRef.current);
            spinIntervalRef.current = null;
            // Make sure we get a different outfit on retry
            let randomIndex;
            if (isRetry && filteredOutfits.length > 1) {
              const currentIndex = filteredOutfits.findIndex(o => o.id === randomResult.id);
              do {
                randomIndex = Math.floor(Math.random() * filteredOutfits.length);
              } while (randomIndex === currentIndex);
            } else {
              randomIndex = Math.floor(Math.random() * filteredOutfits.length);
            }
            setRandomResult(filteredOutfits[randomIndex]);
            setIsSpinning(false);
          }
        }, spinSpeed);
      };

      // Cleanup interval on unmount
      useEffect(() => {
        return () => {
          if (spinIntervalRef.current) {
            clearInterval(spinIntervalRef.current);
          }
        };
      }, []);

      const closeResult = () => {
        setRandomResult(null);
      };

      const viewRandomResult = () => {
        if (randomResult) {
          // Automatically mark as worn today
          setOutfits(prev => prev.map(o => 
            o.id === randomResult.id ? { ...o, lastWorn: new Date().toISOString() } : o
          ));
          setSelectedOutfit(randomResult.id);
          setRandomResult(null);
        }
      };

      // Detail View
      if (selectedOutfit) {
        const outfit = outfits.find(o => o.id === selectedOutfit);
        if (!outfit) return null;

        const daysSince = getDaysSinceWorn(outfit.lastWorn);
        const lastWornText = daysSince === null ? t.neverWorn :
                            daysSince === 0 ? t.today :
                            daysSince === 1 ? t.yesterday :
                            `${daysSince} ${t.daysAgo}`;

        return (
          <div className="detail">
            <div className="detail-back-wrapper">
              <button onClick={() => setSelectedOutfit(null)} className="detail-back">←</button>
            </div>
            <button 
              className={`detail-favorite ${outfit.isFavorite ? 'active' : ''}`}
              onClick={() => toggleFavorite(outfit.id)}
            >
              {outfit.isFavorite ? '❤️' : '🤍'}
            </button>
            <div className="detail-scroll">
              <div className="detail-hero">
                {outfit.image ? (
                  <img src={outfit.image} alt={outfit.name} className="detail-image" />
                ) : (
                  <div className="detail-no-image">👔</div>
                )}
                <div className="detail-hero-overlay" />
                <div className="detail-hero-content">
                  <h1 className="detail-title">{outfit.name}</h1>
                  {outfit.occasion && <span className="detail-tag">{outfit.occasion}</span>}
                </div>
              </div>

              <div className="detail-content">
              <div className="detail-last-worn">
                <span className="detail-last-worn-icon">📅</span>
                <span>{t.lastWorn}: {lastWornText}</span>
              </div>

              <button 
                className={`wear-today-btn ${daysSince === 0 ? 'worn' : ''}`}
                onClick={() => wearToday(outfit.id, outfit.lastWorn)}
              >
                {daysSince === 0 ? `↩ ${t.undoWear}` : `👕 ${t.wearToday}`}
              </button>

              <p className="detail-section-title">{t.details}</p>
              <div className="detail-items">
                {outfit.top && (
                  <div className="detail-item">
                    <div className="detail-item-icon">👕</div>
                    <div><p className="detail-item-label">{t.top}</p><p className="detail-item-value">{outfit.top}</p></div>
                  </div>
                )}
                {outfit.bottom && (
                  <div className="detail-item">
                    <div className="detail-item-icon">👖</div>
                    <div><p className="detail-item-label">{t.bottom}</p><p className="detail-item-value">{outfit.bottom}</p></div>
                  </div>
                )}
                {outfit.jacket && (
                  <div className="detail-item">
                    <div className="detail-item-icon">🧥</div>
                    <div><p className="detail-item-label">{t.jacket}</p><p className="detail-item-value">{outfit.jacket}</p></div>
                  </div>
                )}
                {outfit.shoes && (
                  <div className="detail-item">
                    <div className="detail-item-icon">👟</div>
                    <div><p className="detail-item-label">{t.shoes}</p><p className="detail-item-value">{outfit.shoes}</p></div>
                  </div>
                )}
                {outfit.accessories && (
                  <div className="detail-item">
                    <div className="detail-item-icon">💍</div>
                    <div><p className="detail-item-label">{t.accessories}</p><p className="detail-item-value">{outfit.accessories}</p></div>
                  </div>
                )}
              </div>

              {/* Pinterest Inspiration */}
              <a 
                href={getPinterestUrl(outfit)} 
                target="_blank" 
                rel="noopener noreferrer" 
                className="inspiration-btn"
              >
                <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 0C5.373 0 0 5.373 0 12c0 5.084 3.163 9.426 7.627 11.174-.105-.949-.2-2.405.042-3.441.218-.937 1.407-5.965 1.407-5.965s-.359-.719-.359-1.782c0-1.668.967-2.914 2.171-2.914 1.023 0 1.518.769 1.518 1.69 0 1.029-.655 2.568-.994 3.995-.283 1.194.599 2.169 1.777 2.169 2.133 0 3.772-2.249 3.772-5.495 0-2.873-2.064-4.882-5.012-4.882-3.414 0-5.418 2.561-5.418 5.207 0 1.031.397 2.138.893 2.738.098.119.112.224.083.345l-.333 1.36c-.053.22-.174.267-.402.161-1.499-.698-2.436-2.889-2.436-4.649 0-3.785 2.75-7.262 7.929-7.262 4.163 0 7.398 2.967 7.398 6.931 0 4.136-2.607 7.464-6.227 7.464-1.216 0-2.359-.632-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24 12 24c6.627 0 12-5.373 12-12S18.627 0 12 0z"/>
                </svg>
                {t.inspiration}
              </a>

              <div className="detail-actions">
                <button onClick={() => startEdit(outfit)} className="edit-btn">{t.edit}</button>
                <button onClick={() => setShowDeleteConfirm(true)} className="delete-btn">{t.delete}</button>
              </div>
            </div>
            </div>

            {/* Delete Confirmation Modal */}
            {showDeleteConfirm && (
              <div className="confirm-overlay" onClick={() => setShowDeleteConfirm(false)}>
                <div className="confirm-modal" onClick={(e) => e.stopPropagation()}>
                  <div className="confirm-icon">🗑️</div>
                  <h3 className="confirm-title">{t.confirmDelete}</h3>
                  <p className="confirm-text">{t.confirmDeleteText}</p>
                  <div className="confirm-buttons">
                    <button className="confirm-btn confirm-btn-cancel" onClick={() => setShowDeleteConfirm(false)}>
                      {t.no}
                    </button>
                    <button className="confirm-btn confirm-btn-delete" onClick={() => deleteOutfit(outfit.id)}>
                      {t.yes}
                    </button>
                  </div>
                </div>
              </div>
            )}
          </div>
        );
      }

      return (
        <div className="container">
          {/* Header */}
          <div className="header">
            <div className="header-top">
              <div>
                <p className="greeting">{getGreeting(t)}{userName ? `, ${userName}` : ''}</p>
                <h1>{t.appName}</h1>
              </div>
              <div className="header-actions">
                <button onClick={() => setShowThemeModal(true)} className="theme-btn">
                  🎨
                </button>
                <button onClick={() => setShowSettings(true)} className="settings-btn">
                  ⚙️
                </button>
              </div>
            </div>
            {weather && (
              <div className="weather-bar">
                <span className="weather-icon">{getWeatherIcon(weather.code)}</span>
                <span className="weather-temp">{weather.temp}°</span>
                <span className="weather-tip">{getWeatherTip(weather.temp)}</span>
              </div>
            )}
          </div>

          {/* Stats */}
          {outfits.length > 0 && (
            <div className="stats-bar">
              <div className="stat-item">
                <div className="stat-number">{stats.total}</div>
                <div className="stat-label">{t.total}</div>
              </div>
              <div className="stat-item">
                <div className="stat-number">{stats.favorites}</div>
                <div className="stat-label">{t.favorites}</div>
              </div>
              <div className="stat-item">
                <div className="stat-number">{stats.thisWeek}</div>
                <div className="stat-label">{t.thisWeek}</div>
              </div>
            </div>
          )}

          {/* Wardrobe Section */}
          <div className="wardrobe-section" onClick={() => setShowWardrobe(true)}>
            <div className="wardrobe-section-left">
              <span className="wardrobe-section-icon">👕</span>
              <div className="wardrobe-section-info">
                <h3>{t.wardrobe.title}</h3>
                <p>{wardrobeItems.length} {t.wardrobe.items}</p>
              </div>
            </div>
            <span className="wardrobe-section-arrow">→</span>
          </div>

          {/* Filters */}
          {outfits.length > 0 && (
            <div className="filter-section">
              <p className="filter-label">{t.filter}</p>
              <div className="filter-pills">
                <button 
                  className={`filter-pill ${activeFilter === 'all' ? 'active' : ''}`}
                  onClick={() => setActiveFilter('all')}
                >
                  {t.all}
                </button>
                <button 
                  className={`filter-pill ${activeFilter === 'favorites' ? 'active' : ''}`}
                  onClick={() => setActiveFilter('favorites')}
                >
                  ❤️ {t.favorites}
                </button>
                {occasions.map(occ => (
                  <button
                    key={occ}
                    className={`filter-pill ${activeFilter === occ ? 'active' : ''}`}
                    onClick={() => setActiveFilter(occ)}
                  >
                    {occ}
                  </button>
                ))}
              </div>
            </div>
          )}

          {/* Random Picker */}
          {filteredOutfits.length >= 2 && (
            <div className="picker-section">
              <div className="picker-card">
                <div className="picker-content">
                  <div className="picker-header">
                    <span className="picker-label">{t.cantDecide}</span>
                    <span className="picker-icon">🎲</span>
                  </div>
                  <button 
                    className={`picker-btn ${isSpinning ? 'spinning' : ''}`}
                    onClick={pickRandom}
                    disabled={isSpinning}
                  >
                    <span className="picker-btn-icon">✨</span>
                    <span className="picker-btn-text">{isSpinning ? t.spinning : t.pickForMe}</span>
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Random Result Modal */}
          {randomResult && (
            <div className="result-overlay" onClick={closeResult}>
              <div className={`result-modal ${isSpinning ? 'result-spinning' : ''}`} onClick={e => e.stopPropagation()}>
                <div className="result-header">
                  <div className="result-badge">
                    <span>🎯</span>
                    {t.todaysPick}
                  </div>
                </div>
                <div className="result-image-wrapper">
                  {randomResult.image ? (
                    <img src={randomResult.image} alt={randomResult.name} className="result-image" />
                  ) : (
                    <div className="result-placeholder">👔</div>
                  )}
                  <div className="result-confetti">🎉</div>
                </div>
                <div className="result-info">
                  <h3 className="result-outfit-name">{randomResult.name}</h3>
                  {randomResult.occasion && (
                    <p className="result-outfit-occasion">{randomResult.occasion}</p>
                  )}
                </div>
                <div className="result-actions">
                  <button className="result-btn-primary" onClick={viewRandomResult} disabled={isSpinning}>
                    {t.wearThis}
                  </button>
                  <button className="result-btn-secondary" onClick={pickRandom} disabled={isSpinning}>
                    {isSpinning ? '...' : t.tryAgain}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Grid */}
          {filteredOutfits.length === 0 && outfits.length === 0 ? (
            <div className="empty">
              <div className="empty-illustration">
                <div className="empty-circle empty-circle-1"></div>
                <div className="empty-circle empty-circle-2"></div>
                <div className="empty-icon">✨</div>
              </div>
              <h2 className="empty-title">{t.noOutfits}</h2>
              <p className="empty-text">{t.pressToStart}</p>
              <button onClick={() => setShowForm(true)} className="empty-cta">
                <span>+</span> {t.addFirst}
              </button>
            </div>
          ) : filteredOutfits.length === 0 ? (
            <div className="empty">
              <div className="empty-illustration">
                <div className="empty-circle empty-circle-1"></div>
                <div className="empty-circle empty-circle-2"></div>
                <div className="empty-icon">🔍</div>
              </div>
              <h2 className="empty-title">Inga {activeFilter.toLowerCase()} outfits</h2>
            </div>
          ) : (
            <div className="grid-section">
              <div className="grid-header">
                <span className="grid-title">{t.yourOutfits}</span>
                <span className="grid-count">{filteredOutfits.length} {t.outfits}</span>
              </div>
              <div className="grid">
                {filteredOutfits.map(outfit => (
                  <div key={outfit.id} onClick={() => setSelectedOutfit(outfit.id)} className="card">
                    <div className="card-image-wrapper">
                      {outfit.image ? (
                        <img src={outfit.image} alt={outfit.name} className="card-image" />
                      ) : (
                        <div className="card-placeholder">👔</div>
                      )}
                      <button 
                        className={`card-favorite ${outfit.isFavorite ? 'active' : ''}`}
                        onClick={(e) => { e.stopPropagation(); toggleFavorite(outfit.id); }}
                      >
                        {outfit.isFavorite ? '❤️' : '🤍'}
                      </button>
                      {outfit.lastWorn && (
                        <div className={`card-last-worn ${getDaysSinceWorn(outfit.lastWorn) === 0 ? 'recent' : ''}`}>
                          {getDaysSinceWorn(outfit.lastWorn) === 0 ? t.today : 
                           getDaysSinceWorn(outfit.lastWorn) === 1 ? t.yesterday :
                           `${getDaysSinceWorn(outfit.lastWorn)} ${t.daysAgo}`}
                        </div>
                      )}
                      <div className="card-overlay">
                        <span className="card-overlay-text">{countItems(outfit)} {t.items}</span>
                      </div>
                    </div>
                    <div className="card-content">
                      <h3 className="card-title">{outfit.name}</h3>
                      <div className="card-meta">
                        {outfit.occasion && <span className="card-occasion">{outfit.occasion}</span>}
                      </div>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          )}

          {/* FAB */}
          {outfits.length > 0 && !showForm && (
            <button onClick={() => setShowForm(true)} className="fab">+</button>
          )}

          {/* Theme Modal */}
          {showThemeModal && (
            <>
              <div className="theme-modal-overlay" onClick={() => setShowThemeModal(false)} />
              <div className="theme-modal">
                <div className="theme-modal-handle" />
                <h3>{t.chooseTheme}</h3>
                <p className="theme-modal-subtitle">{t.chooseThemeSubtitle}</p>
                <div className="theme-grid">
                  {themes.map(th => (
                    <div key={th}>
                      <div
                        className={`theme-option theme-option-${th} ${theme === th ? 'active' : ''}`}
                        onClick={() => { setTheme(th); setShowThemeModal(false); }}
                      />
                      <p className="theme-label">{t.themes[th]}</p>
                    </div>
                  ))}
                </div>
              </div>
            </>
          )}

          {/* Settings Modal */}
          {showSettings && (
            <>
              <div className="settings-overlay" onClick={() => setShowSettings(false)} />
              <div className="settings-modal">
                <div className="settings-handle" />
                <h3>⚙️ {t.settings}</h3>
                
                <div className="settings-section">
                  <label className="settings-label">👤 {t.yourName}</label>
                  <input
                    type="text"
                    className="settings-input"
                    placeholder={t.yourNamePlaceholder}
                    value={userName}
                    onChange={(e) => setUserName(e.target.value)}
                  />
                </div>

                <div className="settings-section">
                  <label className="settings-label">📍 {t.yourCity}</label>
                  <input
                    type="text"
                    className="settings-input"
                    placeholder={t.yourCityPlaceholder}
                    value={userCity}
                    onChange={(e) => setUserCity(e.target.value)}
                  />
                  {weather && (
                    <p className="settings-weather-preview">
                      {getWeatherIcon(weather.code)} {weather.temp}° — {getWeatherTip(weather.temp)}
                    </p>
                  )}
                </div>

                <div className="settings-section">
                  <label className="settings-label">🌐 {t.language}</label>
                  <div className="settings-lang-options">
                    <button 
                      className={`settings-lang-btn ${lang === 'sv' ? 'active' : ''}`}
                      onClick={() => setLang('sv')}
                    >
                      🇸🇪 Svenska
                    </button>
                    <button 
                      className={`settings-lang-btn ${lang === 'en' ? 'active' : ''}`}
                      onClick={() => setLang('en')}
                    >
                      🇬🇧 English
                    </button>
                    <button 
                      className={`settings-lang-btn ${lang === 'es' ? 'active' : ''}`}
                      onClick={() => setLang('es')}
                    >
                      🇪🇸 Español
                    </button>
                  </div>
                </div>

                <button className="settings-save-btn" onClick={() => setShowSettings(false)}>
                  ✓ {t.saveSettings}
                </button>

                <div className="settings-section settings-danger">
                  <label className="settings-label">🔄 {t.resetAll}</label>
                  <p className="settings-desc">{t.resetAllDesc}</p>
                  <button 
                    className="settings-reset-btn"
                    onClick={() => setShowResetConfirm(true)}
                  >
                    {t.resetAll}
                  </button>
                </div>

                <div className="settings-version">
                  {t.version} 1.0.0
                </div>
              </div>
            </>
          )}

          {/* Reset Confirm Modal */}
          {showResetConfirm && (
            <div className="confirm-overlay" onClick={() => setShowResetConfirm(false)}>
              <div className="confirm-modal" onClick={(e) => e.stopPropagation()}>
                <div className="confirm-icon">🔄</div>
                <h3 className="confirm-title">{t.resetConfirm}</h3>
                <p className="confirm-text">{t.resetConfirmText}</p>
                <div className="confirm-buttons">
                  <button className="confirm-btn confirm-btn-cancel" onClick={() => setShowResetConfirm(false)}>
                    {t.no}
                  </button>
                  <button className="confirm-btn confirm-btn-delete" onClick={resetAllData}>
                    {t.resetYes}
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* Form Modal */}
          {showForm && (
            <>
              <div className="form-overlay" onClick={cancelEdit} />
              <div 
                className="form"
                onTouchStart={(e) => {
                  const touch = e.touches[0];
                  e.currentTarget.dataset.startY = touch.clientY;
                  e.currentTarget.dataset.startScrollTop = e.currentTarget.querySelector('.form-scroll-area')?.scrollTop || 0;
                }}
                onTouchMove={(e) => {
                  const touch = e.touches[0];
                  const startY = parseFloat(e.currentTarget.dataset.startY);
                  const startScrollTop = parseFloat(e.currentTarget.dataset.startScrollTop);
                  const deltaY = touch.clientY - startY;
                  
                  // Only allow drag-to-close when at top of scroll and dragging down
                  if (startScrollTop === 0 && deltaY > 50) {
                    e.currentTarget.style.transform = `translateY(${deltaY - 50}px)`;
                    e.currentTarget.style.transition = 'none';
                  }
                }}
                onTouchEnd={(e) => {
                  const startY = parseFloat(e.currentTarget.dataset.startY);
                  const endY = e.changedTouches[0].clientY;
                  const deltaY = endY - startY;
                  const startScrollTop = parseFloat(e.currentTarget.dataset.startScrollTop);
                  
                  e.currentTarget.style.transform = '';
                  e.currentTarget.style.transition = '';
                  
                  // Close if dragged down more than 150px from top
                  if (startScrollTop === 0 && deltaY > 150) {
                    cancelEdit();
                  }
                }}
              >
                <div className="form-handle" />
                <div className="form-header">
                  <button className="form-back" onClick={cancelEdit}>←</button>
                  <h2>{editingOutfit ? t.editOutfit : t.newOutfit}</h2>
                </div>
                <div className="form-scroll-area">
                  <div className="form-fields">
                    <div className="input-group">
                      <input
                        type="text"
                        placeholder={t.outfitName}
                        value={newOutfit.name}
                        onChange={(e) => setNewOutfit({ ...newOutfit, name: e.target.value })}
                      />
                    </div>

                    <select
                      value={newOutfit.occasion}
                      onChange={(e) => setNewOutfit({ ...newOutfit, occasion: e.target.value })}
                    >
                      <option value="">{t.selectOccasion}</option>
                      {occasions.map(o => <option key={o} value={o}>{o}</option>)}
                    </select>

                    {/* Top */}
                    <div className="field-group">
                      <div className="field-input-wrapper" onClick={(e) => e.currentTarget.querySelector('input')?.focus()}>
                        {getFieldItems('top').map((item, i) => (
                          <span key={i} className="selected-chip">
                            👕 {item}
                            <button 
                              type="button"
                              className="selected-chip-remove"
                              onClick={(e) => { e.stopPropagation(); removeFromOutfitField('top', item); }}
                            >×</button>
                          </span>
                        ))}
                        <input
                          type="text"
                          className="field-input"
                          placeholder={getFieldItems('top').length === 0 ? t.top : ''}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && e.target.value.trim()) {
                              e.preventDefault();
                              addToOutfitField('top', e.target.value.trim());
                              e.target.value = '';
                            }
                          }}
                        />
                      </div>
                      {getWardrobeQuickPicks('top').length > 0 && (
                        <div className="quick-picks">
                          {getWardrobeQuickPicks('top').slice(0, 3).map((item, i) => (
                            <button
                              key={i}
                              type="button"
                              className={`quick-pick ${isItemInField('top', item) ? 'selected' : ''}`}
                              onClick={() => isItemInField('top', item) ? removeFromOutfitField('top', item) : addToOutfitField('top', item)}
                            >
                              <span className="quick-pick-icon">👕</span>
                              {item}
                            </button>
                          ))}
                          {getWardrobeQuickPicks('top').length > 3 && (
                            <button
                              type="button"
                              className="quick-pick quick-pick-more"
                              onClick={() => setQuickPickPopup({ field: 'top', items: getWardrobeQuickPicks('top') })}
                            >
                              +{getWardrobeQuickPicks('top').length - 3}
                            </button>
                          )}
                        </div>
                      )}
                    </div>

                    {/* Bottom */}
                    <div className="field-group">
                      <div className="field-input-wrapper" onClick={(e) => e.currentTarget.querySelector('input')?.focus()}>
                        {getFieldItems('bottom').map((item, i) => (
                          <span key={i} className="selected-chip">
                            👖 {item}
                            <button 
                              type="button"
                              className="selected-chip-remove"
                              onClick={(e) => { e.stopPropagation(); removeFromOutfitField('bottom', item); }}
                            >×</button>
                          </span>
                        ))}
                        <input
                          type="text"
                          className="field-input"
                          placeholder={getFieldItems('bottom').length === 0 ? t.bottom : ''}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && e.target.value.trim()) {
                              e.preventDefault();
                              addToOutfitField('bottom', e.target.value.trim());
                              e.target.value = '';
                            }
                          }}
                        />
                      </div>
                      {getWardrobeQuickPicks('bottom').length > 0 && (
                        <div className="quick-picks">
                          {getWardrobeQuickPicks('bottom').slice(0, 3).map((item, i) => (
                            <button
                              key={i}
                              type="button"
                              className={`quick-pick ${isItemInField('bottom', item) ? 'selected' : ''}`}
                              onClick={() => isItemInField('bottom', item) ? removeFromOutfitField('bottom', item) : addToOutfitField('bottom', item)}
                            >
                              <span className="quick-pick-icon">👖</span>
                              {item}
                            </button>
                          ))}
                          {getWardrobeQuickPicks('bottom').length > 3 && (
                            <button
                              type="button"
                              className="quick-pick quick-pick-more"
                              onClick={() => setQuickPickPopup({ field: 'bottom', items: getWardrobeQuickPicks('bottom') })}
                            >
                              +{getWardrobeQuickPicks('bottom').length - 3}
                            </button>
                          )}
                        </div>
                      )}
                    </div>

                    {/* Jacket */}
                    <div className="field-group">
                      <div className="field-input-wrapper" onClick={(e) => e.currentTarget.querySelector('input')?.focus()}>
                        {getFieldItems('jacket').map((item, i) => (
                          <span key={i} className="selected-chip">
                            🧥 {item}
                            <button 
                              type="button"
                              className="selected-chip-remove"
                              onClick={(e) => { e.stopPropagation(); removeFromOutfitField('jacket', item); }}
                            >×</button>
                          </span>
                        ))}
                        <input
                          type="text"
                          className="field-input"
                          placeholder={getFieldItems('jacket').length === 0 ? t.jacket : ''}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && e.target.value.trim()) {
                              e.preventDefault();
                              addToOutfitField('jacket', e.target.value.trim());
                              e.target.value = '';
                            }
                          }}
                        />
                      </div>
                      {getWardrobeQuickPicks('jacket').length > 0 && (
                        <div className="quick-picks">
                          {getWardrobeQuickPicks('jacket').slice(0, 3).map((item, i) => (
                            <button
                              key={i}
                              type="button"
                              className={`quick-pick ${isItemInField('jacket', item) ? 'selected' : ''}`}
                              onClick={() => isItemInField('jacket', item) ? removeFromOutfitField('jacket', item) : addToOutfitField('jacket', item)}
                            >
                              <span className="quick-pick-icon">🧥</span>
                              {item}
                            </button>
                          ))}
                          {getWardrobeQuickPicks('jacket').length > 3 && (
                            <button
                              type="button"
                              className="quick-pick quick-pick-more"
                              onClick={() => setQuickPickPopup({ field: 'jacket', items: getWardrobeQuickPicks('jacket') })}
                            >
                              +{getWardrobeQuickPicks('jacket').length - 3}
                            </button>
                          )}
                        </div>
                      )}
                    </div>

                    {/* Shoes */}
                    <div className="field-group">
                      <div className="field-input-wrapper" onClick={(e) => e.currentTarget.querySelector('input')?.focus()}>
                        {getFieldItems('shoes').map((item, i) => (
                          <span key={i} className="selected-chip">
                            👟 {item}
                            <button 
                              type="button"
                              className="selected-chip-remove"
                              onClick={(e) => { e.stopPropagation(); removeFromOutfitField('shoes', item); }}
                            >×</button>
                          </span>
                        ))}
                        <input
                          type="text"
                          className="field-input"
                          placeholder={getFieldItems('shoes').length === 0 ? t.shoes : ''}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && e.target.value.trim()) {
                              e.preventDefault();
                              addToOutfitField('shoes', e.target.value.trim());
                              e.target.value = '';
                            }
                          }}
                        />
                      </div>
                      {getWardrobeQuickPicks('shoes').length > 0 && (
                        <div className="quick-picks">
                          {getWardrobeQuickPicks('shoes').slice(0, 3).map((item, i) => (
                            <button
                              key={i}
                              type="button"
                              className={`quick-pick ${isItemInField('shoes', item) ? 'selected' : ''}`}
                              onClick={() => isItemInField('shoes', item) ? removeFromOutfitField('shoes', item) : addToOutfitField('shoes', item)}
                            >
                              <span className="quick-pick-icon">👟</span>
                              {item}
                            </button>
                          ))}
                          {getWardrobeQuickPicks('shoes').length > 3 && (
                            <button
                              type="button"
                              className="quick-pick quick-pick-more"
                              onClick={() => setQuickPickPopup({ field: 'shoes', items: getWardrobeQuickPicks('shoes') })}
                            >
                              +{getWardrobeQuickPicks('shoes').length - 3}
                            </button>
                          )}
                        </div>
                      )}
                    </div>

                    {/* Accessories */}
                    <div className="field-group">
                      <div className="field-input-wrapper" onClick={(e) => e.currentTarget.querySelector('input')?.focus()}>
                        {getFieldItems('accessories').map((item, i) => (
                          <span key={i} className="selected-chip">
                            ⌚ {item}
                            <button 
                              type="button"
                              className="selected-chip-remove"
                              onClick={(e) => { e.stopPropagation(); removeFromOutfitField('accessories', item); }}
                            >×</button>
                          </span>
                        ))}
                        <input
                          type="text"
                          className="field-input"
                          placeholder={getFieldItems('accessories').length === 0 ? t.accessories : ''}
                          onKeyDown={(e) => {
                            if (e.key === 'Enter' && e.target.value.trim()) {
                              e.preventDefault();
                              addToOutfitField('accessories', e.target.value.trim());
                              e.target.value = '';
                            }
                          }}
                        />
                      </div>
                      {getWardrobeQuickPicks('accessories').length > 0 && (
                        <div className="quick-picks">
                          {getWardrobeQuickPicks('accessories').slice(0, 3).map((item, i) => (
                            <button
                              key={i}
                              type="button"
                              className={`quick-pick ${isItemInField('accessories', item) ? 'selected' : ''}`}
                              onClick={() => isItemInField('accessories', item) ? removeFromOutfitField('accessories', item) : addToOutfitField('accessories', item)}
                            >
                              <span className="quick-pick-icon">⌚</span>
                              {item}
                            </button>
                          ))}
                          {getWardrobeQuickPicks('accessories').length > 3 && (
                            <button
                              type="button"
                              className="quick-pick quick-pick-more"
                              onClick={() => setQuickPickPopup({ field: 'accessories', items: getWardrobeQuickPicks('accessories') })}
                            >
                              +{getWardrobeQuickPicks('accessories').length - 3}
                            </button>
                          )}
                        </div>
                      )}
                    </div>

                    <div className={`image-upload ${newOutfit.image ? 'has-image' : ''}`}>
                      {newOutfit.image ? (
                        <div className="image-preview-wrapper">
                          <img src={newOutfit.image} alt="Preview" className="image-preview" />
                          <button 
                            type="button"
                            className="image-remove-btn"
                            onClick={(e) => {
                              e.preventDefault();
                              e.stopPropagation();
                              setNewOutfit({ ...newOutfit, image: null });
                            }}
                          >
                            ×
                          </button>
                        </div>
                      ) : (
                        <label style={{cursor: 'pointer', display: 'block'}}>
                          <div className="image-upload-icon">📷</div>
                          <div className="image-upload-text">{t.addImage}</div>
                          <input type="file" accept="image/*" onChange={handleImageUpload} className="hidden" />
                        </label>
                      )}
                    </div>
                  </div>

                  <div className="btn-row">
                    <button onClick={cancelEdit} className="btn btn-secondary">{t.cancel}</button>
                    <button 
                      onClick={editingOutfit ? updateOutfit : addOutfit} 
                      disabled={!newOutfit.name} 
                      className="btn btn-primary"
                    >
                      {editingOutfit ? t.update : t.save}
                    </button>
                  </div>
                </div>
              </div>
            </>
          )}

          {/* ==================== WARDROBE MODALS ==================== */}

          {/* Wardrobe Full View */}
          {showWardrobe && (
            <div className="wardrobe-view" {...createDragToClose(() => { setShowWardrobe(false); setWardrobeEditMode(false); }, '.wardrobe-content')}>
              <div className="view-handle" />
              <div className="wardrobe-header">
                <button className="wardrobe-back" onClick={() => { setShowWardrobe(false); setWardrobeEditMode(false); }}>←</button>
                <div className="wardrobe-header-info">
                  <h2>{t.wardrobe.title}</h2>
                  <p>{wardrobeItems.length} {t.wardrobe.items}</p>
                </div>
                {wardrobeItems.length > 0 && (
                  <button 
                    className={`wardrobe-edit-toggle ${wardrobeEditMode ? 'active' : ''}`}
                    onClick={() => setWardrobeEditMode(!wardrobeEditMode)}
                  >
                    {wardrobeEditMode ? t.wardrobe.doneEditing : t.wardrobe.deleteMode}
                  </button>
                )}
                <button className="wardrobe-add-btn" onClick={() => setShowAddMethod(true)}>
                  +
                </button>
              </div>
              <div className="wardrobe-content">
                {wardrobeItems.length === 0 ? (
                  <div className="wardrobe-empty">
                    <div className="wardrobe-empty-icon">👕</div>
                    <h3>{t.wardrobe.empty}</h3>
                    <p>{t.wardrobe.emptyDesc}</p>
                    <button className="btn btn-primary" onClick={() => setShowAddMethod(true)}>
                      + {t.wardrobe.addItem}
                    </button>
                  </div>
                ) : (
                  Object.entries(wardrobeByCategory).map(([category, items]) => (
                    items.length > 0 && (
                      <div key={category} className="wardrobe-category">
                        <div className="wardrobe-category-header">
                          {t.wardrobe.categories[category]}
                          <span className="wardrobe-category-count">{items.length}</span>
                        </div>
                        <div className="wardrobe-items">
                          {items.map(item => (
                            <div 
                              key={item.id} 
                              className="wardrobe-item"
                              onClick={() => {
                                if (!wardrobeEditMode) {
                                  setEditingWardrobeItem(item);
                                }
                              }}
                            >
                              {wardrobeEditMode && (
                                <button 
                                  className="wardrobe-item-delete"
                                  onClick={(e) => {
                                    e.stopPropagation();
                                    setShowDeleteItemConfirm(item.id);
                                  }}
                                >
                                  ×
                                </button>
                              )}
                              {item.color && (
                                <span 
                                  className="wardrobe-item-color" 
                                  style={{ background: colorOptions.find(c => c.id === item.color)?.hex || '#888' }}
                                />
                              )}
                              {formatItemName(item)}
                            </div>
                          ))}
                        </div>
                      </div>
                    )
                  ))
                )}
              </div>
            </div>
          )}

          {/* Delete Item Confirmation */}
          {showDeleteItemConfirm && (
            <>
              <div className="overlay" onClick={() => setShowDeleteItemConfirm(null)} />
              <div className="confirm-dialog">
                <h3>{t.wardrobe.confirmDeleteItem}</h3>
                <p>{t.wardrobe.confirmDeleteItemText}</p>
                <div className="confirm-buttons">
                  <button className="btn btn-secondary" onClick={() => setShowDeleteItemConfirm(null)}>
                    {t.no}
                  </button>
                  <button className="btn btn-danger" onClick={() => {
                    removeWardrobeItem(showDeleteItemConfirm);
                    setShowDeleteItemConfirm(null);
                  }}>
                    {t.yes}
                  </button>
                </div>
              </div>
            </>
          )}

          {/* Edit Wardrobe Item Modal */}
          {editingWardrobeItem && (
            <>
              <div className="add-method-overlay" onClick={() => setEditingWardrobeItem(null)} />
              <div className="add-method-modal">
                <div className="add-method-handle" />
                <h3>{t.wardrobe.editItem}</h3>
                <div className="manual-form" style={{ marginTop: '16px' }}>
                  <input
                    type="text"
                    placeholder={t.wardrobe.itemName}
                    value={editingWardrobeItem.name || ''}
                    onChange={(e) => setEditingWardrobeItem({...editingWardrobeItem, name: e.target.value})}
                  />
                  <select
                    value={editingWardrobeItem.category}
                    onChange={(e) => setEditingWardrobeItem({...editingWardrobeItem, category: e.target.value})}
                  >
                    {Object.keys(itemTypesByCategory).map(cat => (
                      <option key={cat} value={cat}>{t.wardrobe.categories[cat]}</option>
                    ))}
                  </select>
                  <input
                    type="text"
                    placeholder={t.wardrobe.brand}
                    value={editingWardrobeItem.brand || ''}
                    onChange={(e) => setEditingWardrobeItem({...editingWardrobeItem, brand: e.target.value})}
                    list="brand-edit-suggestions"
                  />
                  <datalist id="brand-edit-suggestions">
                    {commonBrands.map(b => <option key={b} value={b} />)}
                  </datalist>
                  <select
                    value={editingWardrobeItem.color || ''}
                    onChange={(e) => setEditingWardrobeItem({...editingWardrobeItem, color: e.target.value})}
                  >
                    <option value="">{t.wardrobe.color}...</option>
                    {colorOptions.map(c => (
                      <option key={c.id} value={c.id}>{getColorName(c.id)}</option>
                    ))}
                  </select>
                  {['tops', 'bottoms', 'jackets'].includes(editingWardrobeItem.category) && (
                    <select
                      value={editingWardrobeItem.fit || ''}
                      onChange={(e) => setEditingWardrobeItem({...editingWardrobeItem, fit: e.target.value})}
                    >
                      <option value="">{t.wardrobe.fit}...</option>
                      {Object.keys(t.wardrobe.fits).map(f => (
                        <option key={f} value={f}>{t.wardrobe.fits[f]}</option>
                      ))}
                    </select>
                  )}
                </div>
                <button 
                  className="btn btn-primary" 
                  style={{ width: '100%', marginTop: '20px' }}
                  onClick={() => {
                    setWardrobeItems(prev => prev.map(item => 
                      item.id === editingWardrobeItem.id ? editingWardrobeItem : item
                    ));
                    setEditingWardrobeItem(null);
                  }}
                >
                  {t.wardrobe.saveItem}
                </button>
              </div>
            </>
          )}

          {/* Add Method Modal */}
          {showAddMethod && (
            <>
              <div className="add-method-overlay" onClick={() => setShowAddMethod(false)} />
              <div className="add-method-modal">
                <div className="add-method-handle" />
                <h3>{t.wardrobe.addMethod}</h3>
                <div className="add-method-grid">
                  {/* Voice */}
                  <button 
                    className="add-method-btn"
                    onClick={() => { setShowAddMethod(false); setShowVoice(true); }}
                  >
                    <span className="add-method-icon">🎤</span>
                    <div className="add-method-title">{t.wardrobe.voice}</div>
                    <div className="add-method-desc">{t.wardrobe.voiceDesc}</div>
                  </button>
                  
                  {/* Brands */}
                  <button 
                    className="add-method-btn"
                    onClick={() => { setShowAddMethod(false); setShowBrands(true); }}
                  >
                    <span className="add-method-icon">🏷️</span>
                    <div className="add-method-title">{t.wardrobe.brands}</div>
                    <div className="add-method-desc">{t.wardrobe.brandsDesc}</div>
                  </button>
                  
                  {/* Camera - Coming Soon */}
                  <button 
                    className="add-method-btn disabled"
                    onClick={() => { setShowAddMethod(false); setShowComingSoon(true); }}
                  >
                    <span className="add-method-icon">📸</span>
                    <div className="add-method-title">{t.wardrobe.camera}</div>
                    <div className="add-method-desc">{t.wardrobe.cameraDesc}</div>
                  </button>
                  
                  {/* Manual */}
                  <button 
                    className="add-method-btn"
                    onClick={() => { setShowAddMethod(false); setShowManual(true); }}
                  >
                    <span className="add-method-icon">✏️</span>
                    <div className="add-method-title">{t.wardrobe.manual}</div>
                    <div className="add-method-desc">{t.wardrobe.manualDesc}</div>
                  </button>
                </div>
              </div>
            </>
          )}

          {/* Kickstart Flow */}
          {showKickstart && (
            <div className="kickstart-view" {...createDragToClose(() => { setShowKickstart(false); setKickstartStep(1); setKickstartData({ styles: [], colors: [], brands: [], size: 'medium' }); setKickstartResult(null); }, '.kickstart-content')}>
              <div className="view-handle" />
              <div className="kickstart-header">
                <h2>{kickstartResult ? t.wardrobe.generated : t.wardrobe.kickstartTitle}</h2>
                <p>{kickstartResult ? '' : t.wardrobe.kickstartIntro}</p>
              </div>
              
              {!kickstartResult && (
                <>
                  <div className="kickstart-progress">
                    <div className="kickstart-progress-bar">
                      <div className="kickstart-progress-fill" style={{ width: `${(kickstartStep / 4) * 100}%` }} />
                    </div>
                    <div className="kickstart-progress-text">{kickstartStep} / 4</div>
                  </div>
                  
                  <div className="kickstart-content">
                    {/* Step 1: Style */}
                    {kickstartStep === 1 && (
                      <>
                        <div className="kickstart-question">{t.wardrobe.step1}</div>
                        <div className="kickstart-options">
                          {[
                            { id: 'minimalist', icon: '🖤' },
                            { id: 'streetwear', icon: '🏀' },
                            { id: 'classic', icon: '👔' },
                            { id: 'scandi', icon: '🌿' },
                            { id: 'y2k', icon: '💿' },
                            { id: 'athleisure', icon: '🏋️' },
                            { id: 'mix', icon: '🎨' }
                          ].map(style => (
                            <button
                              key={style.id}
                              className={`kickstart-option ${kickstartData.styles.includes(style.id) ? 'selected' : ''}`}
                              onClick={() => {
                                setKickstartData(prev => ({
                                  ...prev,
                                  styles: prev.styles.includes(style.id)
                                    ? prev.styles.filter(s => s !== style.id)
                                    : [...prev.styles, style.id]
                                }));
                              }}
                            >
                              <div className="kickstart-option-icon">{style.icon}</div>
                              <div className="kickstart-option-label">{t.wardrobe.styles[style.id]}</div>
                            </button>
                          ))}
                        </div>
                      </>
                    )}
                    
                    {/* Step 2: Colors */}
                    {kickstartStep === 2 && (
                      <>
                        <div className="kickstart-question">{t.wardrobe.step2}</div>
                        <div className="kickstart-colors">
                          {colorOptions.map(color => (
                            <div key={color.id} style={{ textAlign: 'center' }}>
                              <button
                                className={`kickstart-color ${kickstartData.colors.includes(color.id) ? 'selected' : ''}`}
                                style={{ background: color.hex }}
                                onClick={() => {
                                  setKickstartData(prev => ({
                                    ...prev,
                                    colors: prev.colors.includes(color.id)
                                      ? prev.colors.filter(c => c !== color.id)
                                      : [...prev.colors, color.id]
                                  }));
                                }}
                              />
                              <div className="kickstart-color-label">{getColorName(color.id)}</div>
                            </div>
                          ))}
                        </div>
                      </>
                    )}
                    
                    {/* Step 3: Brands */}
                    {kickstartStep === 3 && (
                      <>
                        <div className="kickstart-question">{t.wardrobe.step3}</div>
                        <div className="kickstart-brands">
                          {commonBrands.map(brand => (
                            <button
                              key={brand}
                              className={`kickstart-brand ${kickstartData.brands.includes(brand) ? 'selected' : ''}`}
                              onClick={() => {
                                setKickstartData(prev => ({
                                  ...prev,
                                  brands: prev.brands.includes(brand)
                                    ? prev.brands.filter(b => b !== brand)
                                    : [...prev.brands, brand]
                                }));
                              }}
                            >
                              {brand}
                            </button>
                          ))}
                        </div>
                      </>
                    )}
                    
                    {/* Step 4: Size */}
                    {kickstartStep === 4 && (
                      <>
                        <div className="kickstart-question">{t.wardrobe.step4}</div>
                        <div className="kickstart-sizes">
                          {[
                            { id: 'minimal', icon: '🧘' },
                            { id: 'medium', icon: '👕' },
                            { id: 'large', icon: '👗' }
                          ].map(size => (
                            <button
                              key={size.id}
                              className={`kickstart-size ${kickstartData.size === size.id ? 'selected' : ''}`}
                              onClick={() => setKickstartData(prev => ({ ...prev, size: size.id }))}
                            >
                              <div className="kickstart-size-header">
                                <span className="kickstart-size-icon">{size.icon}</span>
                                <span className="kickstart-size-title">{t.wardrobe.sizes[size.id]}</span>
                                <span className="kickstart-size-count">{t.wardrobe.sizes[size.id + 'Count']}</span>
                              </div>
                              <div className="kickstart-size-desc">{t.wardrobe.sizes[size.id + 'Desc']}</div>
                            </button>
                          ))}
                        </div>
                      </>
                    )}
                  </div>
                  
                  <div className="kickstart-footer">
                    <button 
                      className="kickstart-btn kickstart-btn-back"
                      onClick={() => kickstartStep === 1 ? setShowKickstart(false) : setKickstartStep(s => s - 1)}
                    >
                      {kickstartStep === 1 ? t.cancel : t.back}
                    </button>
                    <button 
                      className="kickstart-btn kickstart-btn-next"
                      disabled={kickstartStep === 1 && kickstartData.styles.length === 0}
                      onClick={() => {
                        if (kickstartStep < 4) {
                          setKickstartStep(s => s + 1);
                        } else {
                          const items = generateWardrobeFromKickstart();
                          setKickstartResult(items);
                        }
                      }}
                    >
                      {kickstartStep === 4 ? '✨ ' + t.wardrobe.kickstart : '→'}
                    </button>
                  </div>
                </>
              )}
              
              {/* Kickstart Result */}
              {kickstartResult && (
                <div className="kickstart-result">
                  <div className="kickstart-result-header">
                    <div className="kickstart-result-icon">🎉</div>
                    <h3>{t.wardrobe.generated}</h3>
                    <p>{t.wardrobe.basedOn}: {kickstartData.styles.map(s => t.wardrobe.styles[s]).join(', ')}</p>
                  </div>
                  
                  <div className="kickstart-result-items">
                    {Object.entries(
                      kickstartResult.reduce((acc, item) => {
                        if (!acc[item.category]) acc[item.category] = [];
                        acc[item.category].push(item);
                        return acc;
                      }, {})
                    ).map(([category, items]) => (
                      <div key={category} className="wardrobe-category">
                        <div className="wardrobe-category-header">
                          {t.wardrobe.categories[category]}
                          <span className="wardrobe-category-count">{items.length}</span>
                        </div>
                        <div className="wardrobe-items">
                          {items.map((item, i) => (
                            <div 
                              key={i}
                              className={`wardrobe-item ${!item.included === false ? '' : 'selected'}`}
                              onClick={() => {
                                setKickstartResult(prev => prev.map((it, idx) => 
                                  prev.indexOf(item) === idx ? { ...it, included: it.included === false ? true : false } : it
                                ));
                              }}
                            >
                              <span 
                                className="wardrobe-item-color"
                                style={{ background: colorOptions.find(c => c.id === item.color)?.hex || '#888' }}
                              />
                              {item.brand ? `${item.brand} ` : ''}{t.wardrobe.types[item.type] || item.type}
                            </div>
                          ))}
                        </div>
                      </div>
                    ))}
                  </div>
                  
                  <p style={{ textAlign: 'center', color: 'var(--text-secondary)', fontSize: '13px', margin: '16px 0' }}>
                    {t.wardrobe.quickEdit}
                  </p>
                  
                  <div className="kickstart-footer">
                    <button 
                      className="kickstart-btn kickstart-btn-back"
                      onClick={() => { setKickstartResult(null); setKickstartStep(1); }}
                    >
                      {t.wardrobe.adjust}
                    </button>
                    <button 
                      className="kickstart-btn kickstart-btn-next"
                      onClick={() => {
                        const itemsToAdd = kickstartResult.filter(item => item.included !== false);
                        addWardrobeItems(itemsToAdd);
                        closeAllWardrobeModals();
                        setShowWardrobe(true);
                      }}
                    >
                      ✓ {t.wardrobe.looksGood}
                    </button>
                  </div>
                </div>
              )}
            </div>
          )}

          {/* Voice Modal */}
          {showVoice && (
            <div className="voice-view" {...createDragToClose(() => { setShowVoice(false); setVoiceTranscript(''); setVoiceParsedItems([]); setVoiceEditingIndex(null); }, '.voice-content')}>
              <div className="view-handle" />
              <div className="voice-header">
                <button className="wardrobe-back" onClick={() => { setShowVoice(false); setVoiceTranscript(''); setVoiceParsedItems([]); setVoiceEditingIndex(null); }}>←</button>
                <h2>{t.wardrobe.voiceTitle}</h2>
              </div>
              <div className="voice-content">
                {voiceParsedItems.length === 0 ? (
                  <>
                    <p className="voice-hint">{t.wardrobe.voiceHint}</p>
                    
                    <button 
                      className={`voice-btn ${isListening ? 'listening' : ''}`}
                      onClick={startVoiceRecognition}
                    >
                      🎤
                    </button>
                    
                    <div className="voice-status">
                      {isListening ? t.wardrobe.voiceListening : t.wardrobe.voiceTap}
                    </div>
                    
                    {voiceTranscript && !voiceParsedItems.length && (
                      <div className="voice-transcript">"{voiceTranscript}"</div>
                    )}
                  </>
                ) : (
                  <div className="voice-results" style={{ width: '100%', marginTop: 0 }}>
                    <h3 style={{ textAlign: 'center', marginBottom: '8px' }}>{t.wardrobe.voiceConfirmText}</h3>
                    <p style={{ textAlign: 'center', color: 'var(--text-secondary)', fontSize: '13px', marginBottom: '20px' }}>
                      {t.wardrobe.voiceEdit}
                    </p>
                    {voiceParsedItems.map((item, i) => (
                      <div key={i} className="voice-result-item" style={{ flexDirection: 'column', alignItems: 'stretch', gap: '8px' }}>
                        {voiceEditingIndex === i ? (
                          <>
                            <input
                              type="text"
                              value={item.name}
                              onChange={(e) => {
                                setVoiceParsedItems(prev => prev.map((it, idx) => 
                                  idx === i ? { ...it, name: e.target.value } : it
                                ));
                              }}
                              autoFocus
                              style={{ fontSize: '15px', padding: '8px', borderRadius: '8px', border: '1px solid var(--border)' }}
                            />
                            <div style={{ display: 'flex', gap: '8px' }}>
                              <select
                                value={item.category}
                                onChange={(e) => {
                                  setVoiceParsedItems(prev => prev.map((it, idx) => 
                                    idx === i ? { ...it, category: e.target.value } : it
                                  ));
                                }}
                                style={{ flex: 1, padding: '8px', borderRadius: '8px' }}
                              >
                                {Object.keys(itemTypesByCategory).map(cat => (
                                  <option key={cat} value={cat}>{t.wardrobe.categories[cat]}</option>
                                ))}
                              </select>
                              <button
                                onClick={() => setVoiceEditingIndex(null)}
                                style={{ padding: '8px 16px', background: 'var(--accent)', color: 'white', border: 'none', borderRadius: '8px', fontWeight: '600' }}
                              >
                                ✓
                              </button>
                            </div>
                          </>
                        ) : (
                          <div style={{ display: 'flex', alignItems: 'center', justifyContent: 'space-between' }}>
                            <span 
                              onClick={() => setVoiceEditingIndex(i)}
                              style={{ flex: 1, cursor: 'pointer' }}
                            >
                              {item.name}
                              <span style={{ color: 'var(--text-tertiary)', fontSize: '12px', marginLeft: '8px' }}>
                                ({t.wardrobe.categories[item.category]})
                              </span>
                            </span>
                            <button 
                              className="voice-result-remove"
                              onClick={() => setVoiceParsedItems(prev => prev.filter((_, idx) => idx !== i))}
                            >
                              ×
                            </button>
                          </div>
                        )}
                      </div>
                    ))}
                  </div>
                )}
              </div>
              
              {voiceParsedItems.length > 0 && (
                <div className="voice-footer">
                  <button 
                    className="kickstart-btn kickstart-btn-back"
                    onClick={() => { setVoiceTranscript(''); setVoiceParsedItems([]); setVoiceEditingIndex(null); }}
                  >
                    {t.wardrobe.voiceRetry}
                  </button>
                  <button 
                    className="kickstart-btn kickstart-btn-next"
                    onClick={() => {
                      addWardrobeItems(voiceParsedItems);
                      setShowVoice(false);
                      setVoiceTranscript('');
                      setVoiceParsedItems([]);
                      setVoiceEditingIndex(null);
                      setShowWardrobe(true);
                    }}
                  >
                    ✓ {t.wardrobe.voiceConfirm}
                  </button>
                </div>
              )}
            </div>
          )}

          {/* Brands Modal */}
          {showBrands && (
            <div className="brands-view" {...createDragToClose(() => { setShowBrands(false); setSelectedBrands([]); setBrandItemsStep(false); setBrandAddedItems([]); }, '.brands-content')}>
              <div className="view-handle" />
              <div className="brands-header">
                <button className="wardrobe-back" onClick={() => { setShowBrands(false); setSelectedBrands([]); setBrandItemsStep(false); setBrandAddedItems([]); }}>←</button>
                <h2>{brandItemsStep ? t.wardrobe.brandsNext + ' ' + selectedBrands[currentBrandIndex] + '?' : t.wardrobe.brandsTitle}</h2>
              </div>
              <div className="brands-content">
                {!brandItemsStep ? (
                  <>
                    <p className="brands-subtitle">{t.wardrobe.brandsSelect}</p>
                    <div className="brands-grid">
                      {commonBrands.map(brand => (
                        <button
                          key={brand}
                          className={`kickstart-brand ${selectedBrands.includes(brand) ? 'selected' : ''}`}
                          onClick={() => {
                            setSelectedBrands(prev => 
                              prev.includes(brand) ? prev.filter(b => b !== brand) : [...prev, brand]
                            );
                          }}
                        >
                          {brand}
                        </button>
                      ))}
                    </div>
                  </>
                ) : (
                  <>
                    <div className="brand-items-header">
                      <h3>{selectedBrands[currentBrandIndex]}</h3>
                    </div>
                    {Object.entries(itemTypesByCategory).map(([category, types]) => (
                      <div key={category} className="brand-items-category">
                        <div className="brand-items-category-title">{t.wardrobe.categories[category]}</div>
                        <div className="brand-items-grid">
                          {types.map(type => {
                            const isAdded = brandAddedItems.some(
                              item => item.brand === selectedBrands[currentBrandIndex] && item.type === type
                            );
                            return (
                              <button
                                key={type}
                                className={`brand-item-btn ${isAdded ? 'added' : ''}`}
                                onClick={() => {
                                  if (isAdded) {
                                    setBrandAddedItems(prev => prev.filter(
                                      item => !(item.brand === selectedBrands[currentBrandIndex] && item.type === type)
                                    ));
                                  } else {
                                    setBrandAddedItems(prev => [...prev, {
                                      category,
                                      type,
                                      brand: selectedBrands[currentBrandIndex],
                                      color: 'black'
                                    }]);
                                  }
                                }}
                              >
                                {t.wardrobe.types[type] || type}
                              </button>
                            );
                          })}
                        </div>
                      </div>
                    ))}
                  </>
                )}
              </div>
              <div className="brands-footer">
                {!brandItemsStep ? (
                  <button 
                    className="btn btn-primary" 
                    style={{ width: '100%' }}
                    disabled={selectedBrands.length === 0}
                    onClick={() => setBrandItemsStep(true)}
                  >
                    {selectedBrands.length > 0 ? `→ ${selectedBrands.length} ${t.wardrobe.brands.toLowerCase()}` : t.wardrobe.brandsSelect}
                  </button>
                ) : (
                  <div style={{ display: 'flex', gap: '12px' }}>
                    <button 
                      className="kickstart-btn kickstart-btn-back"
                      onClick={() => {
                        if (currentBrandIndex > 0) {
                          setCurrentBrandIndex(i => i - 1);
                        } else {
                          setBrandItemsStep(false);
                        }
                      }}
                    >
                      ← {t.back}
                    </button>
                    <button 
                      className="kickstart-btn kickstart-btn-next"
                      onClick={() => {
                        if (currentBrandIndex < selectedBrands.length - 1) {
                          setCurrentBrandIndex(i => i + 1);
                        } else {
                          addWardrobeItems(brandAddedItems);
                          setShowBrands(false);
                          setSelectedBrands([]);
                          setBrandItemsStep(false);
                          setCurrentBrandIndex(0);
                          setBrandAddedItems([]);
                          setShowWardrobe(true);
                        }
                      }}
                    >
                      {currentBrandIndex < selectedBrands.length - 1 
                        ? `→ ${selectedBrands[currentBrandIndex + 1]}`
                        : `✓ ${t.wardrobe.brandsDone} (${brandAddedItems.length})`
                      }
                    </button>
                  </div>
                )}
              </div>
            </div>
          )}

          {/* Manual Form */}
          {showManual && (
            <div className="manual-view" {...createDragToClose(() => setShowManual(false), '.manual-content')}>
              <div className="view-handle" />
              <div className="manual-header">
                <button className="wardrobe-back" onClick={() => setShowManual(false)}>←</button>
                <h2>{t.wardrobe.manualTitle}</h2>
              </div>
              <div className="manual-content">
                <div className="manual-form">
                  <input
                    type="text"
                    placeholder={t.wardrobe.itemName}
                    value={manualItem.name}
                    onChange={(e) => setManualItem(prev => ({ ...prev, name: e.target.value }))}
                  />
                  
                  <select
                    value={manualItem.category}
                    onChange={(e) => setManualItem(prev => ({ ...prev, category: e.target.value, type: '' }))}
                  >
                    {Object.keys(itemTypesByCategory).map(cat => (
                      <option key={cat} value={cat}>{t.wardrobe.categories[cat]}</option>
                    ))}
                  </select>
                  
                  <input
                    type="text"
                    placeholder={t.wardrobe.brand}
                    value={manualItem.brand}
                    onChange={(e) => setManualItem(prev => ({ ...prev, brand: e.target.value }))}
                    list="brand-suggestions"
                  />
                  <datalist id="brand-suggestions">
                    {commonBrands.map(b => <option key={b} value={b} />)}
                  </datalist>
                  
                  <select
                    value={manualItem.color}
                    onChange={(e) => setManualItem(prev => ({ ...prev, color: e.target.value }))}
                  >
                    <option value="">{t.wardrobe.color}...</option>
                    {colorOptions.map(c => (
                      <option key={c.id} value={c.id}>{getColorName(c.id)}</option>
                    ))}
                  </select>
                  
                  {['tops', 'bottoms', 'jackets'].includes(manualItem.category) && (
                    <select
                      value={manualItem.fit}
                      onChange={(e) => setManualItem(prev => ({ ...prev, fit: e.target.value }))}
                    >
                      <option value="">{t.wardrobe.fit}...</option>
                      {Object.keys(t.wardrobe.fits).map(f => (
                        <option key={f} value={f}>{t.wardrobe.fits[f]}</option>
                      ))}
                    </select>
                  )}
                </div>
              </div>
              <div className="manual-footer">
                <button 
                  className="btn btn-primary" 
                  style={{ width: '100%' }}
                  disabled={!manualItem.name.trim()}
                  onClick={() => {
                    addWardrobeItem(manualItem);
                    setManualItem({ category: 'tops', type: '', brand: '', color: '', fit: '', name: '' });
                    setShowManual(false);
                    setShowWardrobe(true);
                  }}
                >
                  {t.wardrobe.saveItem}
                </button>
              </div>
            </div>
          )}

          {/* Quick Pick Popup */}
          {quickPickPopup && (
            <>
              <div className="quick-pick-popup-overlay" onClick={() => setQuickPickPopup(null)} />
              <div className="quick-pick-popup">
                <div className="add-method-handle" />
                <div className="quick-pick-popup-header">
                  <span className="quick-pick-popup-title">
                    {fieldIcons[quickPickPopup.field]} {
                      quickPickPopup.field === 'top' ? t.top :
                      quickPickPopup.field === 'bottom' ? t.bottom :
                      quickPickPopup.field === 'jacket' ? t.jacket :
                      quickPickPopup.field === 'shoes' ? t.shoes :
                      t.accessories
                    }
                  </span>
                  <button className="quick-pick-popup-close" onClick={() => setQuickPickPopup(null)}>×</button>
                </div>
                <div className="quick-pick-popup-grid">
                  {quickPickPopup.items.map((item, i) => (
                    <button
                      key={i}
                      type="button"
                      className={`quick-pick-popup-item ${isItemInField(quickPickPopup.field, item) ? 'selected' : ''}`}
                      onClick={() => {
                        addToOutfitField(quickPickPopup.field, item);
                      }}
                    >
                      <span>{fieldIcons[quickPickPopup.field]}</span>
                      {item}
                      {isItemInField(quickPickPopup.field, item) && <span style={{marginLeft: 'auto'}}>✓</span>}
                    </button>
                  ))}
                </div>
                <button 
                  className="btn btn-primary" 
                  style={{ width: '100%', marginTop: '16px' }}
                  onClick={() => setQuickPickPopup(null)}
                >
                  {t.wardrobe.brandsDone || 'Klar'}
                </button>
              </div>
            </>
          )}

          {/* Coming Soon Modal */}
          {showComingSoon && (
            <>
              <div className="add-method-overlay" onClick={() => setShowComingSoon(false)} />
              <div className="add-method-modal">
                <div className="add-method-handle" />
                <div className="coming-soon-content">
                  <div className="coming-soon-icon">📸</div>
                  <h3>{t.wardrobe.comingSoon}</h3>
                  <p>{t.wardrobe.comingSoonDesc}</p>
                </div>
                <button 
                  className="btn btn-primary" 
                  style={{ width: '100%', marginTop: '20px' }}
                  onClick={() => setShowComingSoon(false)}
                >
                  OK
                </button>
              </div>
            </>
          )}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<OutfitApp />);
  </script>
</body>
</html>
